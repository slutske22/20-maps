(function(){var e={"esri/renderers/support/clickToleranceUtils":321,"esri/views/support/drapedUtils":385,"esri/views/layers/TileLayerView":1040,"esri/views/3d/layers/TileLayerView3D":2129},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{1040:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(154),r(152),r(153),r(151),r(321)],void 0===(i=function(e,t,r,n,i,a,o,l){Object.defineProperty(t,"__esModule",{value:!0}),t.TileLayerView=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.fetchPopupFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var o,s,u,p=this;return r.__generator(this,(function(c){return o=this.layer,e?"tile"!==o.type?[2,a.reject(new n("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:o.type}))]:(s=this.get("view.scale"),u=o.allSublayers.toArray().filter((function(e){var t=0===e.minScale||s<=e.minScale,r=0===e.maxScale||s>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&r})),[2,a.eachAlways(u.map((function(n){return r.__awaiter(p,void 0,void 0,(function(){var a,o,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return a=n.createQuery(),o=i.isSome(t)?t.event:null,s=l.calculateTolerance({renderer:n.renderer,event:o}),a.geometry=this.createFetchPopupFeaturesQueryGeometry(e,s),u=a,[4,n.popupTemplate.getRequiredFields()];case 1:return u.outFields=r.sent(),[4,n.queryFeatures(a)];case 2:return[2,r.sent().features]}}))}))}))).then((function(e){return[].concat.apply([],e.map((function(e){return e.value})).filter(Boolean))}))]):[2,a.reject(new n("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o}))]}))}))},r.__decorate([o.property()],t.prototype,"layer",void 0),r.__decorate([o.subclass("esri.layers.mixins.TileLayerView")],t)}(e)}}.apply(null,n))||(e.exports=i)},2129:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(154),r(152),r(153),r(151),r(308),r(666),r(1278),r(192),r(218),r(285),r(1040),r(385)],void 0===(i=function(e,t,r,n,i,a,o,l,s,u,p,c,f,y,d){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return"jpg"===this.layer.tileInfo.format},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasMixedImageFormats",{get:function(){return"mixed"===this.layer.tileInfo.format},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLevelRange",{get:function(){if(this.tileInfo){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)}return{minLevel:0,maxLevel:0}},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){if("web-tile"===this.layer.type){var e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if(i.isNone(e)||i.isNone(t)||!p.canProject(e,t)){var r="defaults"===this.layer.originOf("fullExtent")||i.isNone(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(a.reject(new n("layerview:incompatible-fullextent",r)))}}this._addTilingSchemeMatchPromise(),"version"in this.layer&&this.addResolvingPromise(u.checkArcGISServiceVersionCompatibility(this.layer))},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return d.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.suspended||this.emit("data-changed"),[2]}))}))},r.__decorate([o.property({readOnly:!0,dependsOn:["layer.tileInfo.format"]})],t.prototype,"imageFormatIsOpaque",null),r.__decorate([o.property({readOnly:!0,dependsOn:["layer.tileInfo.format"]})],t.prototype,"hasMixedImageFormats",null),r.__decorate([o.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),r.__decorate([o.property()],t.prototype,"layer",void 0),r.__decorate([o.property({aliasOf:"layer.tileInfo"})],t.prototype,"tileInfo",void 0),r.__decorate([o.property({readOnly:!0,dependsOn:["tileInfo","view.basemapTerrain.tilingScheme","layer.url"]})],t.prototype,"dataLevelRange",null),r.__decorate([o.subclass("esri.views.3d.layers.TileLayerView3D")],t)}(f.RefreshableLayerView(s.TiledLayerView3D(y.TileLayerView(l.LayerView3D(c)))))}.apply(null,n))||(e.exports=i)},321:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=e[n].size;"number"==typeof i&&(t+=i,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){var t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;var a="visualVariables"in t?function(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,i=t.minSize;return(n(r,e)+n(i,e))/2})),i=0,a=r.length;if(0===a)return e;for(var o=0;o<a;o++)i+=r[o];var l=Math.floor(i/a);return Math.max(l,e)}(i,t.visualVariables):i;if("simple"===t.type)return r(a,t.symbol);if("unique-value"===t.type){var o=a;return t.uniqueValueInfos.forEach((function(e){o=r(o,e.symbol)})),o}if("class-breaks"===t.type){var l=a;return t.classBreakInfos.forEach((function(e){l=r(l,e.symbol)})),l}return t.type,a}}.apply(null,n))||(e.exports=i)},385:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(159),r(152),r(200),r(321)],void 0===(i=function(e,t,r,n,i,a){function o(e,t,n,a){var o;if(void 0===a&&(a=new r.Extent),"2d"===n.type)o=t*n.resolution;else if("3d"===n.type){var l=n.basemapTerrain,s=l.overlayManager,u=s?s.overlayPixelSizeInMapUnits(e):1;o=l&&!l.spatialReference.equals(n.spatialReference)?i.getMetersPerUnitForSR(l.spatialReference)/i.getMetersPerUnitForSR(n.spatialReference):t*u}var p=e.x-o,c=e.y-o,f=e.x+o,y=e.y+o,d=n.spatialReference;return a.xmin=Math.min(p,f),a.ymin=Math.min(c,y),a.xmax=Math.max(p,f),a.ymax=Math.max(c,y),a.spatialReference=d,a}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=o,t.intersectsDrapedGeometry=function(e,t,r){var i=r.toMap(e);return n.isNone(i)?null:o(i,a.calculateTolerance(),r,l).intersects(t)?i:null};var l=new r.Extent}.apply(null,n))||(e.exports=i)}}]);
//# sourceMappingURL=114.js.map