(function(){var e={"esri/renderers/support/heatmapUtils":606,"esri/views/2d/layers/features/processors/BaseProcessor":1086,"esri/views/2d/layers/features/processors/HeatmapProcessor":2277},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{1086:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(236),r(151)],void 0===(o=function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.initialize=function(){},t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null},enumerable:!0,configurable:!0}),r.__decorate([o.property({readOnly:!0})],t.prototype,"supportsTileUpdates",null),r.__decorate([o.property({constructOnly:!0})],t.prototype,"remoteClient",void 0),r.__decorate([o.property({constructOnly:!0})],t.prototype,"service",void 0),r.__decorate([o.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],t.prototype,"spatialReference",null),r.__decorate([o.property({constructOnly:!0})],t.prototype,"tileInfo",void 0),r.__decorate([o.property({constructOnly:!0})],t.prototype,"tileStore",void 0),r.__decorate([o.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],t)}(n.HandleOwner);t.default=a}.apply(null,n))||(e.exports=o)},2277:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(151),r(606),r(1086)],void 0===(o=function(e,t,r,n,o,a){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="heatmap",t.updating=!1,t}return r.__extends(t,e),t.prototype.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._set("config",e),[2]}))}))},t.prototype.onTileData=function(e,t,r){if(t&&t.addOrUpdate&&t.addOrUpdate.length>0){var n=o.calculateHeatmapIntensityInfo(t.addOrUpdate,this.config.renderer,512,512);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.key.id,intensityInfo:n},{transferList:[n.matrix]})}return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.key.id,intensityInfo:null},r)},t.prototype.onTileError=function(e,t,r){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},r)},r.__decorate([n.property()],t.prototype,"config",void 0),r.__decorate([n.property()],t.prototype,"updating",void 0),r.__decorate([n.subclass("esri.views.2d.layers.features.processors.HeatmapProcessor")],t)}(a.default);t.default=i}.apply(null,n))||(e.exports=o)},606:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(121),r(168)],void 0===(o=function(e,t,r,n){function o(e,t,r,o,a){for(var i=new Uint32Array(e*e),s=("buffer"in t?t:new Float64Array(t)),p=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),u=p.length/(a-o),l=0;l<s.length;l++){var c=s[l],d=Math.floor((c-o)*u);i[l]=p[n.clamp(d,0,p.length-1)]}return i.buffer}function a(e){for(var t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1),o=0;o<=n.length;o++)n[o]=Math.exp(-Math.pow(o-t,2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}function i(e,t){return"function"==typeof e?e:e?"string"==typeof t?function(t){return-1*+t[e]}:function(r){return+r[e]+t}:function(){return 1}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateGradient=function(){if(!("document"in r))return function(){return null};var e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,function(r){t.clearRect(0,0,1,e.height);for(var n=t.createLinearGradient(0,0,0,e.height),o=0,a=r.colorStops;o<a.length;o++){var i=a[o],s=i.ratio,p=i.color;n.addColorStop(Math.max(s,.001),"rgba("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+")")}return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}}(),t.calculateHeatmapIntensityInfo=function(e,t,r,n){for(var o,s=t.blurRadius,p=t.fieldOffset,u=t.field,l=new Float64Array(r*n),c=a(s),d=Math.round(3*s),f=Number.NEGATIVE_INFINITY,y=i(u,p),h=0,v=e;h<v.length;h++)for(var g=v[h],_=g.geometry,m=g.attributes,b=_.x-d,w=_.y-d,M=Math.max(0,b),O=Math.max(0,w),I=Math.min(n,_.y+d),x=Math.min(r,_.x+d),A=+y(m),R=O;R<I;R++)for(var U=c[R-w],P=M;P<x;P++){var k=c[P-b];(o=l[R*r+P]+=U*k*A)>f&&(f=o)}return{matrix:l.buffer,max:f}},t.drawHeatmap=function(e,t,r,n,a,i){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var s=e.getImageData(0,0,t,t);r&&n&&s.data.set(new Uint8ClampedArray(o(t,r,n,a,i))),e.putImageData(s,0,0)},t.createHeatmapImageData=o,t.createKernel=a,t.createValueFunction=i}.apply(null,n))||(e.exports=o)}}]);
//# sourceMappingURL=127.js.map