(function(){var e={"esri/layers/support/lazyLayerLoader":380,"esri/renderers/support/styleUtils":387,"esri/portal/support/portalItemUtils":465,"esri/portal/support/portalLayers":557,"esri/portal/support/featureCollectionUtils":717,"esri/portal/support/layersCreator":718},r=this||window,n=r.webpackJsonp=r.webpackJsonp||[];n.registerAbsMids?n.registerAbsMids(e):(n.absMidsWaiting=n.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[24,126],{380:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(161)],void 0===(a=function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.layerLookupMap={BingMapsLayer:function(){return new Promise((function(e,r){n.e(131).then(function(){var r=[n(740)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},BuildingSceneLayer:function(){return new Promise((function(e,r){n.e(47).then(function(){var r=[n(741)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},CSVLayer:function(){return new Promise((function(e,r){Promise.all([n.e(1),n.e(110)]).then(function(){var r=[n(742)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},ElevationLayer:function(){return new Promise((function(e,r){Promise.resolve().then(function(){var r=[n(452)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},FeatureLayer:function(){return new Promise((function(e,r){Promise.all([n.e(1),n.e(32)]).then(function(){var r=[n(222)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},GroupLayer:function(){return new Promise((function(e,r){n.e(30).then(function(){var r=[n(506)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},GeoRSSLayer:function(){return new Promise((function(e,r){n.e(141).then(function(){var r=[n(743)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},ImageryLayer:function(){return new Promise((function(e,r){Promise.all([n.e(9),n.e(14),n.e(64),n.e(67)]).then(function(){var r=[n(460)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},ImageryTileLayer:function(){return new Promise((function(e,r){Promise.all([n.e(14),n.e(45)]).then(function(){var r=[n(744)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},IntegratedMeshLayer:function(){return new Promise((function(e,r){n.e(90).then(function(){var r=[n(745)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},KMLLayer:function(){return new Promise((function(e,r){n.e(111).then(function(){var r=[n(746)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},MapImageLayer:function(){return new Promise((function(e,r){n.e(23).then(function(){var r=[n(508)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},MapNotesLayer:function(){return new Promise((function(e,r){Promise.all([n.e(1),n.e(132)]).then(function(){var r=[n(747)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},OpenStreetMapLayer:function(){return new Promise((function(e,r){n.e(123).then(function(){var r=[n(748)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},PointCloudLayer:function(){return new Promise((function(e,r){n.e(43).then(function(){var r=[n(749)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},RouteLayer:function(){return new Promise((function(e,r){Promise.all([n.e(1),n.e(133)]).then(function(){var r=[n(750)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},SceneLayer:function(){return new Promise((function(e,r){Promise.all([n.e(1),n.e(21)]).then(function(){var r=[n(605)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},StreamLayer:function(){return new Promise((function(e,r){n.e(55).then(function(){var r=[n(751)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},TileLayer:function(){return new Promise((function(e,r){Promise.resolve().then(function(){var r=[n(325)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},UnknownLayer:function(){return new Promise((function(e,r){n.e(142).then(function(){var r=[n(752)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},UnsupportedLayer:function(){return new Promise((function(e,r){n.e(143).then(function(){var r=[n(753)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},VectorTileLayer:function(){return new Promise((function(e,r){Promise.resolve().then(function(){var r=[n(597)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},WebTileLayer:function(){return new Promise((function(e,r){n.e(134).then(function(){var r=[n(398)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},WMSLayer:function(){return new Promise((function(e,r){n.e(112).then(function(){var r=[n(754)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},WMTSLayer:function(){return new Promise((function(e,r){n.e(93).then(function(){var r=[n(755)];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))}}}.apply(null,t))||(e.exports=a)},387:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(117),n(226),n(153),n(264)],void 0===(a=function(e,r,n,t,a,i){Object.defineProperty(r,"__esModule",{value:!0}),r.loadStyleRenderer=function(e,r,o){return n.__awaiter(this,void 0,void 0,(function(){var u,c,s;return n.__generator(this,(function(n){switch(n.label){case 0:return(u=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin))&&"unique-value"===u.type&&u.styleOrigin?[4,t.result(u.populateFromStyle())]:[3,2];case 1:c=n.sent(),a.throwIfAborted(o),!1===c.ok&&(s=c.error,r&&r.messages&&r.messages.push(new i("renderer:style-reference","Failed to create unique value renderer from style reference: "+s.message,{error:s,context:r})),e.clear("renderer",r.origin)),n.label=2;case 2:return[2]}}))}))}}.apply(null,t))||(e.exports=a)},465:function(e,r,n){var t,a;t=[n.dj.c(e.i),r],void 0===(a=function(e,r){function n(e,r){return!!e.typeKeywords&&e.typeKeywords.indexOf(r)>-1}Object.defineProperty(r,"__esModule",{value:!0}),r.addTypeKeyword=function(e,r){if(!n(e,r)){var t=e.typeKeywords;t?t.push(r):e.typeKeywords=[r]}},r.hasTypeKeyword=n,r.removeTypeKeyword=function(e,r){var n=e.typeKeywords;if(n){var t=n.indexOf(r);t>-1&&n.splice(t,1)}}}.apply(null,t))||(e.exports=a)},557:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(117),n(165),n(154),n(153),n(380),n(283),n(465)],void 0===(a=function(e,r,n,t,a,i,o,u,c){function s(e){switch(e.type){case"Map Service":return function(e){return function(e){return p(e.url).then((function(e){return e.tileInfo}))}(e).then((function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}}))}(e);case"Feature Service":return function(e){return y(e).then((function(e){if("object"==typeof e){var r={};return null!=e.id&&(r.layerId=e.id),{className:"FeatureLayer",properties:r}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return n.__awaiter(this,void 0,void 0,(function(){var r;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,e.load()];case 1:return n.sent(),c.hasTypeKeyword(e,"Map Notes")?[2,{className:"MapNotesLayer"}]:c.hasTypeKeyword(e,"Route Layer")?[2,{className:"RouteLayer"}]:[4,e.fetchData()];case 2:return(r=n.sent())&&Array.isArray(r.layers)&&1===r.layers.length?[2,{className:"FeatureLayer"}]:[2,{className:"GroupLayer"}]}}))}))}(e);case"Scene Service":return function(e){return y(e).then((function(r){if("object"==typeof r){var n={},t=void 0;if(null!=r.id?(n.layerId=r.id,t=e.url+"/layers/"+r.id):t=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var a={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},i=0,o=Object.keys(a);i<o.length;i++){var u=o[i];if(-1!==e.typeKeywords.indexOf(u))return{className:a[u]}}return p(t).then((function(e){var r="SceneLayer",t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&t[e.layerType]&&(r=t[e.layerType]),{className:r,properties:n}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){var r,t,a;return n.__awaiter(this,void 0,void 0,(function(){var i,o,u,c;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,e.load()];case 1:return n.sent(),(i=null!==(t=null===(r=e.typeKeywords)||void 0===r?void 0:r.map((function(e){return e.toLowerCase()})))&&void 0!==t?t:[]).indexOf("elevation 3d layer")>-1?[2,{className:"ElevationLayer"}]:i.indexOf("tiled imagery")>-1?[2,{className:"ImageryTileLayer"}]:[4,e.fetchData()];case 2:return o=n.sent(),"ArcGISTiledImageServiceLayer"===(u=null==o?void 0:o.layerType)?[2,{className:"ImageryTileLayer"}]:"ArcGISImageServiceLayer"===u?[2,{className:"ImageryLayer"}]:[4,p(e.url)];case 3:return c=n.sent(),"map"===(null===(a=c.cacheType)||void 0===a?void 0:a.toLowerCase())?[2,{className:"ImageryTileLayer"}]:[2,{className:"ImageryLayer"}]}}))}))}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return i.reject(new a("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function l(e){return(0,o.layerLookupMap[e.className])().then((function(r){return{constructor:r,properties:e.properties}}))}function y(e){return!e.url||e.url.match(/\/\d+$/)?i.resolve({}):e.load().then((function(){return e.fetchData()})).then((function(r){return r&&Array.isArray(r.layers)?1===r.layers.length&&{id:r.layers[0].id}:p(e.url).then((function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}}))}))}function p(e){return t(e,{responseType:"json",query:{f:"json"}}).then((function(e){return e.data}))}Object.defineProperty(r,"__esModule",{value:!0}),r.fromItem=function(e){return!e.portalItem||e.portalItem instanceof u||(e=n.__assign(n.__assign({},e),{portalItem:new u(e.portalItem)})),(r=e.portalItem,r.load().then(s).then(l)).then((function(r){var t=n.__assign({portalItem:e.portalItem},r.properties),a=r.constructor;return i.resolve(new a(t))}));var r},r.selectLayerClassPath=s}.apply(null,t))||(e.exports=a)},717:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(117),n(283),n(465)],void 0===(a=function(e,r,n,t,a){function i(e,r,i,o){return n.__awaiter(this,void 0,void 0,(function(){var u;return n.__generator(this,(function(n){switch(n.label){case 0:return e.layerType&&"ArcGISFeatureLayer"===e.layerType?e.url?[2,!1]:e.featureCollectionType&&e.featureCollectionType===i?[2,!0]:e.itemId?[4,(u=new t({id:e.itemId,portal:r})).load()]:[3,2]:[2,!1];case 1:return n.sent(),[2,"Feature Collection"===u.type&&a.hasTypeKeyword(u,o)];case 2:return[2,!1]}}))}))}Object.defineProperty(r,"__esModule",{value:!0}),r.isMapNotesLayer=function(e,r){return i(e,r,"notes","Map Notes")},r.isRouteLayer=function(e,r){return i(e,r,"route","Route Layer")}}.apply(null,t))||(e.exports=a)},718:function(e,r,n){var t,a;t=[n.dj.c(e.i),r,n(117),n(169),n(164),n(153),n(380),n(283),n(717),n(557),n(387)],void 0===(a=function(e,r,n,t,a,i,o,u,c,s,l){Object.defineProperty(r,"__esModule",{value:!0});var y=a("esri-debug-messages"),p={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},d={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},L={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},f={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WFS:"UnsupportedLayer",SubtypeGroupLayer:"UnsupportedLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},h={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};function v(e,r,t){return n.__awaiter(this,void 0,void 0,(function(){var a;return n.__generator(this,(function(n){switch(n.label){case 0:return(a=new e).read(r,t.context),"group"===a.type&&g(r)?[4,I(a,r,t.context)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,l.loadStyleRenderer(a,t.context)];case 3:return n.sent(),[2,a]}}))}))}function m(e,r){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,S(e,r)];case 1:return[2,v(n.sent(),e,r)]}}))}))}function S(e,r){return n.__awaiter(this,void 0,void 0,(function(){var t,a,i,l,y,v,m,S,w;return n.__generator(this,(function(n){switch(n.label){case 0:return t=r.context,a=function(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=L;break;case"ground":r=d;break;default:r=p}break;default:switch(e.layerContainerType){case"basemap":r=h;break;default:r=f}}return r}(t),!(i=e.layerType||e.type)&&r&&r.defaultLayerType&&(i=r.defaultLayerType),l=a[i],y=l?o.layerLookupMap[l]:o.layerLookupMap.UnknownLayer,v=t&&t.portal,b(e)?e.itemId?[4,(m=new u({id:e.itemId,portal:v})).load()]:[3,3]:[3,4];case 1:return n.sent(),[4,s.selectLayerClassPath(m)];case 2:S=n.sent(),w=S.className||"UnknownLayer",y=o.layerLookupMap[w],n.label=3;case 3:return[3,8];case 4:return"ArcGISFeatureLayer"!==i?[3,8]:[4,c.isMapNotesLayer(e,v)];case 5:return n.sent()?(y=o.layerLookupMap.MapNotesLayer,[3,8]):[3,6];case 6:return[4,c.isRouteLayer(e,v)];case 7:n.sent()?y=o.layerLookupMap.RouteLayer:g(e)&&(y=o.layerLookupMap.GroupLayer),n.label=8;case 8:return e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier&&(y=o.layerLookupMap.WMTSLayer),[2,y()]}}))}))}function g(e){if("ArcGISFeatureLayer"!==e.layerType||b(e))return!1;var r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function b(e){return"Feature Collection"===e.type}function w(e,r,a){return n.__awaiter(this,void 0,void 0,(function(){var i,o,u;return n.__generator(this,(function(n){switch(n.label){case 0:return i=new t,o=M(i,Array.isArray(r.layers)?r.layers:[],a),[4,e];case 1:return u=n.sent(),[4,o];case 2:return n.sent(),"group"===u.type?(u.layers.addMany(i),[2,u]):[2,void 0]}}))}))}function I(e,r,t){return n.__awaiter(this,void 0,void 0,(function(){var a,i,u,c;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,(0,o.layerLookupMap.FeatureLayer)()];case 1:return a=n.sent(),i=r.featureCollection,u=i.showLegend,c=i.layers.map((function(e){var r=new a;return r.read(e,t),null!=u&&r.read({showLegend:u},t),r})),e.layers.addMany(c),[2]}}))}))}function M(e,r,t){return n.__awaiter(this,void 0,void 0,(function(){var a,o,u,c,s,l,p,d,L;return n.__generator(this,(function(n){switch(n.label){case 0:if(!r)return[2];for(a=[],o=0,u=r;o<u.length;o++)c=u[o],s=m(c,t),"GroupLayer"===c.layerType?a.push(w(s,c,t)):a.push(s);return[4,i.eachAlways(a)];case 1:for(l=n.sent(),p=0,d=l;p<d.length;p++)L=d[p],y&&L.error?console.error(L.error.toString?L.error.toString():L.error):!L.value||t.filter&&!t.filter(L.value)||e.add(L.value);return[2]}}))}))}r.createLayer=m,r.populateOperationalLayers=function(e,r,t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,M(e,r,t)]}))}))}}.apply(null,t))||(e.exports=a)}}]);
//# sourceMappingURL=24.js.map