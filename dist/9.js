(function(){var e={"esri/geometry/support/normalizeUtils":234,"esri/tasks/geometry/cut":279,"esri/tasks/geometry/simplify":280,"esri/tasks/operations/urlUtils":314,"esri/tasks/operations/pbfQueryUtils":328,"esri/tasks/operations/pbfFeatureServiceParser":329,"esri/tasks/operations/pbfDehydratedFeatureSet":330,"esri/tasks/operations/pbfOptimizedFeatureSet":331,"esri/tasks/operations/query":348,"esri/tasks/QueryTask":463,"esri/layers/support/AttachmentInfo":695,"esri/tasks/operations/queryAttachments":829,"esri/layers/support/exifUtils":989,"esri/tasks/operations/queryRelatedRecords":990},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{234:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(100),r(154),r(156),r(152),r(153),r(232),r(259),r(170),r(178),r(197),r(279),r(280)],void 0===(o=function(e,t,r,n,o,i,a,s,u,l,c,p,f,d,y){Object.defineProperty(t,"__esModule",{value:!0});var h=i.getLogger("esri.geometry.support.normalizeUtils"),g={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new l({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:c.WebMercator}),minus180Line:new l({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:c.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new l({paths:[[[180,-180],[180,180]]],spatialReference:c.WGS84}),minus180Line:new l({paths:[[[-180,-180],[-180,180]]],spatialReference:c.WGS84})}};function m(e){return"polygon"===e.type}function v(e){return m(e)?e.rings:e.paths}function b(e,t){return Math.ceil((e-t)/(2*t))}function _(e,t){for(var r=0,n=v(e);r<n.length;r++)for(var o=0,i=n[r];o<i.length;o++)i[o][0]+=t;return e}function x(e){for(var t=[],r=0,n=0,o=0;o<e.length;o++){for(var i=e[o],a=null,s=0;s<i.length;s++)a=i[s],t.push(a),0===s?n=r=a[0]:(r=Math.min(r,a[0]),n=Math.max(n,a[0]));a&&t.push([(r+n)/2,0])}return t}function S(e,t){if(!(e instanceof l||e instanceof u)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw h.error(r),new o(r)}for(var n=[],i=0,a=v(e);i<a.length;i++){var s=a[i],c=[];n.push(c),c.push([s[0][0],s[0][1]]);for(var p=0;p<s.length-1;p++){var f=s[p][0],d=s[p][1],y=s[p+1][0],g=s[p+1][1],b=Math.sqrt((y-f)*(y-f)+(g-d)*(g-d)),_=(g-d)/b,x=(y-f)/b,S=b/t;if(S>1){for(var k=1;k<=S-1;k++){var w=k*t,I=x*w+f,T=_*w+d;c.push([I,T])}var F=(b+Math.floor(S-1)*t)/2,R=x*F+f,P=_*F+d;c.push([R,P])}c.push([y,g])}}return m(e)?new u({rings:n,spatialReference:e.spatialReference}):new l({paths:n,spatialReference:e.spatialReference})}function k(e,t,r){if(t){var n=S(e,1e6);e=f.webMercatorToGeographic(n,!0)}return r&&(e=_(e,r)),e}function w(e,t,r){var n;if(Array.isArray(e))if((n=e[0])>t){var o=b(n,t);e[0]=n+o*(-2*t)}else n<r&&(o=b(n,r),e[0]=n+o*(-2*r));else(n=e.x)>t?(o=b(n,t),e=e.clone().offset(o*(-2*t),0)):n<r&&(o=b(n,r),e=e.clone().offset(o*(-2*r),0));return e}t.straightLineDensify=S,t.normalizeCentralMeridian=function e(t,o,i){return r.__awaiter(this,void 0,void 0,(function(){var c,h,m,x,S,I,T,F,R,P,j,O,M,q,C,N,A,G,J,E,L,D,Q,B,z,U,V,Z,W,X,Y,H,K,$,ee,te,re;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Array.isArray(t))return[2,e([t],o)];for(c=o?o.url:n.geometryServiceUrl,P=0,j=[],O=[],M=0,q=t;M<q.length;M++)C=q[M],a.isNone(C)?O.push(C):(h||(h=C.spatialReference,m=p.getInfo(h),x=h.isWebMercator,S=g[T=x?102100:4326].maxX,I=g[T].minX,F=g[T].plus180Line,R=g[T].minus180Line),m?"mesh"===C.type?O.push(C):"point"===C.type?O.push(w(C.clone(),S,I)):"multipoint"===C.type?((N=C.clone()).points=N.points.map((function(e){return w(e,S,I)})),O.push(N)):"extent"===C.type?(G=C.clone(),A=G._normalize(!1,!1,m),O.push(A.rings?new u(A):A)):C.extent?(G=C.extent,J=b(G.xmin,I),L=0==(E=J*(2*S))?C.clone():_(C.clone(),E),G.offset(E,0),G.intersects(F)&&G.xmax!==S?(P=G.xmax>P?G.xmax:P,L=k(L,x),j.push(L),O.push("cut")):G.intersects(R)&&G.xmin!==I?(P=G.xmax*(2*S)>P?G.xmax*(2*S):P,L=k(L,x,360),j.push(L),O.push("cut")):O.push(L)):O.push(C.clone()):O.push(C));for(D=b(P,S),Q=-90,B=D,z=new l;D>0;)U=360*D-180,z.addPath([[U,Q],[U,-1*Q]]),Q*=-1,D--;return j.length>0&&B>0?[4,d.cut(c,j,z,i)]:[3,3];case 1:for(V=r.sent(),Z=function(e,t){for(var r=-1,n=function(n){for(var o=t.cutIndexes[n],i=t.geometries[n],a=v(i),s=function(e){var t=a[e];t.some((function(r){if(r[0]<180)return!0;for(var n=0,o=0;o<t.length;o++){var a=t[o][0];n=a>n?a:n}for(var s=-360*b(n=Number(n.toFixed(9)),180),u=0;u<t.length;u++){var l=i.getPoint(e,u);i.setPoint(e,u,l.clone().offset(s,0))}return!0}))},u=0;u<a.length;u++)s(u);if(o===r){if("polygon"===e[0].type)for(var l=0,c=v(i);l<c.length;l++){var p=c[l];e[o]=e[o].addRing(p)}else if(function(e){return"polyline"===e[0].type}(e))for(var f=0,d=v(i);f<d.length;f++){var y=d[f];e[o]=e[o].addPath(y)}}else r=o,e[o]=i},o=0;o<t.cutIndexes.length;o++)n(o);return e}(j,V),W=[],X=[],ee=0;ee<O.length;ee++)"cut"!==(te=O[ee])?X.push(te):(re=Z.shift(),Y=t[ee],a.isSome(Y)&&"polygon"===Y.type&&Y.rings&&Y.rings.length>1&&re.rings.length>=Y.rings.length?(W.push(re),X.push("simplify")):X.push(x?f.geographicToWebMercator(re):re));return W.length?[4,y.simplify(c,W,i)]:[2,X];case 2:for(H=r.sent(),K=[],ee=0;ee<X.length;ee++)"simplify"!==(te=X[ee])?K.push(te):K.push(x?f.geographicToWebMercator(H.shift()):H.shift());return[2,K];case 3:for($=[],ee=0;ee<O.length;ee++)"cut"!==(te=O[ee])?$.push(te):(re=j.shift(),$.push(!0===x?f.geographicToWebMercator(re):re));return[2,s.resolve($)]}}))}))},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&p.getInfo(e.spatialReference);if(!n)return r;var o,i=n.valid,a=i[0],s=i[1],u=2*s,l=r.width,c=r.xmin,f=r.xmax;if(c=(t=[f,c])[0],f=t[1],"extent"===e.type||0===l||l<=s||l>u||c<a||f>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;o=x(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;o=x(e.paths);break;case"multipoint":o=e.points}for(var d=r.clone(),y=0;y<o.length;y++){var h=o[y][0];h<0?(h+=s,f=Math.max(h,f)):(h-=s,c=Math.min(h,c))}return d.xmin=c,d.xmax=f,d.width<l?(d.xmin-=s,d.xmax-=s,d):r},t.normalizeMapX=function(e,t){var r=p.getInfo(t);if(r){var n=r.valid,o=n[0],i=n[1],a=i-o;if(e<o)for(;e<o;)e+=a;if(e>i)for(;e>i;)e-=a}return e}}.apply(null,n))||(e.exports=o)},279:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(159),r(165),r(172),r(163)],void 0===(o=function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,s,u){return r.__awaiter(this,void 0,void 0,(function(){var l,c,p,f,d,y,h;return r.__generator(this,(function(g){switch(g.label){case 0:return l="string"==typeof e?i.urlToObject(e):e,c=t[0].spatialReference,p=r.__assign(r.__assign({},u),{query:r.__assign(r.__assign({},l.query),{f:"json",sr:JSON.stringify(c),target:JSON.stringify({geometryType:a.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(s)})}),[4,o(l.path+"/cut",p)];case 1:return f=g.sent(),d=f.data,y=d.cutIndexes,h=d.geometries,[2,{cutIndexes:y,geometries:(void 0===h?[]:h).map((function(e){return n.fromJSON(e).set(c)}))}]}}))}))}}.apply(null,n))||(e.exports=o)},280:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(165),r(172),r(163)],void 0===(o=function(e,t,r,n,o,i){function a(e){return{geometryType:i.getJsonType(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function s(e,t,r){var n=i.getGeometryType(t);return e.map((function(e){var t=n.fromJSON(e);return t.spatialReference=r,t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,u){return r.__awaiter(this,void 0,void 0,(function(){var l,c,p,f;return r.__generator(this,(function(d){switch(d.label){case 0:return l="string"==typeof e?o.urlToObject(e):e,c=t[0].spatialReference,p=i.getJsonType(t[0]),f=r.__assign(r.__assign({},u),{query:r.__assign(r.__assign({},l.query),{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c),geometries:JSON.stringify(a(t))})}),[4,n(l.path+"/simplify",f)];case 1:return[2,s(d.sent().data,p,c)]}}))}))}}.apply(null,n))||(e.exports=o)},314:function(e,t,r){var n,o;n=[r.dj.c(e.i),t],void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var n in t)if("declaredClass"!==n){var o=t[n];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){r[n]=[];for(var i=0;i<o.length;i++)r[n][i]=e(o[i])}else"object"==typeof o?o.toJSON&&(r[n]=JSON.stringify(o)):r[n]=o}return r}}.apply(null,n))||(e.exports=o)},328:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(329)],void 0===(o=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var n=r.parseFeatureQuery(e,t).queryResult.featureResult;if(n&&n.features&&n.features.length&&n.objectIdFieldName)for(var o=n.objectIdFieldName,i=0,a=n.features;i<a.length;i++){var s=a[i];s.attributes&&(s.objectId=s.attributes[o])}return n}}.apply(null,n))||(e.exports=o)},329:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(154),r(156),r(268),r(330),r(331)],void 0===(o=function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0});var s=n.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),u=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],c=["upperLeft","lowerLeft"];function p(e){return e>=u.length?null:u[e]}function f(e){return e>=c.length?null:c[e]}function d(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function y(e,t,r){for(var n=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var o=e.getUInt32(),i=e.pos()+o,a=0;e.pos()<i;)t.addCoordinatePoint(n,e.getSInt64(),0,a++);break;case 1:case 2:default:e.skip()}return n}function h(e,t,r){for(var n=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var i=e.getUInt32(),a=e.pos()+i,s=0;e.pos()<a;)t.addLength(n,e.getUInt32(),s++);break;case 3:for(var u=e.getUInt32(),l=(a=e.pos()+u,0),c=0;e.pos()<a;)t.addCoordinate(n,e.getSInt64(),c,l),++l===o&&(c++,l=0);break;case 1:default:e.skip()}return n}function g(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function m(e){for(var t,r={type:p(0)};e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.type=p(e.getEnum());break;case 3:r.alias=e.getString();break;case 4:r.sqlType=(t=e.getEnum())>=l.length?null:l[t];break;case 5:case 6:default:e.skip()}return r}function v(e,t,r,n){for(var o=t.createFeature(r),i=0;e.next();)switch(e.tag()){case 1:var a=n[i++].name;o.attributes[a]=e.processMessage(g);break;case 2:o.geometry=e.processMessageWithArgs(h,t,r);break;case 4:o.centroid=e.processMessageWithArgs(y,t,r);break;default:e.skip()}return o}function b(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function _(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function x(e){for(var t={originPosition:f(0)};e.next();)switch(e.tag()){case 1:t.originPosition=f(e.getEnum());break;case 2:t.scale=e.processMessage(b);break;case 3:t.translate=e.processMessage(_);break;default:e.skip()}return t}function S(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function k(e,t){for(var r=t.createSpatialReference();e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return r}function w(e,t){var r=t.createFeatureResult();r.geometryType=d(t,0);for(var n=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(S);break;case 7:r.geometryType=d(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(k,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(x);break;case 9:var o=e.getBool();r.exceededTransferLimit=o;break;case 13:t.addField(r,e.processMessage(m));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(v,t,r,r.fields));break;case 2:case 6:default:e.skip()}return t.finishFeatureResult(r),r}function I(e,t){for(var r={};e.next();)switch(e.tag()){case 1:r.featureResult=e.processMessageWithArgs(w,t);break;default:e.skip()}return r}t.parseFeatureQuery=function(e,t){var n=function(e){return e&&"dehydrated"===e.type?new i.Context(e):new a.Context(e)}(t);try{for(var u=new o(new Uint8Array(e),new DataView(e)),l={};u.next();)switch(u.tag()){case 2:l.queryResult=u.processMessageWithArgs(I,n);break;default:u.skip()}return l}catch(e){var c=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return s.error(c),{queryResult:{featureResult:n.createFeatureResult()}}}}}.apply(null,n))||(e.exports=o)},330:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(174),r(177),r(170),r(207),r(194),r(248)],void 0===(o=function(e,t,r,n,o,i,a,s){function u(e,t){return t}function l(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:y)(e,t+n,1)}}function c(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:y)(e,t+n,1);case 2:return d(e,t,2)}}function p(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:y)(e,t+n,1);case 2:return d(e,t,3)}}function f(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:y)(e,t+n,1);case 2:return d(e,t,2);case 3:return d(e,t,3)}}function d(e,t,r){var n=e.translate,o=e.scale;return n[r]+t*o[r]}function y(e,t,r){var n=e.translate,o=e.scale;return n[r]-t*o[r]}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=u,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return e.prototype.createFeatureResult=function(){return new i.DehydratedFeatureSetClass},e.prototype.finishFeatureResult=function(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=s.getGeometryZScaler(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(var r=0,n=e.features;r<n.length;r++)t(n[r].geometry)}},e.prototype.createSpatialReference=function(){return new o},e.prototype.addField=function(e,t){e.fields.push(a.fromJSON(t));var r=e.fields.map((function(e){return e.name}));this.AttributesConstructor=function(){for(var e=0,t=r;e<t.length;e++)this[t[e]]=null}},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(var n in t.attributes){var o=t.attributes[n];"string"==typeof o&&o.length>r&&(t.attributes[n]="")}e.features.push(t)},e.prototype.prepareFeatures=function(e){var t=this;switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=function(e,r,n,o){return t.addCoordinatePoint(e,r,o)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"polygon":this.addCoordinate=function(e,r,n,o){return t.addCoordinatePolygon(e,r,o)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"polyline":this.addCoordinate=function(e,r,n,o){return t.addCoordinatePolyline(e,r,o)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"multipoint":this.addCoordinate=function(e,r,n,o){return t.addCoordinateMultipoint(e,r,o)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:n.neverReached(e.geometryType)}},e.prototype.createFeature=function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,new i.DehydratedFeatureClass(r.generateUID(),null,new this.AttributesConstructor)},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},e.prototype.addCoordinatePoint=function(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)},e.prototype.addCoordinatePolygon=function(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var n=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r){if(null===this.coordinateBuffer){var n=this.lengths.reduce((function(e,t){return e+t}),0);this.coordinateBuffer=new Float64Array(n*this.vertexDimension)}0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var o=this.transformPathLikeValue(t,r),i=e[e.length-1];0===r&&i.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=o},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?f:t?c:r?p:l},e}();t.Context=h}.apply(null,n))||(e.exports=o)},331:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(200),r(178),r(274),r(304),r(224)],void 0===(o=function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new i.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!n.equals(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var t=r.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference)/r.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==t)for(var o=0,i=e.features;o<i.length;o++){var a=i[o];if(a.geometry&&a.geometry.coords)for(var s=a.geometry.coords,u=2;u<s.length;u+=3)s[u]*=t}}},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new o.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new a.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new a.default},e}();t.Context=s}.apply(null,n))||(e.exports=o)},348:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(165),r(152),r(153),r(172),r(163),r(234),r(304),r(328),r(314),r(248),r(161)],void 0===(o=function(e,t,r,n,o,i,a,s,u,l,c,p,f){function d(e,t){var r=e.geometry,n=e.toJSON(),o=n;if(r&&(o.geometry=JSON.stringify(r),o.geometryType=s.getJsonType(r),o.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(o.objectIds=n.objectIds.join(",")),n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete o.outFields:-1!==n.outFields.indexOf("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?o.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.source&&(o.layer=JSON.stringify({source:n.source}),delete n.source),n.timeExtent){var i=n.timeExtent,a=i.start,u=i.end;null==a&&null==u||(o.time=a===u?a:(null==a?"null":a)+","+(null==u?"null":u)),delete n.timeExtent}return o}function y(e,t,i,s,l){void 0===s&&(s={});var c="string"==typeof e?a.urlToObject(e):e,f=t.geometry?[t.geometry]:[];return s.responseType="pbf"===i?"array-buffer":"json",u.normalizeCentralMeridian(f,null,s).then((function(e){var a=e&&e[0];o.isSome(a)&&((t=t.clone()).geometry=a);var u=p.mapParameters(r.__assign(r.__assign(r.__assign(r.__assign({},c.query),{f:i}),l),d(t,l)));return n(c.path+"/query",r.__assign(r.__assign({},s),{query:u}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.queryToQueryStringParameters=d,t.executeQuery=function(e,t,n,o){var i;return r.__awaiter(this,void 0,void 0,(function(){var a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(null===(i=t.timeExtent)||void 0===i?void 0:i.isEmpty)?(s={data:{features:[]}},[3,3]):[3,1];case 1:return[4,y(e,t,"json",o)];case 2:s=r.sent(),r.label=3;case 3:return a=s,f.applyFeatureSetZUnitScaling(t,n,a.data),[2,a]}}))}))},t.executeQueryPBF=function(e,t,r,n){var o;return(null===(o=t.timeExtent)||void 0===o?void 0:o.isEmpty)?i.resolve({data:new l.default}):y(e,t,"pbf",n).then((function(e){var t,n;return t=c.parsePBFFeatureQuery(e.data,r),(n=e).data=t,n}))},t.executeQueryForIds=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?i.resolve({data:{objectIds:[]}}):y(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?i.resolve({data:{count:0}}):y(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?i.resolve({data:{count:0,extent:null}}):y(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error("Layer does not support extent calculation.");if(t.hasOwnProperty("count"))throw new Error("Layer does not support extent calculation.");return e}))},t.runQuery=y}.apply(null,n))||(e.exports=o)},463:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(159),r(151),r(327),r(348),r(829),r(990),r(527),r(187),r(199),r(584)],void 0===(o=function(e,t,r,n,o,i,a,s,u,l,c,p,f){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.source=null,r.sourceSpatialReference=null,r}return r.__extends(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then((function(e){return c.fromJSON(e)}))},t.prototype.executeJSON=function(e,t){return a.executeQuery(this.parsedUrl,this._normalizeQuery(e),this.sourceSpatialReference,r.__assign(r.__assign({},this.requestOptions),t)).then((function(e){return e.data}))},t.prototype.executeForCount=function(e,t){return a.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),r.__assign(r.__assign({},this.requestOptions),t)).then((function(e){return e.data.count}))},t.prototype.executeForExtent=function(e,t){return a.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),r.__assign(r.__assign({},this.requestOptions),t)).then((function(e){return{count:e.data.count,extent:n.Extent.fromJSON(e.data.extent)}}))},t.prototype.executeForIds=function(e,t){return a.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),r.__assign(r.__assign({},this.requestOptions),t)).then((function(e){return e.data.objectIds}))},t.prototype.executeRelationshipQuery=function(e,t){return e=f.from(e),(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),u.executeRelationshipQuery(this.parsedUrl,e,r.__assign(r.__assign({},this.requestOptions),t)).then((function(e){var t=e.data,r={};return Object.keys(t).forEach((function(e){return r[e]=c.fromJSON(t[e])})),r}))},t.prototype.executeAttachmentQuery=function(e,t){var n=this;return s.executeAttachmentQuery(this.parsedUrl,l.from(e),r.__assign(r.__assign({},this.requestOptions),t)).then((function(e){return s.processAttachmentQueryResult(e.data.attachmentGroups,n.parsedUrl.path)}))},t.prototype._normalizeQuery=function(e){var t=p.from(e);return this.gdbVersion||this.source?(t===e?t.clone():t).set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):t},r.__decorate([o.property()],t.prototype,"gdbVersion",void 0),r.__decorate([o.property()],t.prototype,"source",void 0),r.__decorate([o.property()],t.prototype,"sourceSpatialReference",void 0),r.__decorate([o.subclass("esri.tasks.QueryTask")],t)}(i)}.apply(null,n))||(e.exports=o)},695:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(155),r(151),r(179),r(989)],void 0===(o=function(e,t,r,n,o,i,a){var s={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};return function(e){function t(t){var r=e.call(this,t)||this;return r.contentType=null,r.exifInfo=null,r.id=null,r.globalId=null,r.keywords=null,r.name=null,r.parentGlobalId=null,r.parentObjectId=null,r.size=null,r.url=null,r}var n;return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"orientationInfo",{get:function(){var e=this.exifInfo,t=a.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return s[t]||null},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})},r.__decorate([o.property({type:String})],t.prototype,"contentType",void 0),r.__decorate([o.property()],t.prototype,"exifInfo",void 0),r.__decorate([o.property({readOnly:!0,dependsOn:["exifInfo"]})],t.prototype,"orientationInfo",null),r.__decorate([o.property({type:i.Integer})],t.prototype,"id",void 0),r.__decorate([o.property({type:String})],t.prototype,"globalId",void 0),r.__decorate([o.property({type:String})],t.prototype,"keywords",void 0),r.__decorate([o.property({type:String})],t.prototype,"name",void 0),r.__decorate([o.property({json:{read:!1}})],t.prototype,"parentGlobalId",void 0),r.__decorate([o.property({json:{read:!1}})],t.prototype,"parentObjectId",void 0),r.__decorate([o.property({type:i.Integer})],t.prototype,"size",void 0),r.__decorate([o.property({json:{read:!1}})],t.prototype,"url",void 0),n=r.__decorate([o.subclass("esri.layers.support.AttachmentInfo")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=o)},829:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(165),r(172),r(695),r(314)],void 0===(o=function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t){for(var r={},n=0,a=e;n<a.length;n++)for(var s=a[n],u=s.parentObjectId,l=s.parentGlobalId,c=0,p=s.attachmentInfos;c<p.length;c++){var f=p[c],d=f.id,y=o.addProxy(o.addTokenParameter(t+"/"+u+"/attachments/"+d)),h=i.fromJSON(f);h.set({url:y,parentObjectId:u,parentGlobalId:l}),r[u]?r[u].push(h):r[u]=[h]}return r},t.executeAttachmentQuery=function(e,t,o){var i={query:a.mapParameters(r.__assign(r.__assign(r.__assign({},e.query),{f:"json"}),function(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}(t)))};return o&&(i=r.__assign(r.__assign({},o),i)),n(e.path+"/queryAttachments",i)}}.apply(null,n))||(e.exports=o)},989:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(180)],void 0===(o=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getExifValue=function(e){var t=e.exifInfo,n=e.exifName,o=e.tagName;if(!t||!n||!o)return null;var i=r.find(t,(function(e){return e.name===n}));return i?function(e){var t=e.tagName,n=e.tags;if(!n||!t)return null;var o=r.find(n,(function(e){return e.name===t}));return o&&o.value||null}({tagName:o,tags:i.tags}):null}}.apply(null,n))||(e.exports=o)},990:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r(117),r(165),r(314)],void 0===(o=function(e,t,r,n,o){function i(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=i,t.executeRelationshipQuery=function(e,t,a){var s={query:o.mapParameters(r.__assign(r.__assign(r.__assign({},e.query),{f:"json"}),i(t)))};return a&&(s=r.__assign(r.__assign({},a),s)),n(e.path+"/queryRelatedRecords",s).then((function(e){for(var t=e.data,r=t.geometryType,n=t.spatialReference,o={},i=0,a=t.relatedRecordGroups;i<a.length;i++){var s=a[i],u={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:n,hasZ:!!t.hasZ,hasM:!!t.hasM,features:s.relatedRecords};if(null!=s.objectId)o[s.objectId]=u;else for(var l in s)s.hasOwnProperty(l)&&"relatedRecords"!==l&&(o[s[l]]=u)}return e.data=o,e}))}}.apply(null,n))||(e.exports=o)}}]);
//# sourceMappingURL=9.js.map