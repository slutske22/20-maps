(function(){var e={"esri/views/layers/support/ClipArea":176,"esri/views/layers/support/ClipRect":209,"esri/widgets/Swipe":547,"esri/widgets/Swipe/SwipeViewModel":548,"esri/webmap/Bookmark":697,"esri/webdoc/support/Thumbnail":992,"esri/widgets/Bookmarks":993,"esri/widgets/Bookmarks/BookmarksViewModel":994},t=this||window,o=t.webpackJsonp=t.webpackJsonp||[];o.registerAbsMids?o.registerAbsMids(e):(o.absMidsWaiting=o.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{176:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(155),o(151)],void 0===(i=function(e,t,o,r,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),o.__decorate([i.subclass("esri.views.layers.support.ClipArea")],t)}(r.JSONSupport)}.apply(null,r))||(e.exports=i)},209:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(151),o(176)],void 0===(i=function(e,t,o,r,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var i;return o.__extends(t,e),i=t,t.prototype.clone=function(){return new i({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),o.__decorate([r.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),o.__decorate([r.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),o.__decorate([r.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),o.__decorate([r.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),o.__decorate([r.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),i=o.__decorate([r.subclass("esri.views.layers.support.ClipRect")],t)}(i)}.apply(null,r))||(e.exports=i)},547:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(270),o(151),o(575),o(188),o(183),o(548)],void 0===(i=function(e,t,o,r,i,n,a,s,d){var l="esri-swipe__container",p={handle:!0,divider:!0};return function(e){function t(t,o){var r=e.call(this,t,o)||this;return r.direction=null,r.disabled=!1,r.dragLabel=void 0,r.iconClass="esri-icon-up-down-arrows",r.label=void 0,r.leadingLayers=null,r.messages=null,r.position=null,r.trailingLayers=null,r.view=null,r.viewModel=new d,r._pointerOffset=null,r._container=null,r._onContainerPointerDown=r._onContainerPointerDown.bind(r),r._onContainerPointerMove=r._onContainerPointerMove.bind(r),r._onContainerPointerUp=r._onContainerPointerUp.bind(r),r}return o.__extends(t,e),Object.defineProperty(t.prototype,"visibleElements",{get:function(){return this._get("visibleElements")||p},set:function(e){this._set("visibleElements",o.__assign(o.__assign({},p),e))},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e,t=this.viewModel,o=t.state,r=t.direction,i="disabled"===o||this.disabled,n=((e={})["esri-disabled"]=i,e["esri-swipe--disabled"]=i,e["esri-swipe--vertical"]="vertical"===r,e["esri-swipe--horizontal"]="horizontal"===r,e);return s.tsx("div",{class:this.classes("esri-swipe","esri-widget",n)},"disabled"===o?null:this.renderContainer())},t.prototype.renderHandle=function(){var e,t=this.viewModel.direction,o=this.visibleElements,r=((e={})["esri-icon-drag-horizontal"]="vertical"===t,e["esri-icon-drag-vertical"]="horizontal"===t,e),i=this.classes("esri-swipe__handle",!o.handle&&"esri-swipe__handle--hidden");return s.tsx("div",{key:"handle",role:"presentation",class:i},s.tsx("span",{"aria-hidden":"true",class:this.classes("esri-swipe__handle-icon",r)}))},t.prototype.renderDivider=function(){var e=this.visibleElements;return e&&e.divider?s.tsx("div",{key:"divider",role:"presentation",class:"esri-swipe__divider"}):null},t.prototype.renderContent=function(){return[this.renderDivider(),this.renderHandle()]},t.prototype.renderContainer=function(){var e=this.disabled,t=this.dragLabel,o=this.viewModel,r=o.max,i=o.min,n=o.direction,a=o.position,d=a+"%",p={top:"vertical"===n?d:null,left:"vertical"===n?null:d},u=this.renderContent();return e?s.tsx("div",{key:"container",role:"presentation",styles:p,class:l},u):s.tsx("div",{tabIndex:0,key:"container",bind:this,afterCreate:this._afterContainerCreate,onkeydown:this._onContainerKeyDown,"touch-action":"none",role:"slider",title:t,"aria-label":t,"aria-orientation":n,"aria-valuemax":""+r,"aria-valuemin":""+i,"aria-valuenow":""+a,"aria-valuetext":d,styles:p,class:l},u)},t.prototype._afterContainerCreate=function(e){n.applyLocal(e),this._container=e,e.addEventListener("pointerdown",this._onContainerPointerDown)},t.prototype._calculatePointerOffset=function(e){var t=this.direction,o=e.target,r=("vertical"===t?o.clientHeight:o.clientWidth)/2,i=o.getBoundingClientRect(),n=e.clientX-i.left,a=e.clientY-i.top;this._pointerOffset="vertical"===t?a-r:n-r},t.prototype._onContainerPointerDown=function(e){e.preventDefault(),this._container&&document.activeElement!==this.container&&this._container.focus(),this._calculatePointerOffset(e),document.addEventListener("pointerup",this._onContainerPointerUp),document.addEventListener("pointermove",this._onContainerPointerMove)},t.prototype._onContainerPointerUp=function(e){e.preventDefault(),document.removeEventListener("pointerup",this._onContainerPointerUp),document.removeEventListener("pointermove",this._onContainerPointerMove)},t.prototype._onContainerPointerMove=function(e){e.preventDefault();var t=this._pointerOffset,o=this.container,r=this.direction,i=e.clientX,n=e.clientY,a=o.getBoundingClientRect(),s=a.top,d=a.left,l=a.width,p=a.height,u=("vertical"===r?n-s-t:i-d-t)/("vertical"===r?p:l)*100;this.position=u},t.prototype._getKeyPosition=function(e){var t=r.eventKey(e),o=this.position,i=this.viewModel,n=i.max,a=i.min,s=i.step,d=i.stepMultiplier,l=i.direction,p=s*d;return["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(t)>-1&&(e.preventDefault(),e.stopPropagation()),("vertical"===l?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t)?o+(e.shiftKey?p:s):("vertical"===l?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t)?o-(e.shiftKey?p:s):"Home"===t?a:"End"===t?n:("vertical"===l?"PageDown"===t:"PageUp"===t)?o+p:("vertical"===l?"PageUp"===t:"PageDown"===t)?o-p:null},t.prototype._onContainerKeyDown=function(e){var t=this._getKeyPosition(e);"number"==typeof t&&(this.position=t)},o.__decorate([i.aliasOf("viewModel.direction")],t.prototype,"direction",void 0),o.__decorate([i.property(),s.renderable()],t.prototype,"disabled",void 0),o.__decorate([i.property({aliasOf:{source:"messages.dragLabel",overridable:!0}}),s.renderable()],t.prototype,"dragLabel",void 0),o.__decorate([i.property()],t.prototype,"iconClass",void 0),o.__decorate([i.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),o.__decorate([i.aliasOf("viewModel.leadingLayers")],t.prototype,"leadingLayers",void 0),o.__decorate([i.property(),s.renderable(),s.messageBundle("esri/widgets/Swipe/t9n/Swipe")],t.prototype,"messages",void 0),o.__decorate([i.aliasOf("viewModel.position")],t.prototype,"position",void 0),o.__decorate([i.aliasOf("viewModel.trailingLayers")],t.prototype,"trailingLayers",void 0),o.__decorate([i.aliasOf("viewModel.view"),s.renderable()],t.prototype,"view",void 0),o.__decorate([i.property({type:d}),s.renderable(["viewModel.state","viewModel.position","viewModel.direction"])],t.prototype,"viewModel",void 0),o.__decorate([i.property(),s.renderable()],t.prototype,"visibleElements",null),o.__decorate([i.subclass("esri.widgets.Swipe")],t)}(a)}.apply(null,r))||(e.exports=i)},548:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(158),o(169),o(177),o(167),o(157),o(151),o(208),o(209)],void 0===(i=function(e,t,o,r,i,n,a,s,d,l,p){var u=i.ofType(l),c={left:0,right:0,top:0,bottom:0};return function(e){function t(t){var o=e.call(this,t)||this;return o._handles=new a,o._leadingClips=new Map,o._trailingClips=new Map,o.direction="horizontal",o.leadingLayers=new u,o.max=100,o.min=0,o.precision=4,o.step=.5,o.stepMultiplier=10,o.trailingLayers=new u,o.view=null,o}return o.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([s.init(this,["view","view.ready","position","direction"],(function(){return e._clipLayers()})),s.on(this,"leadingLayers","change",(function(){return e._clipLeadingLayers()})),s.on(this,"trailingLayers","change",(function(){return e._clipTrailingLayers()}))])},t.prototype.destroy=function(){this._removeExistingClips(),this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"position",{get:function(){return 25},set:function(e){var t=this.precision,o=this.min,r=this.max;this._set("position",function(e,t){var o=Math.pow(10,t);return Math.round(e*o)/o}(Math.max(Math.min(e,r),o),t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var e=this.view;return e&&e.ready?"ready":"disabled"},enumerable:!0,configurable:!0}),t.prototype._clipLayers=function(){this._clipLeadingLayers(),this._clipTrailingLayers()},t.prototype._clipLeadingLayers=function(){var e=this;this._removeClips("leading"),this.leadingLayers.forEach((function(t){return e._clipLayer({layer:t,type:"leading"})}))},t.prototype._clipTrailingLayers=function(){var e=this;this._removeClips("trailing"),this.trailingLayers.forEach((function(t){return e._clipLayer({layer:t,type:"trailing"})}))},t.prototype._getLayerView=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,r;return o.__generator(this,(function(o){switch(o.label){case 0:return t=this.view,e&&t?[4,n.typeCast(t)().whenLayerView(e)]:[2,null];case 1:return"clips"in(r=o.sent())?[2,r]:[2,null]}}))}))},t.prototype._getVerticalClipRect=function(e){var t=this.position;return"leading"===e?new p(o.__assign(o.__assign({},c),{bottom:100-t+"%"})):"trailing"===e?new p(o.__assign(o.__assign({},c),{top:t+"%"})):null},t.prototype._getHorizontalClipRect=function(e){var t=this.position;return"leading"===e?new p(o.__assign(o.__assign({},c),{right:100-t+"%"})):"trailing"===e?new p(o.__assign(o.__assign({},c),{left:t+"%"})):null},t.prototype._getClipRect=function(e){var t=this.direction;return"vertical"===t?this._getVerticalClipRect(e):"horizontal"===t?this._getHorizontalClipRect(e):null},t.prototype._clipLayer=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,r,i,n,a,s,d,l,p;return o.__generator(this,(function(o){switch(o.label){case 0:return r=(t=this)._leadingClips,i=t._trailingClips,n=e.layer,a=e.type,s="trailing"===a?i:"leading"===a?r:null,[4,this._getLayerView(n)];case 1:return(d=o.sent())&&"clips"in d&&s&&d.hasOwnProperty("clips")?((l=s.get(d))&&d.clips.remove(l),(p=this._getClipRect(a))&&(s.set(d,p),d.clips.add(p)),[2]):[2]}}))}))},t.prototype._removeClips=function(e){var t=this._leadingClips,o=this._trailingClips,r="trailing"===e?o:"leading"===e?t:null;r&&(r.forEach((function(e,t){t&&t.hasOwnProperty("clips")&&t.clips.remove(e)})),r.clear())},t.prototype._removeExistingClips=function(){this._removeClips("leading"),this._removeClips("trailing")},o.__decorate([d.property()],t.prototype,"direction",void 0),o.__decorate([d.property({type:u})],t.prototype,"leadingLayers",void 0),o.__decorate([d.property({readOnly:!0})],t.prototype,"max",void 0),o.__decorate([d.property({readOnly:!0})],t.prototype,"min",void 0),o.__decorate([d.property()],t.prototype,"position",null),o.__decorate([d.property()],t.prototype,"precision",void 0),o.__decorate([d.property({dependsOn:["view.ready"],readOnly:!0})],t.prototype,"state",null),o.__decorate([d.property()],t.prototype,"step",void 0),o.__decorate([d.property()],t.prototype,"stepMultiplier",void 0),o.__decorate([d.property({type:u})],t.prototype,"trailingLayers",void 0),o.__decorate([d.property()],t.prototype,"view",void 0),o.__decorate([d.subclass("esri.widgets.Swipe.SwipeViewModel")],t)}(r)}.apply(null,r))||(e.exports=i)},697:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(292),o(155),o(118),o(151),o(179),o(184),o(992)],void 0===(i=function(e,t,o,r,i,n,a,s,d,l){return function(e){function t(t){var o=e.call(this,t)||this;return o.extent=null,o.name=null,o.thumbnail=new l.default,o}var r;return o.__extends(t,e),r=t,t.prototype.castThumbnail=function(e){return"string"==typeof e?new l.default({url:e}):s.ensureType(l.default,e)},t.prototype.clone=function(){return new r(n.clone({extent:this.extent,name:this.name,thumbnail:this.thumbnail}))},o.__decorate([a.property({type:d,nonNullable:!0,json:{write:{isRequired:!0}}})],t.prototype,"extent",void 0),o.__decorate([a.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],t.prototype,"name",void 0),o.__decorate([a.property({type:l.default,json:{write:{overridePolicy:function(e){return{enabled:!(!e||!e.url)}}}}})],t.prototype,"thumbnail",void 0),o.__decorate([a.cast("thumbnail")],t.prototype,"castThumbnail",null),r=o.__decorate([a.subclass("esri.webmap.Bookmark")],t)}(r.IdentifiableMixin(i.JSONSupport))}.apply(null,r))||(e.exports=i)},992:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(155),o(151)],void 0===(i=function(e,t,o,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="",t}var r;return o.__extends(t,e),r=t,t.prototype.destroy=function(){this.url=""},t.prototype.clone=function(){return new r({url:this.url})},o.__decorate([i.property({type:String,json:{write:{isRequired:!0}}})],t.prototype,"url",void 0),r=o.__decorate([i.subclass("esri.webdoc.support.Thumbnail")],t)}(r.JSONSupport);t.default=n}.apply(null,r))||(e.exports=i)},993:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(270),o(167),o(157),o(151),o(456),o(188),o(994),o(183)],void 0===(i=function(e,t,o,r,i,n,a,s,d,l,p){var u="esri-bookmarks_bookmark-drag-handle",c="esri-bookmarks__authoring-card",_="esri-bookmarks__authoring-form",k="esri-bookmarks__authoring-label",h="esri-bookmarks__authoring-actions",m="esri-bookmarks__authoring-input--invalid",v="esri-button",y="esri-button--tertiary",b="esri-input",f="esri-icon-bookmark",g={addBookmark:!0,thumbnail:!0};return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._handles=new i,n._addInputNode=null,n._editInputNode=null,n._addBookmarkButtonNode=null,n._focusAddBookmarkButton=!1,n._focusEditInputBox=!1,n._focusAddInputBox=!1,n._addBookmark=!1,n._editBookmark=null,n._invalidEntry=!1,n._creatingBookmark=!1,n._sortable=null,n._sortableNode=null,n._focusSortUid=null,n._selectedSortUid=null,n._sortableSavedItems=null,n.bookmarkCreationOptions=null,n.bookmarks=null,n.disabled=!1,n.editingEnabled=!1,n.goToOverride=null,n.iconClass=f,n.label=void 0,n.messages=null,n.messagesCommon=null,n.view=null,n.viewModel=new l,n.visibleElements=o.__assign({},g),n}return o.__extends(t,e),t.prototype.initialize=function(){var e=this;this.own([n.init(this,"viewModel.bookmarks",(function(){return e._bookmarksInitialized()})),n.init(this,"editingEnabled",(function(){return e._toggleSorting()}))])},t.prototype.destroy=function(){this._destroySortable(),this._handles.destroy(),this._handles=null},t.prototype.castVisibleElements=function(e){return o.__assign(o.__assign({},g),e)},t.prototype.endAddBookmark=function(){this._invalidEntry=!1,this._addBookmark=!1,this._creatingBookmark=!1,this.scheduleRender()},t.prototype.goTo=function(e){return this.viewModel.goTo(e)},t.prototype.render=function(){var e,t="loading"===this.viewModel.state?this.renderLoading():this.renderBookmarks();return p.tsx("div",{class:this.classes("esri-bookmarks esri-widget--panel","esri-widget",(e={},e["esri-widget--disabled"]=this.disabled,e))},t)},t.prototype.startAddBookmark=function(){this._editBookmark=null,this._addBookmark=!0,this._focusAddInputBox=!0,this.scheduleRender()},t.prototype.renderLoading=function(){return p.tsx("div",{class:"esri-bookmarks__loader-container",key:"loader"},p.tsx("div",{class:"esri-bookmarks__loader"}))},t.prototype.renderNoBookmarksContainer=function(){var e=this.messages;return p.tsx("div",{class:"esri-widget__content--empty",key:"no-bookmarks"},p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-widget__no-bookmark-icon",f)}),p.tsx("h1",{class:this.classes("esri-widget__heading","esri-bookmarks__no-bookmarks-heading")},e.noBookmarksHeading),p.tsx("p",{class:"esri-bookmarks__no-bookmarks-description"},e.noBookmarksDescription))},t.prototype.renderAddBookmarkLoading=function(){return p.tsx("div",{key:"adding-bookmark",class:"esri-bookmarks__adding-bookmark"},p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon-loading-indicator","esri-rotating")}),this.messages.addingBookmark)},t.prototype.renderBookmarkItems=function(e){var t=this;return e?e.map((function(e){return t.editingEnabled&&t._editBookmark&&e&&t._editBookmark===e?t.renderEditingBookmark(e):t.renderBookmark(e)})).toArray():null},t.prototype.renderBookmarksContainer=function(e){var t,o=this.editingEnabled&&!this._addBookmark?this.renderAddBookmarkButton():null,r=this.editingEnabled?this._creatingBookmark?this.renderAddBookmarkLoading():this._addBookmark?this.renderAddingBookmark():null:null;return[p.tsx("ul",{key:"bookmark-list","aria-label":this.messages.widgetLabel,class:this.classes("esri-bookmarks__list",(t={},t["esri-bookmarks__list--sortable"]=this.editingEnabled,t)),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(e)),o,r]},t.prototype.renderAddBookmarkButton=function(){return this.visibleElements.addBookmark?p.tsx("div",{key:"add-bookmark-item",class:"esri-bookmarks__add-bookmark"},p.tsx("button",{class:this.classes(v,y,"esri-bookmarks__add-bookmark-button"),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this},p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks__add-bookmark-icon","esri-icon-plus")}),this.messages.addBookmark)):null},t.prototype.renderBookmarks=function(){var e=this.viewModel.bookmarks,t=e&&e.filter(Boolean),o=t&&t.length,r=o||this.editingEnabled?this.renderBookmarksContainer(t):null;return[o?null:this.renderNoBookmarksContainer(),r]},t.prototype.renderEditContainer=function(e){var t=this.messagesCommon;return p.tsx("div",{key:"edit-container"},p.tsx("button",{title:t.edit,"aria-label":t.edit,"data-bookmark":e,onclick:this._showEditBookmarkForm,bind:this,class:"esri-bookmarks__bookmark-edit-button"},p.tsx("span",{"aria-hidden":"true",class:"esri-icon-edit"})))},t.prototype.renderDragHandle=function(e){var t,r=this.messagesCommon,i=((t={})["data-bookmark-uid"]=e.uid,t);return p.tsx("div",o.__assign({role:"button",tabIndex:0,key:"drag-handle",bind:this,class:u,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===e.uid?"true":"false","aria-label":r.dragHandleLabel,title:r.dragHandleTitle},i),p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks_bookmark-drag-handle-icon","esri-icon-handle-vertical")}))},t.prototype.renderBookmarkImage=function(e){var t=this.visibleElements,o=e.thumbnail,r=o&&o.url||"";return t.thumbnail&&r?p.tsx("img",{src:r,alt:"",class:"esri-bookmarks__image"}):p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks__bookmark-icon",f)})},t.prototype.renderBookmarkButton=function(e){var t=this.messagesCommon,o=e.name||t.untitled,r=p.tsx("div",{class:"esri-bookmarks__bookmark-image-container"},this.renderBookmarkImage(e));return p.tsx("button",{key:"bookmark-button",class:"esri-bookmarks__bookmark-button",bind:this,"data-bookmark":e,onclick:this._goToBookmark},r,p.tsx("span",{class:"esri-bookmarks__bookmark-name"},o))},t.prototype.renderBookmark=function(e){var t,r,i=this.viewModel.activeBookmark,n=((t={})["esri-bookmarks__bookmark--active"]=i===e,t),a=this.editingEnabled?this.renderEditContainer(e):null,s=((r={})["data-bookmark-uid"]=e.uid,r),d=this.editingEnabled?this.renderDragHandle(e):null;return p.tsx("li",o.__assign({key:e,class:this.classes("esri-bookmarks__bookmark",n)},s),d,this.renderBookmarkButton(e),a)},t.prototype.renderEditingBookmarkName=function(e){var t=this.messages;return p.tsx("label",{class:k},t.title,p.tsx("input",{required:!0,bind:this,class:this.classes(b,this._invalidEntry?m:null),type:"text",value:e.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":e,"data-node-ref":"_editInputNode",placeholder:t.addPlaceholder}))},t.prototype.renderEditingBookmarkActions=function(e){var t=this.messagesCommon;return p.tsx("div",{class:h},p.tsx("input",{type:"button",value:t.delete,class:this.classes(v,y,"esri-bookmarks__authoring-delete-button"),"data-bookmark":e,onclick:this._deleteBookmark,bind:this}),p.tsx("input",{type:"button",value:t.cancel,class:this.classes(v,y),onclick:this._closeEditBookmarkForm,bind:this}),p.tsx("input",{class:v,type:"submit",value:t.save}))},t.prototype.renderEditingBookmark=function(e){var t,r=((t={})["data-bookmark-uid"]=e.uid,t);return p.tsx("li",o.__assign({key:"edit-bookmark-form",class:c},r),p.tsx("form",{class:_,onsubmit:this._editBookmarkSubmit,bind:this},this.renderEditingBookmarkName(e),this.renderEditingBookmarkActions(e)))},t.prototype.renderAddingBookmarkName=function(){var e=this.messages;return p.tsx("label",{class:k},e.title,p.tsx("input",{required:!0,bind:this,class:this.classes(b,this._invalidEntry?m:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:e.addPlaceholder}))},t.prototype.renderAddingBookmarkActions=function(){var e=this.messagesCommon;return p.tsx("div",{class:this.classes(h)},p.tsx("input",{type:"button",value:e.cancel,class:this.classes(v,y,"esri-bookmarks__authoring-cancel-button"),onclick:this._endAddBookmark.bind(this),bind:this}),p.tsx("input",{class:v,type:"submit",value:e.add}))},t.prototype.renderAddingBookmark=function(){return p.tsx("div",{key:"add-bookmark-form",class:c},p.tsx("form",{class:_,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))},t.prototype._dragHandleBlur=function(){this._selectedSortUid=null,this.scheduleRender()},t.prototype._dragHandleKeydown=function(e){e.stopPropagation();var t=this._sortableSavedItems,o=r.eventKey(e);if(-1!==["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(o)){var i=this._sortable,n=this._selectedSortUid,a=i.toArray(),s=e.target.getAttribute("data-bookmark-uid"),d=a.indexOf(s);if(" "===o||"Enter"===o){var l=n&&n===s;return this._selectedSortUid=l?null:s,this._sortableSavedItems=l?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===o)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===o&&t)return this._selectedSortUid=null,this._updateSortItems(t,i,s),void this.scheduleRender();if(-1!==d&&n){var p,u,c,_="ArrowUp"===o?d-1:d+1;_>=a.length||_<=-1||(u=d,c=_,(p=a).splice(c,0,p.splice(u,1)[0]),this._updateSortItems(a,i,s))}}},t.prototype._updateSortItems=function(e,t,o){t.sort(e),this._sortBookmarks(t),this._focusSortUid=o,this._selectedSortUid=o},t.prototype._focusDragHandle=function(e){var t=this._focusSortUid;e&&t&&e.getAttribute("data-bookmark-uid")===t&&(e.focus(),this._focusSortUid=null)},t.prototype._toggleSorting=function(){var e=this,t=this._sortable,o=this._sortableNode,r=this.editingEnabled;if(o)if(t)t.option("disabled",!r);else{var i=s.create(o,{dataIdAttr:"data-bookmark-uid",handle:"."+u,group:"bookmarks",disabled:!r,onSort:function(){return e._sortBookmarks(i)}});this._sortable=i}},t.prototype._sortNodeCreated=function(e){this._sortableNode=e,this._toggleSorting()},t.prototype._sortBookmarks=function(e){var t=this.viewModel.bookmarks;if(t){var o=e.toArray();t.sort((function(e,t){var r=o.indexOf(e.uid),i=o.indexOf(t.uid);return r>i?1:r<i?-1:0}))}},t.prototype._destroySortable=function(){var e=this._sortable;e&&e.destroy(),this._sortable=null},t.prototype._endAddBookmark=function(){this._focusAddBookmarkButton=!0,this.endAddBookmark()},t.prototype._bookmarksInitialized=function(){var e=this,t=this._handles;t.remove("bookmarks-init"),t.add(n.on(this,"viewModel.bookmarks","change",(function(){return e._bookmarksChanged()})),"bookmarks-init")},t.prototype._bookmarksChanged=function(){var e=this,t=this.viewModel.bookmarks,o=this._handles;o.remove("bookmarks-change");var r=t.map((function(t){return n.watch(t,["active","name","thumbnail.url"],(function(){return e.scheduleRender()}))}));o.add(r,"bookmarks-change"),this.scheduleRender()},t.prototype._showEditBookmarkForm=function(e){var t=e.currentTarget["data-bookmark"];this._addBookmark=!1,this._focusEditInputBox=!0,this._editBookmark=t,this.scheduleRender()},t.prototype._closeEditBookmarkForm=function(){this._invalidEntry=!1,this._editBookmark=null,this.scheduleRender()},t.prototype._addBookmarkSubmit=function(e){var t=this;e.preventDefault();var o=this._addInputNode,r=this.bookmarkCreationOptions,i=o&&o.value.trim();if(!i)return this._invalidEntry=!0,void this.scheduleRender();this._creatingBookmark=!0,this.scheduleRender(),this.viewModel.createBookmark(r).then((function(e){e.name=i,t.viewModel.bookmarks.add(e),t._endAddBookmark()}))},t.prototype._editBookmarkSubmit=function(e){e.preventDefault();var t=this._editInputNode,o=this._editBookmark,r=t&&t.value.trim();if(!r)return this._invalidEntry=!0,void this.scheduleRender();o.name=r,this._closeEditBookmarkForm()},t.prototype._storeAddBookmarkButton=function(e){this._addBookmarkButtonNode=e,this._focusAddBookmark()},t.prototype._storeEditInput=function(e){this._editInputNode=e,this._focusEditInput()},t.prototype._storeAddInput=function(e){this._addInputNode=e,this._focusAddInput()},t.prototype._focusAddInput=function(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())},t.prototype._focusAddBookmark=function(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())},t.prototype._focusEditInput=function(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())},t.prototype._deleteBookmark=function(e){var t=e.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(t)},t.prototype._goToBookmark=function(e){var t=e.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(t)},o.__decorate([a.property()],t.prototype,"bookmarkCreationOptions",void 0),o.__decorate([a.aliasOf("viewModel.bookmarks")],t.prototype,"bookmarks",void 0),o.__decorate([p.renderable(),a.property()],t.prototype,"disabled",void 0),o.__decorate([p.renderable(),a.property()],t.prototype,"editingEnabled",void 0),o.__decorate([a.aliasOf("viewModel.goToOverride")],t.prototype,"goToOverride",void 0),o.__decorate([a.property()],t.prototype,"iconClass",void 0),o.__decorate([a.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),o.__decorate([a.property(),p.renderable(),p.messageBundle("esri/widgets/Bookmarks/t9n/Bookmarks")],t.prototype,"messages",void 0),o.__decorate([a.property(),p.renderable(),p.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0),o.__decorate([a.aliasOf("viewModel.view")],t.prototype,"view",void 0),o.__decorate([a.property({type:l}),p.renderable(["activeBookmark","state","bookmarks"]),p.vmEvent(["select-bookmark"])],t.prototype,"viewModel",void 0),o.__decorate([a.property(),p.renderable()],t.prototype,"visibleElements",void 0),o.__decorate([a.cast("visibleElements")],t.prototype,"castVisibleElements",null),o.__decorate([a.property()],t.prototype,"endAddBookmark",null),o.__decorate([a.property()],t.prototype,"startAddBookmark",null),o.__decorate([a.subclass("esri.widgets.Bookmarks")],t)}(d)}.apply(null,r))||(e.exports=i)},994:function(e,t,o){var r,i;r=[o.dj.c(e.i),t,o(117),o(169),o(154),o(190),o(156),o(153),o(151),o(697),o(791)],void 0===(i=function(e,t,o,r,i,n,a,s,d,l,p){var u="esri.widgets.Bookmarks.BookmarksViewModel",c=a.getLogger(u),_=r.ofType(l),k={width:128,height:128},h={takeScreenshot:!0,captureExtent:!0};return function(e){function t(t){var o=e.call(this,t)||this;return o.activeBookmark=null,o}return o.__extends(t,e),t.prototype.destroy=function(){this.view=null,this._set("activeBookmark",null)},Object.defineProperty(t.prototype,"bookmarks",{get:function(){return this.get("view.map.bookmarks")},set:function(e){void 0!==e?this._override("bookmarks",e):this._clearOverride("bookmarks")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var e=this.get("view");return e&&!e.ready?"loading":"ready"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._get("view")},set:function(e){e&&"2d"!==e.type&&c.error(new i("view:invalid-view","SceneView is not supported",{view:e})),this._set("view",e)},enumerable:!0,configurable:!0}),t.prototype.createBookmark=function(e){var t=this.view,r=o.__assign(o.__assign({},h),e),n=r.takeScreenshot,a=r.screenshotSettings,d=r.captureExtent;if(n&&!t){var p=new i("create-bookmark:invalid-view","Cannot create a bookmark without a view.",{view:t});return c.error(p),s.reject(p)}var u=n?t.takeScreenshot(o.__assign(o.__assign({},k),a)).then((function(e){return e.dataUrl})):s.resolve(),_=d?t.extent.clone():void 0;return u.then((function(e){return new l({extent:_,thumbnail:e})}))},t.prototype.goTo=function(e){var t=this,o=this.view;if(!o||!e||!e.extent){var r=new i("go-to:invalid-bookmark-or-view","Cannot go to a bookmark without a view and a bookmark containing an extent.",{bookmark:e,view:o});return c.error(r),s.reject(r)}this._set("activeBookmark",e);var n={target:{target:e.extent}},a=this.callGoTo(n);return this.emit("select-bookmark",{bookmark:e}),a.catch((function(){})).then((function(){return t._set("activeBookmark",null)})),a},o.__decorate([d.property({readOnly:!0})],t.prototype,"activeBookmark",void 0),o.__decorate([d.property({type:_,dependsOn:["view.map.bookmarks"]})],t.prototype,"bookmarks",null),o.__decorate([d.property({dependsOn:["view.ready"],readOnly:!0})],t.prototype,"state",null),o.__decorate([d.property({value:null})],t.prototype,"view",null),o.__decorate([d.subclass(u)],t)}(p.GoToMixin(n.EventedAccessor))}.apply(null,r))||(e.exports=i)}}]);
//# sourceMappingURL=89.js.map