(function(){var e={"esri/views/layers/support/ClipArea":176,"esri/tasks/support/FeatureSet":187,"esri/views/layers/support/ClipRect":209,"esri/views/2d/layers/LayerView2D":219,"esri/views/layers/support/Geometry":220,"esri/views/layers/support/Path":221,"esri/geometry/projection":291,"esri/widgets/Legend":300,"esri/geometry/pe":310,"esri/geometry/support/GeographicTransformation":311,"esri/geometry/support/GeographicTransformationStep":312,"esri/core/colorUtils":360,"esri/layers/support/ExportImageParameters":378,"esri/symbols/support/svgUtils":396,"esri/widgets/Legend/support/utils":397,"esri/symbols/support/previewUtils":501,"esri/symbols/support/renderUtils":502,"esri/symbols/support/previewSymbol3D":503,"esri/widgets/Legend/styles/support/utils":504,"esri/widgets/Legend/support/styleUtils":505,"esri/widgets/Swipe":547,"esri/widgets/Swipe/SwipeViewModel":548,"esri/views/2d/layers/BaseLayerView2D":669,"esri/views/2d/layers/support/Display":675,"esri/widgets/Legend/LegendViewModel":676,"esri/widgets/Legend/support/ActiveLayerInfo":677,"esri/symbols/support/symbolUtils":678,"esri/symbols/support/previewCIMSymbol":679,"esri/symbols/support/previewSymbol2D":680,"esri/symbols/support/previewWebStyleSymbol":681,"esri/widgets/Legend/support/clusterUtils":682,"esri/widgets/Legend/support/colorRampUtils":683,"esri/widgets/Legend/support/heatmapRampUtils":684,"esri/widgets/Legend/support/relationshipRampUtils":685,"esri/widgets/Legend/support/sizeRampUtils":686,"esri/widgets/Legend/styles/Card":687,"esri/widgets/Legend/styles/Classic":688},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[37,6,32,188],{176:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,n,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),r.__decorate([i.subclass("esri.views.layers.support.ClipArea")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},181:function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n)()(!0);i.push([e.i,".esri-scroll-zoom-toggle{padding:0.7em 1.5em}.esri-scroll-zoom-toggle--inner-wrapper{display:flex;flex-direction:row;align-items:center;cursor:pointer}.esri-scroll-zoom-toggle--input-checkbox{margin-left:1em;margin-bottom:6px;cursor:pointer}\n","",{version:3,sources:["webpack://src/components/mapcomponents/ScrollZoom.scss"],names:[],mappings:"AAAA,yBACC,mBAAoB,CACpB,wCAGA,YAAa,CACb,kBAAmB,CACnB,kBAAmB,CACnB,cAAe,CACf,yCAGA,eAAgB,CAChB,iBAAkB,CAClB,cAAe",sourcesContent:[".esri-scroll-zoom-toggle {\n\tpadding: 0.7em 1.5em;\n}\n\n.esri-scroll-zoom-toggle--inner-wrapper {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n.esri-scroll-zoom-toggle--input-checkbox {\n\tmargin-left: 1em;\n\tmargin-bottom: 6px;\n\tcursor: pointer;\n}\n"],sourceRoot:""}]),t.default=i},187:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(159),r(174),r(166),r(155),r(152),r(151),r(170),r(163),r(194)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c,u,p){var d=new a.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),h=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return r.__extends(t,e),t.prototype.readFeatures=function(e,t){for(var r=c.fromJSON(t.spatialReference),n=[],a=0;a<e.length;a++){var o=e[a],l=i.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;s.isSome(l.geometry)&&!u&&(l.geometry.spatialReference=r),n.push(l)}return n},t.prototype.writeGeometryType=function(e,t,r,n){if(e)d.write(e,t,r,n);else{var i=this.features;if(i)for(var a=0,o=i;a<o.length;a++){var l=o[a];if(l&&s.isSome(l.geometry))return void d.write(l.geometry.type,t,r,n)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r)for(var n=0,i=r;n<i.length;n++){var a=i[n];a&&s.isSome(a.geometry)&&a.geometry.spatialReference&&(t.spatialReference=a.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],i=e.translate,a=i[0],o=i[1],l=this.features,c=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((o-e)/n)})),u=0,p=l.length;u<p;u++)c(s.unwrap(l[u].geometry))||(l.splice(u,1),u--,p--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;for(var n=r.translate,i=n[0],a=n[1],o=r.scale,l=o[0],c=o[1],u=this._getHydrationFunction(e,(function(e){return e*l+i}),(function(e){return a-e*c})),p=0,d=t;p<d.length;p++){var h=d[p].geometry;s.isSome(h)&&u(h)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,i,a=[],o=0,s=e.length;o<s;o++){var l=e[o];if(o>0){var c=t(l[0]),u=r(l[1]);c===n&&u===i||(a.push([c-n,u-i]),n=c,i=u)}else n=t(l[0]),i=r(l[1]),a.push([n,i])}return a.length>0?a:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=u.isPolygon(e)?e.rings:e.paths,a=[],o=0,s=i.length;o<s;o++){var l=i[o],c=n._quantizePoints(l,t,r);c&&a.push(c)}return a.length>0?(u.isPolygon(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var i;return(i=n._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,a=u.isPolygon(e)?e.rings:e.paths,o=0,s=a.length;o<s;o++)for(var l=a[o],c=0,p=l.length;c<p;c++){var d=l[c];c>0?(n+=d[0],i+=d[1]):(n=d[0],i=d[1]),d[0]=t(n),d[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,a=e.points,o=0,s=a.length;o<s;o++){var l=a[o];o>0?(n+=l[0],i+=l[1]):(n=l[0],i=l[1]),l[0]=t(n),l[1]=r(i)}}:void 0},r.__decorate([l.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r.__decorate([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r.__decorate([l.property({type:[i],json:{write:!0}})],t.prototype,"features",void 0),r.__decorate([l.reader("features")],t.prototype,"readFeatures",null),r.__decorate([l.property({type:[p],json:{write:!0}})],t.prototype,"fields",void 0),r.__decorate([l.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],t.prototype,"geometryType",void 0),r.__decorate([l.writer("geometryType")],t.prototype,"writeGeometryType",null),r.__decorate([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r.__decorate([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r.__decorate([l.property({types:n.geometryTypes,json:{read:u.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r.__decorate([l.property({type:c,json:{write:!0}})],t.prototype,"spatialReference",void 0),r.__decorate([l.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r.__decorate([l.property({json:{write:!0}})],t.prototype,"transform",void 0),r.__decorate([l.subclass("esri.tasks.support.FeatureSet")],t)}(o.JSONSupport);return h.prototype.toJSON.isDefaultToJSON=!0,h||(h={}),h}.apply(null,n))||(e.exports=i)},209:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(151),r(176)],void 0===(i=function(e,t,r,n,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),r.__decorate([n.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),i=r.__decorate([n.subclass("esri.views.layers.support.ClipRect")],t)}(i)}.apply(null,n))||(e.exports=i)},212:function(e,t,r){var n=r(99),i=r(181);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=n(i,a);if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(181,(function(){"string"==typeof(i=(i=r(181)).__esModule?i.default:i)&&(i=[[e.i,i,""]]),function(e,t,r){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!r||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(r&&"default"===n||e[n]))return!1;return!0}(s,i.locals)?(s=i.locals,o(i)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),e.exports=i.locals||{}},213:function(e,t,r){"use strict";var n=r(2),i=r.n(n),a=r(3),o=r(108),s=r.n(o),l=r(6),c=r(5),u=r(284),p=r.n(u),d=r(275),h=r.n(d),y=r(266),f=r.n(y),m=r(287),v=r.n(m),_=r(278),g=r.n(_),b=r(157),w=r(188),L=r.n(w),S=r(151),x=r(183);r(212);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P,M,A,C=(P=function(e,t){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),I=function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},O="esri-widget esri-scroll-zoom-toggle",R="esri-scroll-zoom-toggle--inner-wrapper",T="esri-scroll-zoom-toggle--input-checkbox",k=function(e){function t(t){var r=e.call(this,t)||this;return r.enabled=!1,r._toggleZoomOnScroll=function(){r.enabled=!r.enabled,r.enabled?(r.view.navigation.mouseWheelZoomEnabled=!0,r.view.navigation.browserTouchPanEnabled=!0):(r.view.navigation.mouseWheelZoomEnabled=!1,r.view.navigation.browserTouchPanEnabled=!1)},r}return C(t,e),t.prototype.render=function(){return Object(x.tsx)("div",{class:O},Object(x.tsx)("div",{class:R,onclick:this._toggleZoomOnScroll},Object(x.tsx)("div",null,"Enable Scroll Zoom"),Object(x.tsx)("input",{type:"checkbox",class:T,checked:this.enabled})))},I([Object(S.property)(),Object(x.renderable)()],t.prototype,"enabled",void 0),t=I([Object(S.subclass)("esri.widgets.ScrollZoom")],t)}(L.a),N=function(){return(N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=function(e){var t=e.metadata,r=e.sources,a=e.customFeatures,o=e.customFeaturesPerPage,s=e.customMapDOM,l=e.pageRefs,u=e.currentPage,d=e.mapState,y=d.basemap,m=d.layers,_=d.position,w=d.customBehavior,L=Object(n.useRef)(null),S=Object(n.useState)(null),x=S[0],E=S[1],P=Object(n.useState)(!0),M=P[0],A=P[1],C=Object(n.useState)(null),I=C[0],O=C[1];return Object(n.useEffect)((function(){var e=new h.a({basemap:y||null,layers:m}),n=N(N({container:L.current,map:e},_),{navigation:{mouseWheelZoomEnabled:!1,browserTouchPanEnabled:!1}}),o=t.sceneview?new v.a(n):new f.a(n);(E({map:e,view:o}),t.fullWidthMap&&!t.sceneview)&&(document.querySelector("#"+t.name+" .esri-ui-top-left").style.left="calc(30% - 10px)");if(t.fullWidthMap&&t.sceneview){var s=document.querySelector("#"+t.name+' div[class^="SideCar"]');s.style.left="40px",s.style.width="500px",s.style.transition="all 0.5s";var l=new g.a({view:o,expandIconClass:"esri-icon-question",expandTooltip:"Information",expanded:!0});o.ui.add([{component:l,position:"top-left",index:0}]),l.container.addEventListener("click",(function(){l.expanded?(s.style.left="40px",s.style.opacity="1",s.style.pointerEvents="auto",s.style.transition="all 0.5s"):(s.style.left="35px",s.style.opacity="0",s.style.pointerEvents="none",s.style.transition="none")}));var u=new k({view:o});o.ui.add(u,"top-right")}document.createElement("div").innerHTML="Data sources here";var d=new g.a({view:o,expandIconClass:"clipboard-icon",expandTooltip:"Data Sources",collapseTooltip:"Close",content:p.a.renderToStaticMarkup(i.a.createElement(c.a,{sources:r,theme:t.theme}))});o.ui.add(d,"bottom-right"),t.disableSpinnerAfterInitialLoad?b.whenTrueOnce(o,"updating",(function(){A(!0)})):b.whenTrue(o,"updating",(function(){A(!0)})),b.whenFalse(o,"updating",(function(){A(!1)})),a&&a({map:e,view:o,layers:m})}),[]),Object(n.useEffect)((function(){x&&(x.map.layers=m)}),[m]),Object(n.useEffect)((function(){x&&(x.map.basemap=y)}),[y,x]),Object(n.useEffect)((function(){x&&_&&x.view.goTo({target:_.center,zoom:_.zoom},{duration:1e3})}),[_]),Object(n.useEffect)((function(){if(x)if(w){var e=x.map,t=x.view;I&&I();var r=w({map:e,view:t});O((function(){return r}))}else I&&I()}),[w,x]),Object(n.useEffect)((function(){if(x&&o){var e=x.view,t=x.map,r=o({map:t,view:e,layers:m,pageRefs:l,currentPage:u});if(r)return r}}),[x,u,o]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"arcgis-map "+t.name,ref:L}),s&&x&&s(x),M&&i.a.createElement(c.c,null))},V=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},F=a.b.section.withConfig({displayName:"ChapterTemplate__Wrapper",componentId:"sc-1cxnsi8-0"})(M||(M=V(["\n\twidth: 100%;\n\theight: ",";\n\tmin-height: 500px;\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: ",";\n\t/* scroll-snap-stop: always;\n\tscroll-snap-align: start; */\n"],["\n\twidth: 100%;\n\theight: ",";\n\tmin-height: 500px;\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: ",";\n\t/* scroll-snap-stop: always;\n\tscroll-snap-align: start; */\n"])),(function(e){return e.height||100*e.screensTall+"vh"||"auto"}),(function(e){return"light"===e.maptheme?"":"#242424"})),j=a.b.div.withConfig({displayName:"ChapterTemplate__Trigger",componentId:"sc-1cxnsi8-1"})(A||(A=V(["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 3px;\n\twidth: 3px;\n\tpointer-events: none;\n"],["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 3px;\n\twidth: 3px;\n\tpointer-events: none;\n"])));t.a=function(e){e.customMap;var t=e.data,r=t.metadata,a=t.sources,o=t.customFeatures,u=t.customFeaturesPerPage,p=t.customMapDOM,d=t.customChapterDOM,h=t.pages,y=Object(n.useState)(0),f=y[0],m=y[1],v=Object(n.useContext)(l.a).dispatch,_={};return Object(n.useMemo)((function(){return i.a.createElement(F,{maptheme:r.theme,id:r.name,screensTall:h.length>1?h.length:1},i.a.createElement(c.i,{floating:r.fullWidthMap},h.map((function(e,t){return i.a.createElement(c.d,{floating:r.fullWidthMap,ref:function(e){return _[t]=e},key:r.name+"-page-"+t},i.a.createElement(c.e,{theme:r.theme,floating:r.fullWidthMap},i.a.createElement(c.g,null,e.title),i.a.createElement(c.f,{floating:r.fullWidthMap},e.content)),i.a.createElement(s.a,{onChange:function(e){e&&(v({type:"SET_NAV",payload:r.name}),m(t))}},(function(e){e.isVisible;return i.a.createElement(j,null)})))}))),i.a.createElement(s.a,{partialVisibility:!0},(function(e){var t=e.isVisible;return i.a.createElement(c.b,{fullWidth:r.fullWidthMap,className:"arcgis-map-"+r.theme},t&&i.a.createElement(D,{mapState:h[f].mapState,customFeatures:o,customFeaturesPerPage:u,customMapDOM:p,metadata:r,sources:a,pageRefs:_,currentPage:f}))})),d&&d)}),[f])}},219:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(169),r(254),r(157),r(151),r(186),r(176),r(209),r(220),r(221)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c,u,p){Object.defineProperty(t,"__esModule",{value:!0});var d=n.ofType({key:"type",base:l,typeMap:{rect:c,path:p,geometry:u}});t.LayerView2DMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new d,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return r.__extends(t,e),t.prototype.initialize=function(){var e,t=this;this.container||(this.container=new s.Container),this.handles.add([a.init(this,"suspended",(function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestUpdate()}),!0),a.init(this,["layer.opacity","container"],(function(){var e,r;t.container&&(t.container.opacity=null!==(r=null===(e=t.layer)||void 0===e?void 0:e.opacity)&&void 0!==r?r:1)}),!0),a.init(this,["layer.blendMode"],(function(e){t.container&&(t.container.blendMode=e)}),!0),this.clips.on("change",(function(){t.container.clips=t.clips,t.notifyChange("clips")}))]),this.container.clips=this.clips,(null===(e=this.view)||void 0===e?void 0:e.whenLayerView)?this.view.whenLayerView(this.layer).then((function(e){e!==t||t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){})):this.when().then((function(){t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){}))},t.prototype.destroy=function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"updating",{get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,n=r.minScale,i=r.maxScale;if(null!=n&&null!=i){var a=!n,o=!i;!a&&e<=n&&(a=!0),!o&&e>=i&&(o=!0),t=a&&o}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){return!!e.prototype.canResume.call(this)&&this.isVisibleAtScale(this.view.scale)},r.__decorate([o.property({type:d,set:function(e){var t=i.referenceSetter(e,this._get("clips"),d);this._set("clips",t)}})],t.prototype,"clips",void 0),r.__decorate([o.property()],t.prototype,"moving",void 0),r.__decorate([o.property()],t.prototype,"attached",void 0),r.__decorate([o.property()],t.prototype,"container",void 0),r.__decorate([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r.__decorate([o.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r.__decorate([o.property()],t.prototype,"updateRequested",void 0),r.__decorate([o.property({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),r.__decorate([o.property()],t.prototype,"view",void 0),r.__decorate([o.subclass("esri.views.2d.layers.LayerView2D")],t)}(e)}}.apply(null,n))||(e.exports=i)},220:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(159),r(151),r(215),r(163),r(176)],void 0===(i=function(e,t,r,n,i,a,o,s){var l={base:a,key:"type",typeMap:{extent:n.Extent,polygon:n.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var n;return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({geometry:this.geometry.clone()})},r.__decorate([i.property({types:l,json:{read:o.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r.__decorate([i.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),n=r.__decorate([i.subclass("esri.views.layers.support.Geometry")],t)}(s)}.apply(null,n))||(e.exports=i)},221:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(151),r(176)],void 0===(i=function(e,t,r,n,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return r.__extends(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r.__decorate([n.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),r.__decorate([n.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),r.__decorate([n.subclass("esri.views.layers.support.Path")],t)}(i)}.apply(null,n))||(e.exports=i)},2293:function(e,t,r){"use strict";r.r(t);var n=r(2),i=r.n(n),a=r(208),o=r.n(a),s=r(222),l=r.n(s),c=r(325),u=r.n(c),p=r(237),d=r.n(p),h=r(668),y={type:"simple",symbol:{type:"simple-fill",color:[139,0,0,.7],outline:{color:[139,0,0,1],width:"0.5px"}}},f=new l.a({url:"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Countries_(Generalized)/FeatureServer/0",legendEnabled:!1}),m=new l.a({url:"https://services7.arcgis.com/WSiUmUhlFx4CtMBB/arcgis/rest/services/AUBushfireBurnArea/FeatureServer",renderer:y}),v=(new l.a({url:"https://services.arcgis.com/nzS0F0zdNLvs7nc8/arcgis/rest/services/Biodiversity_Hotspots_2016_WFL1/FeatureServer"}),new l.a({url:"https://services.arcgis.com/3vStCH7NDoBOZ5zn/arcgis/rest/services/Koala_Records2/FeatureServer"})),_=new u.a({url:"https://tiles.arcgis.com/tiles/yCVH8H4hXcgEqeRw/arcgis/rest/services/Koala_HSM_Before/MapServer"}),g=new u.a({url:"https://tiles.arcgis.com/tiles/yCVH8H4hXcgEqeRw/arcgis/rest/services/Koala_HSM_After/MapServer",legendEnabled:!1}),b=new(o.a.createSubclass({tileInfo:d.a.create({size:512,spatialReference:{wkid:3857}}),constructor:function(){this.color=[0,0,0,1],this.distance=2},createLayerView:function(e){if("2d"===e.type)return new h.a({view:e,layer:this})},properties:{color:{},geometry:{},distance:{}}}))({color:[0,0,0,.75]}),w=r(300),L=r.n(w),S=r(547),x=r.n(S),E=r(5),P={metadata:{name:"wildfires_australia",theme:"dark-blue",fullWidthMap:!1},sources:[{name:"Australia Bushfire Burn Extent 2019 - 2020",url:"https://www.arcgis.com/home/item.html?id=dc4e10544b4e46c78786d0a5b9f2cea8"},{name:"Koala Sightings in Brisbane, 2018",url:"https://www.arcgis.com/home/item.html?id=494241deb90f4fc6bfc893c3ad7cf226"},{name:"Koala Habitat Suitability Model, Before",url:"https://www.arcgis.com/home/item.html?id=7a881d7fb0a34300935a1d0fb19fca85"},{name:"Koala Habitat Suitability Model, After",url:"https://www.arcgis.com/home/item.html?id=a30e24d3ebd4464a86132c54b34b9de4"}],customFeatures:function(e){var t=e.view,r=new L.a({view:t,layerInfos:[{layer:m,title:"Bushfire Burned Area \n 7-1-2019 to 5-25-2020"},{layer:v,title:"Koala Sighting in 2018"},{layer:g,title:"Koala Habitat Viability"},{layer:_,title:"Koala Habitat Viability"}]});t.ui.add(r,"top-right");var n=f.createQuery();n.where="ISO = 'AU'",f.queryFeatures(n).then((function(e){var t=e.features[0].geometry;b.geometry=t}))},pages:[{title:"Australia Wildfires",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"In January, while Coronavirus was still an unknown virus in Wuhan, Australia was on fire. The 2019 - 2020 Australian summer saw over"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.9news.com.au/national/australian-bushfires-17-million-hectares-burnt-more-than-previously-thought/b8249781-5c86-4167-b191-b9f628bdd164",linkTitle:'"Government set to revise total number of hectares destroyed during bushfire season to 17 million", F. Noble, 9News, Retrieved Oct 26, 2020'},"18 million hectares")," ","burned by wildfires. The massive scale of these fires affected humans, killing"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.statista.com/statistics/1104739/australia-bushfire-human-fatalities-by-state/#:~:text=Number%20of%20deaths%20due%20to,Australia%202019%2D2020%20by%20state&text=As%20of%20Januray%202020%2C%2025,the%20bushfires%20since%20October%202019.",linkTitle:'"Number of deaths due to the bushfire season in Australia between October 2019 to February 2020, by state", statista.com, Retrieved October 26, 2020'},"roughly 50 people"),", and destroying several thousand homes. But more than people, wildlife suffered the greatest, with over"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.aph.gov.au/About_Parliament/Parliamentary_Departments/Parliamentary_Library/pubs/rp/rp1920/Quick_Guides/AustralianBushfires",linkTitle:'"2019–20 Australian bushfires—frequently asked questions: a quick guide", L. Richards, N. Brew, 12 March 2020, Retrieved Oct 26, 2020'},"a ",i.a.createElement("i",null,"billion")," animals killed"),"."),i.a.createElement("p",null,i.a.createElement("em",{className:"action"},"The red area on the map")," shows the acreage burned in the 2019 - 2020 fire season.")),mapState:{position:{center:[134,-26.9],zoom:4},layers:[m,b],basemap:"satellite"}},{title:"Koalas in Queensland",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Australia has roughly"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.currentresults.com/Environment-Facts/Plants-Animals/number-of-species-native-to-australia.php",linkTitle:'"Number of Species Native to Australia", Osborne, L., currentresults.com, Retrieved October 27, 2020'},"3,000 endemic species of animals and birds"),", meaning they are found nowhere else on earth. The most iconic of these is the Koala, with the entire species containing somewhere between"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.savethekoala.com/about-koalas/koala-endangered-or-not",linkTitle:'"The Koala - Endangered or Not?", Australian Koala Foundation, 2020, Retrieved Oct 27, 2020'},"50 and 100 thousand"),"."," "),i.a.createElement("p",null,"We can get a sense of the density of Koalas in the Brisbane area before the 2019 - 2020 fires. This map layer shows koala sightnings reporting by the public in 2018. As you can see, the greater Brisbane area was not as affected by the fires as other parts of the county...")),mapState:{position:{center:[153.28,-27.99],zoom:10},layers:[m,b,v],basemap:"satellite"}},{title:"Habitat Destruction",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"The Australian environment minister"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.theguardian.com/australia-news/2019/dec/27/australias-environment-minister-says-up-to-30-of-koalas-killed-in-nsw-mid-north-coast-fires",linkTitle:'"Australia\'s environment minister says up to 30% of koalas killed in NSW mid-north coast fires", Zhou, N., Dec 26, 2019, Retrieved Oct 27, 2020'},"announced ",i.a.createElement("i",null,"in December"))," ","that an estimated 5,000 Koalas had been killed in New South Wales alone, which accounts for roughly 30% of the species in that state."," "),i.a.createElement("p",null,"In Victoria, the effect of the fires on wildlife habitat is easy to see. The difference in the"," ",i.a.createElement(E.h,{theme:"dark",link:"https://www.environment.nsw.gov.au/-/media/OEH/Corporate-Site/Documents/Animals-and-plants/Threatened-species/koala-habitat-information-base-technical-guide-190534.pdf",linkTitle:'"Koala Habitat Information Base Technical Guide", environment.nsw.gov.au, 2019, Retrieved October 27, 2020'},"Koala Habitat Suitability Model")," ","before and after the fires is stark."," "),i.a.createElement("p",null,i.a.createElement("em",{className:"action"},"Drag the swipe handle back and forth")," to see how their habitat has changed due to the fires. The left side shows habitat suitability from before the fires, and the right side from after.")),mapState:{position:{center:[148.9,-37.4],zoom:9},layers:[b,m,_,g],basemap:"satellite",customBehavior:function(e){var t=e.view,r=new x.a({leadingLayers:[_],trailingLayers:[g],view:t,position:50});return t.ui.add(r),function(){t.ui.remove(r)}}}}]},M=r(213);t.default=function(){return i.a.createElement(M.a,{data:P})}},291:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(153),r(310),r(311),r(161)],void 0===(i=function(e,t,n,i,a){Object.defineProperty(t,"__esModule",{value:!0});var o=null,s=null;t.isLoaded=function(){return!!o&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var l=null;t.load=function(){return l||(l=n.all([i.load(),new Promise((function(e,t){r.e(12).then(function(){var t=[r(381)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})),new Promise((function(e,t){r.e(140).then(function(){var t=[r(405)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))]).then((function(e){var t=e[1],r=e[2].hydratedAdapter;s=r,(o=t)._enableProjection(i)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:u(s,e,e[0].spatialReference,t,r):u(s,[e],e.spatialReference,t,r)[0]};var c={};function u(e,t,r,n,i){if(void 0===i&&(i=null),null===i){var s=a.cacheKey(r,n);void 0!==c[s]?i=c[s]:(null===(i=p(r,n,null))&&(i=new a),c[s]=i)}return o._project(e,t,r,n,i)}function p(e,t,r){void 0===r&&(r=null);var n=o._getTransformation(s,e,t,r,null==r?void 0:r.spatialReference);return null!==n?a.fromGE(n):null}t.projectMany=u,t.getTransformation=p,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=o._getTransformationBySuitability(s,e,t,r,null==r?void 0:r.spatialReference);if(null!==n){for(var i=[],l=0,c=n;l<c.length;l++){var u=c[l];i.push(a.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)},300:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(167),r(157),r(151),r(573),r(188),r(676),r(687),r(688),r(183)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c,u,p){return function(e){function t(t,r){var i=e.call(this,t,r)||this;return i._handles=new n,i.activeLayerInfos=null,i.basemapLegendVisible=!1,i.groundLegendVisible=!1,i.keepCacheOnDestroy=!1,i.respectLayerVisibility=!0,i.iconClass="esri-icon-layer-list",i.label=void 0,i.layerInfos=null,i.messages=null,i.style=new u,i.view=null,i.viewModel=new l,i}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this.own(i.on(this,"activeLayerInfos","change",(function(){return e._refreshActiveLayerInfos(e.activeLayerInfos)})),i.init(this,"style",(function(t,r){r&&t!==r&&r.destroy(),t&&(t.activeLayerInfos=e.activeLayerInfos,"card"===t.type&&(t.view=e.view))})))},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null},t.prototype.castStyle=function(e){if(e instanceof c||e instanceof u)return e;if("string"==typeof e)return"card"===e?new c:new u;if(e&&"string"==typeof e.type){var t=r.__assign({},e);return delete t.type,new("card"===e.type?c:u)(t)}return new u},t.prototype.render=function(){return p.tsx("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof u?"esri-widget--panel":null)},this.style.render())},t.prototype._refreshActiveLayerInfos=function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()},t.prototype._renderOnActiveLayerInfoChange=function(e){var t=this,r=i.init(e,"version",(function(){return t.scheduleRender()}));this._handles.add(r,"version_"+e.layer.uid),e.children.forEach((function(e){return t._renderOnActiveLayerInfoChange(e)}))},r.__decorate([a.aliasOf("viewModel.activeLayerInfos"),p.renderable()],t.prototype,"activeLayerInfos",void 0),r.__decorate([a.aliasOf("viewModel.basemapLegendVisible"),p.renderable()],t.prototype,"basemapLegendVisible",void 0),r.__decorate([a.aliasOf("viewModel.groundLegendVisible"),p.renderable()],t.prototype,"groundLegendVisible",void 0),r.__decorate([a.aliasOf("viewModel.keepCacheOnDestroy")],t.prototype,"keepCacheOnDestroy",void 0),r.__decorate([a.aliasOf("viewModel.respectLayerVisibility"),p.renderable()],t.prototype,"respectLayerVisibility",void 0),r.__decorate([a.property()],t.prototype,"iconClass",void 0),r.__decorate([a.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),r.__decorate([a.aliasOf("viewModel.layerInfos"),p.renderable()],t.prototype,"layerInfos",void 0),r.__decorate([a.property(),p.renderable(),p.messageBundle("esri/widgets/Legend/t9n/Legend")],t.prototype,"messages",void 0),r.__decorate([a.property(),p.renderable()],t.prototype,"style",void 0),r.__decorate([o.cast("style")],t.prototype,"castStyle",null),r.__decorate([a.aliasOf("viewModel.view"),p.renderable()],t.prototype,"view",void 0),r.__decorate([a.property(),p.renderable(["view.size"])],t.prototype,"viewModel",void 0),r.__decorate([a.subclass("esri.widgets.Legend")],t)}(s)}.apply(null,n))||(e.exports=i)},310:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(271),r(164),r(153),r(161)],void 0===(i=function(e,t,n,i,a,o){var s,l,c,u,p,d;function h(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,l.init(),c.init(),u.init(),p.init(),d.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,a=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<a.length;i++)r(a[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(l.PE_NAME_MAX))}}));for(var o=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];o<s.length;o++)r(s[o].prototype,"getParameters",(function(e){return function(){for(var r=new Array(l.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var a=t._pe.getValue(n,"*");r[i]=a?t._pe.wrapPointer(a,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return v(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var a=this.getSteps();if(a>1)for(var o=t._pe.getPointer(i),s=1;s<a;s++)n.push(t._pe.wrapPointer(o+r*s,t._pe.PeGTlistExtendedGTs))}return n}}));var h=t._pe._pe_getPeHorizonSize(),y=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var a=i.getNump();if(a>1)for(var o=t._pe.getPointer(i),s=1;s<a;s++)n.push(t._pe.wrapPointer(o+h*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",y),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",y),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=l.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(l.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function y(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function f(e,r){for(var n=[],i=new Array(r),a=0;a<e;a++)n.push(t._pe.ensureInt8(i));return n}function m(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function v(e,r,n,i){if(void 0===i&&(i=!1),i)for(var a=0;a<2*r;a++)e[a]=t._pe.getValue(n+a*Float64Array.BYTES_PER_ELEMENT,"double");else{var o=0===e.length;for(a=0;a<r;a++)o&&(e[a]=new Array(2)),e[a][0]=t._pe.getValue(n,"double"),e[a][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!a("esri-wasm")},t.load=function(){return s||(s=o.create((function(e,t){new Promise((function(e,t){r.e(122).then(function(){var t=[r(474)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})).then((function(r){r({locateFile:function(e){return i.getAssetUrl("esri/geometry/support/"+e)},onAbort:function(e){t(new Error(e))}}).then((function(t){h(t),e()}))}))})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=m(n),a=n===i,o=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,o);return s&&v(n,r,o,a),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var a=m(n),o=n===a,s=t._pe.ensureFloat64(a),l=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return l&&v(n,r,s,o),l}e.geogToProj=r,e.projGeog=function(e,t,i,a){switch(a){case l.PE_TRANSFORM_P_TO_G:return n(e,t,i);case l.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(l=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,o=r[e];if(o||(o={},r[e]=o),o.hasOwnProperty(String(n)))i=o[n];else{var s=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(s,t._pe.NULL)||(i=s,o[n]=i)}return a(i)}function a(e){if(e){var r=e.getType();switch(r){case l.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case l.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case l.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&l.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(l.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,o=n[e];if(o||(o={},n[e]=o),o.hasOwnProperty(r))i=o[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(i=s,o[r]=i)}return a(i)},e.geogcs=function(e){return i(l.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(l.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(l.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(l.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,a,o,s){var l=null,c=new t._pe.PeInteger(s);try{var u=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,a,o,c);if((s=c.val)&&(l=[u],s>1))for(var p=t._pe.getPointer(u),d=1;d<s;d++)l.push(t._pe.wrapPointer(p+r*d,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(c)}return l}}(c=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];y(i),i.getEntries().forEach((function(e){y(e);var t=e.getGeogtran();y(t),t.getParameters().forEach(y),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){y(e);var t=e.getDatum();y(t),y(t.getSpheroid()),y(e.getPrimem()),y(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,a){t._pe.ensureCache.prepare();var o=m(n),s=n===o,l=t._pe.ensureFloat64(o),c=0;i&&(c=t._pe.ensureFloat64(i));var u=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,l,c,a);return u&&v(n,r,l,s),u}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,a,o){var s,c;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,c=l.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,c=l.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,c=l.PE_DMS_MAX}var u=0;r&&(u=t._pe.getPointer(r));var p=m(i),d=t._pe.ensureFloat64(p),h=f(n,c),y=s(u,n,d,a,t._pe.ensureInt32(h));if(y)for(var v=0;v<n;v++)o[v]=t._pe.UTF8ToString(h[v]);return y}function n(e,r,n,i,a){var o;switch(t._pe.ensureCache.prepare(),e){case"dd":o=t._pe._pe_dd_to_geog;break;case"ddm":o=t._pe._pe_ddm_to_geog;break;case"dms":o=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var l=i.map((function(e){return t._pe.ensureString(e)})),c=t._pe.ensureInt32(l),u=t._pe.ensureFloat64(new Array(2*n)),p=o(s,n,c,u);return p&&v(a,n,u),p}e.geog_to_dms=function(e,t,n,i,a){return r("dms",e,t,n,i,a)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,a){return r("ddm",e,t,n,i,a)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,a){return r("dd",e,t,n,i,a)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,a,o,s){t._pe.ensureCache.prepare();var c=0;e&&(c=t._pe.getPointer(e));var u=m(n),p=t._pe.ensureFloat64(u),d=f(r,l.PE_MGRS_MAX),h=t._pe.ensureInt32(d),y=t._pe._pe_geog_to_mgrs_extended(c,r,p,i,a,o,h);if(y)for(var v=0;v<r;v++)s[v]=t._pe.UTF8ToString(d[v]);return y},e.mgrs_to_geog_extended=function(e,r,n,i,a){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(s),c=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_mgrs_to_geog_extended(o,r,l,i,c);return u&&v(a,r,c),u}}(u=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,a,o,s){t._pe.ensureCache.prepare();var c=0;e&&(c=t._pe.getPointer(e));var u=m(n),p=t._pe.ensureFloat64(u),d=f(r,l.PE_MGRS_MAX),h=t._pe.ensureInt32(d),y=t._pe._pe_geog_to_usng(c,r,p,i,a,o,h);if(y)for(var v=0;v<r;v++)s[v]=t._pe.UTF8ToString(d[v]);return y},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var o=n.map((function(e){return t._pe.ensureString(e)})),s=t._pe.ensureInt32(o),l=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_usng_to_geog(a,r,s,l);return c&&v(i,r,l),c}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,a){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=m(n),c=t._pe.ensureFloat64(s),u=f(r,l.PE_UTM_MAX),p=t._pe.ensureInt32(u),d=t._pe._pe_geog_to_utm(o,r,c,i,p);if(d)for(var h=0;h<r;h++)a[h]=t._pe.UTF8ToString(u[h]);return d},e.utm_to_geog=function(e,r,n,i,a){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(s),c=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_utm_to_geog(o,r,l,i,c);return u&&v(a,r,c),u}}(p=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var a,o;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(o=r.get(n))[i]&&(a=o[i]),a||(a=t._pe.PePCSInfo.prototype.generate(n,i),o||(o=[],r.set(n,o)),o[i]=a),a}}(d=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=h}.apply(null,n))||(e.exports=i)},311:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(312)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",a=0,o=t.steps;a<o.length;a++){var s=o[a],l=r.fromGE(s);n.steps.push(l),i+=l.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,a=this.steps;i<a.length;i++)n+=a[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var o=this._cached_projection[e.cacheKey(t,r)];return void 0===o?null:o},e}()}.apply(null,n))||(e.exports=i)},312:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},360:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e){return"h"in e&&"s"in e&&"v"in e}function n(e){return"l"in e&&"a"in e&&"b"in e}function i(e){return"l"in e&&"c"in e&&"h"in e}function a(e){return"x"in e&&"y"in e&&"z"in e}Object.defineProperty(t,"__esModule",{value:!0});var o=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],s=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function l(e,t){var r,n,i=[];if(e[0].length!==t.length)throw"dimensions do not match";var a=e.length,o=e[0].length,s=0;for(r=0;r<a;r++){for(s=0,n=0;n<o;n++)s+=e[r][n]*t[n];i.push(s)}return i}function c(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),r=l(o,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function u(e){var t=l(s,[e.x/100,e.y/100,e.z/100]).map((function(e){var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function p(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function d(e){var t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function h(e){return p(c(e))}function y(e){return u(d(e))}function f(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:i(e)?function(e){return u(d(function(e){var t=e.l,r=e.c,n=e.h;return{l:t,a:r*Math.cos(n),b:r*Math.sin(n)}}(e)))}(e):n(e)?y(e):a(e)?u(e):r(e)?function(e){var t,r=(e.h+360)%360/60,n=e.s/100,i=e.v/100*255,a=i*n,o=a*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:t={r:a,g:o,b:0};break;case 1:t={r:o,g:a,b:0};break;case 2:t={r:0,g:a,b:o};break;case 3:t={r:0,g:o,b:a};break;case 4:t={r:o,g:0,b:a};break;case 5:case 6:t={r:a,g:0,b:o};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+i-a),t.g=Math.round(t.g+i-a),t.b=Math.round(t.b+i-a),t}(e):void 0}t.toRGB=f,t.toHSV=function(e){return r(e)?e:function(e){var t,r,n,i=e.r,a=e.g,o=e.b,s=Math.max(i,a,o),l=s-Math.min(i,a,o);return n=s,0===l?t=0:s===i?t=(a-o)/l%6:s===a?t=(o-i)/l+2:s===o&&(t=(i-a)/l+4),r=0===l?0:l/n,t<0&&(t+=6),{h:t*=60,s:r*=100,v:n*=100/255}}(f(e))},t.toLAB=function(e){return n(e)?e:h(f(e))},t.toLCH=function(e){return i(e)?e:function(e){return function(e){var t=e.l,r=e.a,n=e.b,i=Math.sqrt(r*r+n*n),a=Math.atan2(n,r);return{l:t,c:i,h:a=a>0?a:a+2*Math.PI}}(p(c(e)))}(f(e))},t.toXYZ=function(e){return a(e)?e:c(f(e))},t.darken=function(e,t){var r=h(e);return r.l*=1-t,y(r)}}.apply(null,n))||(e.exports=i)},378:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(158),r(151),r(439),r(235),r(490)],void 0===(i=function(e,t,r,n,i,a,o,s){Object.defineProperty(t,"__esModule",{value:!0});var l={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._scale=null,t.view=null,t}return r.__extends(t,e),Object.defineProperty(t.prototype,"dynamicLayers",{get:function(){if(!this.hasDynamicLayers)return null;var e=this.visibleSublayers.map((function(e){return e.toExportImageJSON()}));return e.length?JSON.stringify(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasDynamicLayers",{get:function(){return this.layer&&a.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layer",{set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this._layerHandles&&(this._layerHandles.forEach((function(e){return e.remove()})),this._layerHandles.length=0),e&&(this._layerHandles=[e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(l[e.propertyName])}))]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers",{get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerDefs",{get:function(){var e=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression}));return e.length?JSON.stringify(e.reduce((function(e,t){return e[t.id]=t.definitionExpression,e}),{})):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return null!=this._scale?this._scale:this.view&&this.view.scale||0},set:function(e){this.view||(this._scale=e,this.notifyChange("scale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){this.layers,this.layerDefs,this.dynamicLayers,this.timeExtent;var e=this.layer;return e&&(e.dpi,e.imageFormat,e.imageTransparency,e.gdbVersion),(this._get("version")||0)+1},set:function(e){this._set("version",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleSublayers",{get:function(){var e=this,t=[];if(!this.layer)return t;var r=this.layer.sublayers,n=function(r){var i=e.scale,a=0===i,o=0===r.minScale||i<=r.minScale,s=0===r.maxScale||i>=r.maxScale;r.visible&&(a||o&&s)&&(r.sublayers?r.sublayers.forEach(n):t.unshift(r))};r&&r.forEach(n);var i=this._get("visibleSublayers");return!i||i.length!==t.length||i.some((function(e,r){return t[r]!==e}))?t:i},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=r.__assign(r.__assign({},t),{layers:this.layers,layerDefs:this.layerDefs}),t},r.__decorate([i.property({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],t.prototype,"dynamicLayers",null),r.__decorate([i.property({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],t.prototype,"hasDynamicLayers",null),r.__decorate([i.property()],t.prototype,"layer",null),r.__decorate([i.property({readOnly:!0,dependsOn:["visibleSublayers"]})],t.prototype,"layers",null),r.__decorate([i.property({readOnly:!0,dependsOn:["visibleSublayers"]})],t.prototype,"layerDefs",null),r.__decorate([i.property({type:Number,dependsOn:["view.scale"]})],t.prototype,"scale",null),r.__decorate([i.property(o.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),r.__decorate([i.property({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],t.prototype,"version",null),r.__decorate([i.property({type:s})],t.prototype,"view",void 0),r.__decorate([i.property({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],t.prototype,"visibleSublayers",null),r.__decorate([i.subclass("esri.layers.mixins.ExportImageParameters")],t)}(n);t.ExportImageParameters=c}.apply(null,n))||(e.exports=i)},396:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(182),r(164),r(370),r(792),r(183)],void 0===(i=function(e,t,r,n,i,a,o){Object.defineProperty(t,"__esModule",{value:!0});var s=0,l=0,c=n("android"),u=n("chrome")||c&&c>=4?"auto":"optimizeLegibility",p={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},d=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,h={},y={},f={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};function m(e){return e.map((function(e){return e.command+" "+e.values.join(" ")})).join(" ").trim()}function v(e,t,r,n){if(e){if("circle"===e.type)return o.tsx("circle",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return o.tsx("ellipse",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return o.tsx("rect",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return o.tsx("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){var i="string"!=typeof e.path?m(e.path):e.path;return o.tsx("path",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:i})}if("text"===e.type)return o.tsx("text",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":u,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:e.x,y:e.y},e.text)}return null}function _(e){var t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){var n="patternId-"+ ++s;t.fill="url(#"+n+")",t.pattern={id:n,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type)n="linearGradientId-"+ ++l,t.fill="url(#"+n+")",t.linearGradient={id:n,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((function(e){return{offset:e.offset,color:e.color&&new r(e.color).toString()}}))};else if(e){var i=new r(e);t.fill=i.toString()}return t}function g(e){var t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new r(e.color).toString()),e.style)){var n=null;if(e.style in f&&(n=f[e.style]),Array.isArray(n)){n=n.slice(0);for(var i=0;i<n.length;++i)n[i]*=e.width;if("butt"!==e.cap){for(i=0;i<n.length;i+=2)n[i]-=e.width,n[i]<1&&(n[i]=1);for(i=1;i<n.length;i+=2)n[i]+=e.width}n=n.join(",")}t.dashArray=n}return t}function b(e,t){var r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(r.align=e.align,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"),r}function w(e){var t=e.pattern,r=e.linearGradient;if(t)return o.tsx("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},o.tsx("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(r){var n=r.stops.map((function(e,t){return o.tsx("stop",{key:t+"-stop",offset:e.offset,"stop-color":e.color})}));return o.tsx("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},n)}return null}function L(e,t,r,n,i){return a.scale(e,a.identity(e),[t,r]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*r-i*r+i,e}function S(e,t){h&&"left"in h?(h.left>e&&(h.left=e),h.right<e&&(h.right=e),h.top>t&&(h.top=t),h.bottom<t&&(h.bottom=t)):h={left:e,bottom:t,right:e,top:t}}function x(e){var t,r=e.args,n=r.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(t=0;t<n;t+=2)S(r[t],r[t+1]);y.x=r[n-2],y.y=r[n-1];break;case"H":for(t=0;t<n;++t)S(r[t],y.y);y.x=r[n-1];break;case"V":for(t=0;t<n;++t)S(y.x,r[t]);y.y=r[n-1];break;case"m":var i=0;"x"in y||(S(y.x=r[0],y.y=r[1]),i=2);for(t=i;t<n;t+=2)S(y.x+=r[t],y.y+=r[t+1]);break;case"l":case"t":for(t=0;t<n;t+=2)S(y.x+=r[t],y.y+=r[t+1]);break;case"h":for(t=0;t<n;++t)S(y.x+=r[t],y.y);break;case"v":for(t=0;t<n;++t)S(y.x,y.y+=r[t]);break;case"c":for(t=0;t<n;t+=6)S(y.x+r[t],y.y+r[t+1]),S(y.x+r[t+2],y.y+r[t+3]),S(y.x+=r[t+4],y.y+=r[t+5]);break;case"s":case"q":for(t=0;t<n;t+=4)S(y.x+r[t],y.y+r[t+1]),S(y.x+=r[t+2],y.y+=r[t+3]);break;case"A":for(t=0;t<n;t+=7)S(r[t+5],r[t+6]);y.x=r[n-2],y.y=r[n-1];break;case"a":for(t=0;t<n;t+=7)S(y.x+=r[t+5],y.y+=r[t+6])}}function E(e,t,r){var n,i=p[e.toLowerCase()];"number"==typeof i&&(i?t.length>=i&&(n={action:e,args:t.slice(0,t.length-t.length%i)},r.push(n),x(n)):(n={action:e,args:[]},r.push(n),x(n)))}function P(e){var t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){var r=function(e){var t=("string"!=typeof e.path?m(e.path):e.path).match(d),r=[];if(h={},y={},!t)return null;for(var n="",i=[],a=t.length,o=0;o<a;++o){var s=t[o],l=parseFloat(s);isNaN(l)?(n&&E(n,i,r),i=[],n=s):i.push(l)}E(n,i,r);var c={x:0,y:0,width:0,height:0};return h&&"left"in h&&(c.x=h.left,c.y=h.top,c.width=h.right-h.left,c.height=h.bottom-h.top),c}(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function M(e){for(var t={x:0,y:0,width:0,height:0},r=null,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=0,o=e;a<o.length;a++){var s=o[a];r?(r.x=Math.min(r.x,s.x),r.y=Math.min(r.y,s.y),n=Math.max(n,s.x+s.width),i=Math.max(i,s.y+s.height)):((r=t).x=s.x,r.y=s.y,n=s.x+s.width,i=s.y+s.height)}return r&&(r.width=n-r.x,r.height=i-r.y),r}function A(e,t,r,n,o,s){var l=t/2,c=r/2,u=e.width+n,p=e.height+n,d=i.mat2df32.create(),h=i.mat2df32.create(),y=!1;if(o&&0!==u&&0!==p){var f=u/p,m=t>r?t:r,v=1,_=1;isNaN(m)||(f>1?(v=m/u,_=m/f/p):(_=m/p,v=m*f/u)),a.multiply(h,h,L(d,v,_,l,c)),y=!0}var g=e.x+(u-n)/2,b=e.y+(p-n)/2,w=l-g,S=c-b;if(a.multiply(h,h,function(e,t,r){return a.translate(e,a.identity(e),[t,r])}(d,w,S)),!y&&(u>t||p>r)){var x=u/t>p/r,E=(x?t:r)/(x?u:p);a.multiply(h,h,L(d,E,E,g,b))}return s&&a.multiply(h,h,function(e,t,r,n){var i=t%360*Math.PI/180;a.rotate(e,a.identity(e),i);var o=Math.cos(i),s=Math.sin(i),l=e[4],c=e[5];return e[4]=l*o-c*s+n*s-r*o+r,e[5]=c*o+l*s-r*s-n*o+n,e}(d,s,g,b)),"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"}t.renderShape=v,t.generateFillAttributes=_,t.generateStrokeAttributes=g,t.generateTextAttributes=b,t.renderDef=w,t.getBoundingBox=P,t.computeBBox=M,t.getTransformMatrix=A,t.renderSVG=function(e,t,r,n){for(var i=[],a=[],s=0,l=e;s<l.length;s++){for(var c=[],u=[],p=0,d=0,h=l[s];d<h.length;d++){var y=h[d],f=y.shape,m=y.fill,L=y.stroke,S=y.font;p+=L&&L.width||0;var x=_(m),E=g(L),C="text"===f.type?b(f,S):null;i.push(w(x)),c.push(v(f,x.fill,E,C)),u.push(P(f))}var I=A(M(u),t,r,p,n&&n.scale,n&&n.rotation);a.push(o.tsx("g",{transform:I},c))}return o.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r},o.tsx("defs",null,i),a)}}.apply(null,n))||(e.exports=i)},397:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(366),r(434)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r.convertDateFormatToIntlOptions("short-date");t.createStopLabel=function(e,t,a,o){var s="";return 0===t?s="< ":t===a&&(s="> "),s+(o?r.formatDate(e,i):n.format(e))},t.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="]}.apply(null,n))||(e.exports=i)},501:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]},t.getPathSymbolShapes=function(e){var t=22,r=22;return e<1?t*=.75:e>1&&(r*=1.25),[{type:"path",path:[{command:"M",values:[22,0]},{command:"L",values:[19.25,0]},{command:"L",values:[0,r-11]},{command:"L",values:[t-11,r-11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[22,0]},{command:"L",values:[22,2.75]},{command:"L",values:[t-11,22]},{command:"L",values:[t-11,r-11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[t-11,r-11]},{command:"L",values:[0,r-11]},{command:"L",values:[0,22]},{command:"L",values:[t-11,22]},{command:"Z",values:[]}]}]},t.getExtrudeSymbolShapes=function(e){var t=.5*e;return[{type:"path",path:[{command:"M",values:[0,22*.7*.5]},{command:"L",values:[6.6,22*.7]},{command:"L",values:[6.6,22*.7+t]},{command:"L",values:[0,22*.7+t-22*.7*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,22*.7]},{command:"L",values:[6.6,22*.7+t]},{command:"L",values:[22,t]},{command:"L",values:[22,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[22,0]},{command:"L",values:[6.6,22*.7]},{command:"L",values:[0,22*.7*.5]},{command:"Z",values:[]}]}]},t.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]},t.getCubeShapes=function(e,t){var r=t?20:e,n=t?4:6,i=(r-=r<=22?.5*n:n,t?.35*r:.5*r);return[{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[0,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[0,e-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[r,e-.5*i]},{command:"L",values:[r,.5*i]},{command:"Z",values:[]}]}]},t.getCylinderShapes=function(e,t){var r=t?20:e,n=t?4:6,i=.5*(r-=r<=22?.5*n:n),a=.15*r,o=e-a;return[{type:"ellipse",cx:.5*r,cy:o,rx:i,ry:a},{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,o]},{command:"L",values:[r,o]},{command:"L",values:[r,a]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:a,rx:i,ry:a}]},t.getConeShapes=function(e,t){var r=t?20:e,n=t?4:6,i=.15*(r-=r<=22?.5*n:n),a=e-i;return[{type:"ellipse",cx:.5*r,cy:a,rx:.5*r,ry:i},{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,a]},{command:"L",values:[0,a]},{command:"Z",values:[]}]}]},t.getInvertedConeShapes=function(e){var t=e,r=.15*(t-=t<22?3:6);return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,e-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:r}]},t.getDiamondShapes=function(e){var t=e,r=e,n=t-=t<22?2:4,i=r,a=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[n,.5*i-a]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"L",values:[0,.5*i-a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i-a]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"L",values:[.45*n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,r]},{command:"L",values:[n,.5*i-a]},{command:"L",values:[.45*n-a,.5*i+a]},{command:"Z",values:[]}]}]},t.getTetrahedronShapes=function(e){var t=e;return[{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[e,t-=t<22?1:2]},{command:"L",values:[.45*e,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[e,t]},{command:"Z",values:[]}]}]}}.apply(null,n))||(e.exports=i)},502:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(336),r(165),r(360),r(154),r(164),r(153),r(621),r(396)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c){Object.defineProperty(t,"__esModule",{value:!0});var u=l.createProjector();function p(e,t,r,n,a){switch(a){case"multiply":e[t+0]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];break;default:var o=i.toHSV({r:e[t+0],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;var s=i.toRGB(o);e[t+0]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=r[3]}}t.renderSymbol=function(e,t,r){var n=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some((function(e){return!!e.length})))return null;var a=r&&r.node||document.createElement("div");return null!=r.opacity&&(a.style.opacity=r.opacity.toString()),u.append(a,c.renderSVG.bind(null,e,n,i,r)),a},t.tintImageWithColor=function(e,t,l,c,u){return function(e,t,r){return e?n(e,{responseType:"image"}).then((function(e){var n=e.data,i=n.width,a=n.height,o=i/a,s=t;if(r){var l=Math.max(i,a);s=Math.min(s,l)}return{image:n,width:o<=1?Math.ceil(s*o):s,height:o<=1?s:Math.ceil(s/o)}})):s.reject(new a("renderUtils: imageDataSize","href not provided."))}(e,t,u).then((function(n){var a=n.width?n.width:t,s=n.height?n.height:t;if(n.image&&function(e,t){return!(!e||"ignore"===t||"multiply"===t&&255===e.r&&255===e.g&&255===e.b&&1===e.a)}(l,c)){var u=n.image.width,d=n.image.height;(o("edge")||o("ie"))&&/\.svg$/i.test(e)&&(u-=1,d-=1);var h=function(e,t){e=Math.ceil(e),t=Math.ceil(t);var r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";var n=r.getContext("2d");return n.clearRect(0,0,e,t),n}(a,s);h.drawImage(n.image,0,0,u,d,0,0,a,s);for(var y=h.getImageData(0,0,a,s),f=[l.r/255,l.g/255,l.b/255,l.a],m=i.toHSV(l),v=0;v<y.data.length;v+=4)p(y.data,v,f,m,c);h.putImageData(y,0,0),e=h.canvas.toDataURL("image/png")}else{var _=r.id&&r.id.findCredential(e);if(_&&_.token){var g=-1===e.indexOf("?")?"?":"&";e=""+e+g+"token="+_.token}}return{url:e,width:a,height:s}})).catch((function(){return{url:e,width:t,height:t}}))}}.apply(null,n))||(e.exports=i)},503:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(271),r(360),r(177),r(154),r(156),r(152),r(153),r(171),r(420),r(627),r(577),r(501),r(502),r(633),r(357)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c,u,p,d,h,y,f,m,v){Object.defineProperty(t,"__esModule",{value:!0});var _=n.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png"),g=s.getLogger("esri.symbols.support.previewSymbol3D");function b(e){var t=e.outline,r=l.isSome(e.material)?e.material.color:null,n=l.isSome(r)?r.toRgba().toString():null;if(l.isNone(t))return"fill"===e.type&&"255,255,255,1"===n?{color:"#bdc3c7",width:.75}:null;var i=u.pt2px(t.size)||0;return{color:"rgba("+(l.isSome(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(i,80)}}function w(e,t){void 0===t&&(t=1);var r=e.a,n=i.toHSV(e),a=n.h,o=n.s/t,s=100-(100-n.v)/t,l=i.toRGB({h:a,s:o,v:s});return[l.r,l.g,l.b,r]}function L(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function S(e){return"water"===e.type?l.isNone(e.color)?null:e.color:l.isNone(e.material)||l.isNone(e.material.color)?null:e.material.color}function x(e,t){void 0===t&&(t=0);var r=S(e);if(!r){var n=L(p.defaultThematicColor.r,t);return[n,n,n,100]}for(var i=r.toRgba(),a=0;a<3;a++)i[a]=L(i[a],t);return i}function E(e){return e.outline?b(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function P(e,t){var r=S(e);if(!r)return null;var n="rgba(";return n+=L(r.r,t)+",",n+=L(r.g,t)+",",(n+=L(r.b,t)+",")+r.a+");"}function M(e,t){var r=P(e,t);return r?{color:r,width:Math.min(e.size?u.pt2px(e.size):.75,80)}:{}}function A(e,t,r){var n=.75*r;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}t.getSymbolLayerFill=x,t.previewSymbol3D=function(e,t){if(0===e.symbolLayers.length)return c.reject(new o("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));var n=null;switch(e.type){case"point-3d":n=function(e,t){var r,n=t&&t.size?u.pt2px(t.size):null,i=t&&t.maxSize?u.pt2px(t.maxSize):null,o=t&&t.disableUpsampling,s=e.symbolLayers,l=[],p=0,w=0,L=s.getItemAt(s.length-1);return L&&"icon"===L.type&&(r=L.size&&u.pt2px(L.size)),s.forEach((function(s){if("icon"===s.type||"object"===s.type){var g="icon"===s.type?s.size&&u.pt2px(s.size):0,L=n||g?Math.ceil(Math.min(n||g,i||120)):22;if(s&&s.resource&&s.resource.href){var S=function(e,t){var r=t&&t.resource,n=r&&r.href;return e.thumbnail&&e.thumbnail.url?c.resolve(e.thumbnail.url):n&&"object"!==t.type?c.resolve(v.getIconHref(e,t)):e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?m.resolveWebStyleSymbol(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch((function(e){return e})).then((function(e){return e&&e.thumbnail&&e.thumbnail.url||_})):c.resolve(_)}(e,s).then((function(e){var t=s.get("material.color"),r=function(e){return"icon"===e.type?"multiply":"tint"}(s);return f.tintImageWithColor(e,L,t,r,o)})).then((function(e){var t=e.width,r=e.height;return p=Math.max(p,t),w=Math.max(w,r),[{shape:{type:"image",x:0,y:0,width:t,height:r,src:e.url},fill:null,stroke:null}]}));l.push(S)}else{var P=L;"icon"===s.type&&r&&n&&(P=L*(g/r));var M=t&&"tall"===t.symbolConfig||"object"===s.type&&function(e){var t=e.depth,r=e.height,n=e.width;return n&&t&&r&&n===t&&n<r}(s);p=Math.max(p,M?20:P),w=Math.max(w,P),l.push(c.resolve(function(e,t,r){var n=[];if(!e)return n;switch(e.type){case"icon":var i=t,o=t;switch(s=e.resource&&e.resource.primitive||d.defaultPrimitive){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:x(e,0),stroke:b(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[0,0]},{command:"L",values:[i,0]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},fill:x(e,0),stroke:b(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},fill:x(e,0),stroke:b(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[.5*i,o]},{command:"M",values:[0,.5*o]},{command:"L",values:[i,.5*o]}]},stroke:E(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[i,o]},{command:"M",values:[i,0]},{command:"L",values:[0,o]}]},stroke:E(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*o]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,.5*o]},{command:"L",values:[.5*i,o]},{command:"Z",values:[]}]},fill:x(e,0),stroke:b(e)});break;default:a.neverReached(s)}break;case"object":var s;switch(s=e.resource&&e.resource.primitive||h.defaultPrimitive){case"cone":var l=A(x(e,0),x(e,-.6),r?20:t),c=y.getConeShapes(t,r);n.push({shape:c[0],fill:l}),n.push({shape:c[1],fill:l});break;case"inverted-cone":var u=x(e,0),p=A(u,x(e,-.6),t),f=y.getInvertedConeShapes(t);n.push({shape:f[0],fill:p}),n.push({shape:f[1],fill:u});break;case"cube":var m=y.getCubeShapes(t,r);n.push({shape:m[0],fill:x(e,0)}),n.push({shape:m[1],fill:x(e,-.3)}),n.push({shape:m[2],fill:x(e,-.5)});break;case"cylinder":var v=A(x(e,0),x(e,-.6),r?20:t),_=y.getCylinderShapes(t,r);n.push({shape:_[0],fill:v}),n.push({shape:_[1],fill:v}),n.push({shape:_[2],fill:x(e,0)});break;case"diamond":var g=y.getDiamondShapes(t);n.push({shape:g[0],fill:x(e,-.3)}),n.push({shape:g[1],fill:x(e,0)}),n.push({shape:g[2],fill:x(e,-.3)}),n.push({shape:g[3],fill:x(e,-.7)});break;case"sphere":var w=A(x(e,0),x(e,-.6));w.x1=0,w.y1=0,w.x2=.25*t,w.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:w});break;case"tetrahedron":var L=y.getTetrahedronShapes(t);n.push({shape:L[0],fill:x(e,-.3)}),n.push({shape:L[1],fill:x(e,0)}),n.push({shape:L[2],fill:x(e,-.6)});break;default:a.neverReached(s)}}return n}(s,P,M)))}}})),c.eachAlways(l).then((function(e){var r=[];return e.forEach((function(e){e.value?r.push(e.value):e.error&&g.warn("error while building swatchInfo!",e.error)})),f.renderSymbol(r,[p,w],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}(e,t);break;case"line-3d":n=function(e,t){var n,i=e.symbolLayers,a=[],o=v.isVolumetricSymbol(e),s=t&&t.size?u.pt2px(t.size):null,l=(t&&t.maxSize?u.pt2px(t.maxSize):null)||80,p=0,d=0;return i.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var i=[];switch(e.type){case"line":var o=(g=M(e,0))&&g.width||0;0===t&&(n=o);var c=Math.min(s||o,l),u=0===t?c:s?c*(o/n):c,h=u>20?2*u:40;d=Math.max(d,u),p=Math.max(p,h),g.width=u,i.push({shape:{type:"path",path:[{command:"M",values:[0,.5*d]},{command:"L",values:[p,.5*d]}]},stroke:g});break;case"path":var f=Math.min(s||22,l),m=x(e,0),v=x(e,-.2),_=P(e,-.4),g=_?{color:_,width:1}:{};if("quad"===e.profile){var b=e.width||e.size,w=e.height||e.size,L=b&&w?b/w:1,S=y.getPathSymbolShapes(L),E=r.__assign(r.__assign({},g),{join:"bevel"});i.push({shape:S[0],fill:v,stroke:E}),i.push({shape:S[1],fill:v,stroke:E}),i.push({shape:S[2],fill:m,stroke:E})}else i.push({shape:y.shapes.pathSymbol3DLayer[0],fill:v,stroke:g}),i.push({shape:y.shapes.pathSymbol3DLayer[1],fill:m,stroke:g});d=Math.max(d,f),p=d}a.push(i)}})),c.resolve(f.renderSymbol(a,[p,d],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}(e,t);break;case"polygon-3d":case"mesh-3d":n=function(e,t){for(var n="mesh-3d"===e.type,i=e.symbolLayers,a=t&&t.size?u.pt2px(t.size):null,o=t&&t.maxSize?u.pt2px(t.maxSize):null,s=a||22,l=[],p=0,d=0,h=!1,m=0;m<i.length;m++){var v=i.getItemAt(m),_=[];if(!n||"fill"===v.type){var g=y.shapes.fill[0];switch(v.type){case"fill":var L=b(v),E=Math.min(s,o||120);p=Math.max(p,E),d=Math.max(d,E),h=!0,_.push({shape:g,fill:x(v,0),stroke:L});break;case"line":var P={stroke:M(v,0),shape:g};p=Math.max(p,22),d=Math.max(d,22),_.push(P);break;case"extrude":var A=r.__assign({join:"round"},M(v,-.4)),C=x(v,0),I=x(v,-.2),O=Math.min(s,o||120),R=y.getExtrudeSymbolShapes(O);A.width=1,_.push({shape:R[0],fill:I,stroke:A}),_.push({shape:R[1],fill:I,stroke:A}),_.push({shape:R[2],fill:C,stroke:A});var T=22*.7+.5*O;p=Math.max(p,22),d=Math.max(d,T);break;case"water":var k=S(v),N=(C=w(k),w(k,2)),D=w(k,3),V=y.getWaterSymbolShapes();h=!0,_.push({shape:V[0],fill:C}),_.push({shape:V[1],fill:N}),_.push({shape:V[2],fill:D}),E=Math.min(s,o||120),p=Math.max(p,E),d=Math.max(d,E)}l.push(_)}}return c.resolve(f.renderSymbol(l,[p,d],{node:t&&t.node,scale:h,opacity:t&&t.opacity}))}(e,t)}return n||c.reject(new o("symbolPreview: swatchInfo3D","symbol not supported."))}}.apply(null,n))||(e.exports=i)},504:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(396),r(183)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i="esri-relationship-ramp--diamond__middle-column--label",a="esri-relationship-ramp--square__table-row",o="esri-relationship-ramp--square__table-cell",s="esri-relationship-ramp--square__table-label";function l(e,t,r){var n=r+"_arrowStart",i=r+"_arrowEnd",a="left"===e,o={markerStart:null,markerEnd:null};switch(t){case"HL":a?o.markerStart="url(#"+i+")":o.markerEnd="url(#"+n+")";break;case"LL":o.markerStart="url(#"+i+")";break;case"LH":a?o.markerEnd="url(#"+n+")":o.markerStart="url(#"+i+")";break;default:o.markerEnd="url(#"+n+")"}return o}t.renderRelationshipRamp=function(e,t,c){var u=e.focus,p=e.labels,d=!!u,h=function(e,t,i,a){void 0===a&&(a=60);var s=e.focus,c=e.numClasses,u=e.colors,p=e.rotation,d=!!s,h=Math.sqrt(Math.pow(a,2)+Math.pow(a,2))+(d?0:5),y=null;null!=i&&(y="opacity: "+i);for(var f=[],m=[],v=[],_=(a||75)/c,g=0;g<c;g++)for(var b=g*_,w=0;w<c;w++){var L=w*_,S=r.generateFillAttributes(u[g][w]),x=r.generateStrokeAttributes(null),E={type:"rect",x:L,y:b,width:_,height:_};f.push(r.renderDef(S)),m.push(r.renderShape(E,S.fill,x,null)),v.push(r.getBoundingBox(E))}var P=null;d||(P="margin: -15px -15px -18px -15px");var M=l("left",s,t),A=l("right",s,t),C=r.computeBBox(v),I=r.getTransformMatrix(C,h,h,0,!1,p),O=r.getTransformMatrix(C,h,h,0,!1,d?-45:null);return n.tsx("div",{style:y,class:d?"esri-relationship-ramp--diamond__middle-column--ramp":o},n.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:h,height:h,style:P},n.tsx("defs",null,n.tsx("marker",{id:t+"_arrowStart",markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),n.tsx("marker",{id:t+"_arrowEnd",markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),f),n.tsx("g",{transform:I},m),n.tsx("g",{transform:O},n.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":M.markerStart,"marker-end":M.markerEnd,x1:-10,y1:a-15,x2:-10,y2:15}),n.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":A.markerStart,"marker-end":A.markerEnd,x1:15,y1:a+10,x2:a-15,y2:a+10}))))}(e,t,c);return d?n.tsx("div",{class:"esri-relationship-ramp--diamond__container"},n.tsx("div",{class:"esri-relationship-ramp--diamond__left-column"},p.left),n.tsx("div",{class:"esri-relationship-ramp--diamond__middle-column"},n.tsx("div",{class:i},p.top),h,n.tsx("div",{class:i},p.bottom)),n.tsx("div",{class:"esri-relationship-ramp--diamond__right-column"},p.right)):n.tsx("div",{class:"esri-relationship-ramp--square__table"},n.tsx("div",{class:a},n.tsx("div",{class:n.classes(o,s,"esri-relationship-ramp--square__table-label--right-bottom")},p.left),n.tsx("div",{class:o}),n.tsx("div",{class:n.classes(o,s,"esri-relationship-ramp--square__table-label--left-bottom")},p.top)),n.tsx("div",{class:a},n.tsx("div",{class:o}),h,n.tsx("div",{class:o})),n.tsx("div",{class:a},n.tsx("div",{class:n.classes(o,s,"esri-relationship-ramp--square__table-label--right-top")},p.bottom),n.tsx("div",{class:o}),n.tsx("div",{class:n.classes(o,s,"esri-relationship-ramp--square__table-label--left-top")},p.right)))}}.apply(null,n))||(e.exports=i)},505:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(258)],void 0===(i=function(e,t,r){function n(e,t){return!t}Object.defineProperty(t,"__esModule",{value:!0}),t.attachToNode=function(e){e.appendChild(this)},t.getTitle=function(e,t,i){if(t){if("string"==typeof t)return t;if("value"in t||"unit"in t)return r.substitute(e.dotValue,t);if("colorName"in t||"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:null;var a=null;return function(e,t){return t}(0,i)?a=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:n(0,i)&&(a=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),a?r.substitute("showField"===a?"{field}":e[a],{field:t.field,normField:t.normField}):null}},t.isRendererTitle=n,t.isImageryStretchedLegend=function(e,t){return!!(t&&"Stretched"===t&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}}.apply(null,n))||(e.exports=i)},547:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(270),r(151),r(575),r(188),r(183),r(548)],void 0===(i=function(e,t,r,n,i,a,o,s,l){var c="esri-swipe__container",u={handle:!0,divider:!0};return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.direction=null,n.disabled=!1,n.dragLabel=void 0,n.iconClass="esri-icon-up-down-arrows",n.label=void 0,n.leadingLayers=null,n.messages=null,n.position=null,n.trailingLayers=null,n.view=null,n.viewModel=new l,n._pointerOffset=null,n._container=null,n._onContainerPointerDown=n._onContainerPointerDown.bind(n),n._onContainerPointerMove=n._onContainerPointerMove.bind(n),n._onContainerPointerUp=n._onContainerPointerUp.bind(n),n}return r.__extends(t,e),Object.defineProperty(t.prototype,"visibleElements",{get:function(){return this._get("visibleElements")||u},set:function(e){this._set("visibleElements",r.__assign(r.__assign({},u),e))},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e,t=this.viewModel,r=t.state,n=t.direction,i="disabled"===r||this.disabled,a=((e={})["esri-disabled"]=i,e["esri-swipe--disabled"]=i,e["esri-swipe--vertical"]="vertical"===n,e["esri-swipe--horizontal"]="horizontal"===n,e);return s.tsx("div",{class:this.classes("esri-swipe","esri-widget",a)},"disabled"===r?null:this.renderContainer())},t.prototype.renderHandle=function(){var e,t=this.viewModel.direction,r=this.visibleElements,n=((e={})["esri-icon-drag-horizontal"]="vertical"===t,e["esri-icon-drag-vertical"]="horizontal"===t,e),i=this.classes("esri-swipe__handle",!r.handle&&"esri-swipe__handle--hidden");return s.tsx("div",{key:"handle",role:"presentation",class:i},s.tsx("span",{"aria-hidden":"true",class:this.classes("esri-swipe__handle-icon",n)}))},t.prototype.renderDivider=function(){var e=this.visibleElements;return e&&e.divider?s.tsx("div",{key:"divider",role:"presentation",class:"esri-swipe__divider"}):null},t.prototype.renderContent=function(){return[this.renderDivider(),this.renderHandle()]},t.prototype.renderContainer=function(){var e=this.disabled,t=this.dragLabel,r=this.viewModel,n=r.max,i=r.min,a=r.direction,o=r.position,l=o+"%",u={top:"vertical"===a?l:null,left:"vertical"===a?null:l},p=this.renderContent();return e?s.tsx("div",{key:"container",role:"presentation",styles:u,class:c},p):s.tsx("div",{tabIndex:0,key:"container",bind:this,afterCreate:this._afterContainerCreate,onkeydown:this._onContainerKeyDown,"touch-action":"none",role:"slider",title:t,"aria-label":t,"aria-orientation":a,"aria-valuemax":""+n,"aria-valuemin":""+i,"aria-valuenow":""+o,"aria-valuetext":l,styles:u,class:c},p)},t.prototype._afterContainerCreate=function(e){a.applyLocal(e),this._container=e,e.addEventListener("pointerdown",this._onContainerPointerDown)},t.prototype._calculatePointerOffset=function(e){var t=this.direction,r=e.target,n=("vertical"===t?r.clientHeight:r.clientWidth)/2,i=r.getBoundingClientRect(),a=e.clientX-i.left,o=e.clientY-i.top;this._pointerOffset="vertical"===t?o-n:a-n},t.prototype._onContainerPointerDown=function(e){e.preventDefault(),this._container&&document.activeElement!==this.container&&this._container.focus(),this._calculatePointerOffset(e),document.addEventListener("pointerup",this._onContainerPointerUp),document.addEventListener("pointermove",this._onContainerPointerMove)},t.prototype._onContainerPointerUp=function(e){e.preventDefault(),document.removeEventListener("pointerup",this._onContainerPointerUp),document.removeEventListener("pointermove",this._onContainerPointerMove)},t.prototype._onContainerPointerMove=function(e){e.preventDefault();var t=this._pointerOffset,r=this.container,n=this.direction,i=e.clientX,a=e.clientY,o=r.getBoundingClientRect(),s=o.top,l=o.left,c=o.width,u=o.height,p=("vertical"===n?a-s-t:i-l-t)/("vertical"===n?u:c)*100;this.position=p},t.prototype._getKeyPosition=function(e){var t=n.eventKey(e),r=this.position,i=this.viewModel,a=i.max,o=i.min,s=i.step,l=i.stepMultiplier,c=i.direction,u=s*l;return["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(t)>-1&&(e.preventDefault(),e.stopPropagation()),("vertical"===c?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t)?r+(e.shiftKey?u:s):("vertical"===c?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t)?r-(e.shiftKey?u:s):"Home"===t?o:"End"===t?a:("vertical"===c?"PageDown"===t:"PageUp"===t)?r+u:("vertical"===c?"PageUp"===t:"PageDown"===t)?r-u:null},t.prototype._onContainerKeyDown=function(e){var t=this._getKeyPosition(e);"number"==typeof t&&(this.position=t)},r.__decorate([i.aliasOf("viewModel.direction")],t.prototype,"direction",void 0),r.__decorate([i.property(),s.renderable()],t.prototype,"disabled",void 0),r.__decorate([i.property({aliasOf:{source:"messages.dragLabel",overridable:!0}}),s.renderable()],t.prototype,"dragLabel",void 0),r.__decorate([i.property()],t.prototype,"iconClass",void 0),r.__decorate([i.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),r.__decorate([i.aliasOf("viewModel.leadingLayers")],t.prototype,"leadingLayers",void 0),r.__decorate([i.property(),s.renderable(),s.messageBundle("esri/widgets/Swipe/t9n/Swipe")],t.prototype,"messages",void 0),r.__decorate([i.aliasOf("viewModel.position")],t.prototype,"position",void 0),r.__decorate([i.aliasOf("viewModel.trailingLayers")],t.prototype,"trailingLayers",void 0),r.__decorate([i.aliasOf("viewModel.view"),s.renderable()],t.prototype,"view",void 0),r.__decorate([i.property({type:l}),s.renderable(["viewModel.state","viewModel.position","viewModel.direction"])],t.prototype,"viewModel",void 0),r.__decorate([i.property(),s.renderable()],t.prototype,"visibleElements",null),r.__decorate([i.subclass("esri.widgets.Swipe")],t)}(o)}.apply(null,n))||(e.exports=i)},548:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(158),r(169),r(177),r(167),r(157),r(151),r(208),r(209)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c,u){var p=i.ofType(c),d={left:0,right:0,top:0,bottom:0};return function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new o,r._leadingClips=new Map,r._trailingClips=new Map,r.direction="horizontal",r.leadingLayers=new p,r.max=100,r.min=0,r.precision=4,r.step=.5,r.stepMultiplier=10,r.trailingLayers=new p,r.view=null,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([s.init(this,["view","view.ready","position","direction"],(function(){return e._clipLayers()})),s.on(this,"leadingLayers","change",(function(){return e._clipLeadingLayers()})),s.on(this,"trailingLayers","change",(function(){return e._clipTrailingLayers()}))])},t.prototype.destroy=function(){this._removeExistingClips(),this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"position",{get:function(){return 25},set:function(e){var t=this.precision,r=this.min,n=this.max;this._set("position",function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}(Math.max(Math.min(e,n),r),t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var e=this.view;return e&&e.ready?"ready":"disabled"},enumerable:!0,configurable:!0}),t.prototype._clipLayers=function(){this._clipLeadingLayers(),this._clipTrailingLayers()},t.prototype._clipLeadingLayers=function(){var e=this;this._removeClips("leading"),this.leadingLayers.forEach((function(t){return e._clipLayer({layer:t,type:"leading"})}))},t.prototype._clipTrailingLayers=function(){var e=this;this._removeClips("trailing"),this.trailingLayers.forEach((function(t){return e._clipLayer({layer:t,type:"trailing"})}))},t.prototype._getLayerView=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.view,e&&t?[4,a.typeCast(t)().whenLayerView(e)]:[2,null];case 1:return"clips"in(n=r.sent())?[2,n]:[2,null]}}))}))},t.prototype._getVerticalClipRect=function(e){var t=this.position;return"leading"===e?new u(r.__assign(r.__assign({},d),{bottom:100-t+"%"})):"trailing"===e?new u(r.__assign(r.__assign({},d),{top:t+"%"})):null},t.prototype._getHorizontalClipRect=function(e){var t=this.position;return"leading"===e?new u(r.__assign(r.__assign({},d),{right:100-t+"%"})):"trailing"===e?new u(r.__assign(r.__assign({},d),{left:t+"%"})):null},t.prototype._getClipRect=function(e){var t=this.direction;return"vertical"===t?this._getVerticalClipRect(e):"horizontal"===t?this._getHorizontalClipRect(e):null},t.prototype._clipLayer=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o,s,l,c,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=(t=this)._leadingClips,i=t._trailingClips,a=e.layer,o=e.type,s="trailing"===o?i:"leading"===o?n:null,[4,this._getLayerView(a)];case 1:return(l=r.sent())&&"clips"in l&&s&&l.hasOwnProperty("clips")?((c=s.get(l))&&l.clips.remove(c),(u=this._getClipRect(o))&&(s.set(l,u),l.clips.add(u)),[2]):[2]}}))}))},t.prototype._removeClips=function(e){var t=this._leadingClips,r=this._trailingClips,n="trailing"===e?r:"leading"===e?t:null;n&&(n.forEach((function(e,t){t&&t.hasOwnProperty("clips")&&t.clips.remove(e)})),n.clear())},t.prototype._removeExistingClips=function(){this._removeClips("leading"),this._removeClips("trailing")},r.__decorate([l.property()],t.prototype,"direction",void 0),r.__decorate([l.property({type:p})],t.prototype,"leadingLayers",void 0),r.__decorate([l.property({readOnly:!0})],t.prototype,"max",void 0),r.__decorate([l.property({readOnly:!0})],t.prototype,"min",void 0),r.__decorate([l.property()],t.prototype,"position",null),r.__decorate([l.property()],t.prototype,"precision",void 0),r.__decorate([l.property({dependsOn:["view.ready"],readOnly:!0})],t.prototype,"state",null),r.__decorate([l.property()],t.prototype,"step",void 0),r.__decorate([l.property()],t.prototype,"stepMultiplier",void 0),r.__decorate([l.property({type:p})],t.prototype,"trailingLayers",void 0),r.__decorate([l.property()],t.prototype,"view",void 0),r.__decorate([l.subclass("esri.widgets.Swipe.SwipeViewModel")],t)}(n)}.apply(null,n))||(e.exports=i)},668:function(e,t,r){"use strict";var n=r(167),i=r.n(n),a=r(669),o=r.n(a),s=r(291),l=r(232),c=r.n(l),u=r(157),p=o.a.createSubclass({constructor:function(){this.tileContexts=new window.Map,this.watchHandles=new i.a,this.needsImageUpdate=!1},attach:function(){var e=s.load(),t=this,r=t.layer;this.watchHandles.add([u.init(this,"layer.geometry",(function(){if(!r.geometry)return t.projectedGeometry=null,t.needsImageUpdate=!0,void t.requestRender();e.then((function(){t.projectedGeometry=s.project(r.geometry,r.tileInfo.spatialReference,s.getTransformation(r.geometry.spatialReference,r.tileInfo.spatialReference)),t.needsImageUpdate=!0,t.requestRender()}))})),u.init(this,"layer.distance",(function(){t.needsImageUpdate=!0,t.requestRender()})),u.init(this,"layer.color",(function(){t.needsImageUpdate=!0,t.requestRender()}))])},drawGeometry:function(e,t){e.globalCompositeOperation="source-over";var r=e.canvas.width,n=e.canvas.height;if(this.projectedGeometry){if(0!==this.layer.distance){var i=this.layer.color;e.fillStyle="rgba("+i[0]+", "+i[1]+", "+i[2]+", "+(i[3]||.75)+")",e.fillRect(0,0,r,n);var a=3/this.layer.distance;if(e.globalCompositeOperation="destination-out","polygon"===this.projectedGeometry.type||"polyline"===this.projectedGeometry.type||"extent"===this.projectedGeometry.type){var o=("extent"===this.projectedGeometry.type?c.a.fromExtent(this.projectedGeometry).rings:this.projectedGeometry.rings||this.projectedGeometry.paths).map((function(e){return e.map((function(e){return[Math.round(r*(e[0]-t[0])/(t[2]-t[0])),Math.round(n*(1-(e[1]-t[1])/(t[3]-t[1])))]}))}));e.lineJoin="round";for(var s=1;s<=this.layer.distance;++s){e.strokeStyle="rgba(0, 0, 0, "+a+")",e.lineWidth=this.layer.distance+1-s;for(var l=0;l<o.length;++l){var u=o[l];e.beginPath(),e.moveTo(u[0][0],u[0][1]);for(var p=1;p<u.length;++p)e.lineTo(u[p][0],u[p][1]);"polyline"!==this.projectedGeometry.type&&e.closePath(),e.stroke()}}if("polyline"!==this.projectedGeometry.type){e.fillStyle="rgba(0, 0, 0, 1)";for(l=0;l<o.length;++l){u=o[l];e.beginPath(),e.moveTo(u[0][0],u[0][1]);for(p=1;p<u.length;++p)e.lineTo(u[p][0],u[p][1]);e.closePath(),e.fill()}}}else if("point"===this.projectedGeometry.type||"multipoint"===this.projectedGeometry.type)for(o=("multipoint"===this.projectedGeometry.type?this.projectedGeometry.points:[[this.projectedGeometry.x,this.projectedGeometry.y]]).map((function(e){return[Math.round(r*(e[0]-t[0])/(t[2]-t[0])),Math.round(n*(1-(e[1]-t[1])/(t[3]-t[1])))]})),s=1;s<=this.layer.distance;++s){var d=this.layer.distance+1-s;e.fillStyle="rgba(0, 0, 0, "+a+")";for(l=0;l<o.length;++l){var h=o[l];e.beginPath(),e.arc(h[0],h[1],Math.round(d/2),0,360),e.fill()}}}}else e.clearRect(0,0,r,n)},manageTileImages:function(){this.context;for(var e=new Set,t=0;t<this.tiles.length;++t){var r=this.tiles[t];e.add(r.id);var n=this.tileContexts.get(r.id);if(n)this.needsImageUpdate&&this.drawGeometry(n,r.bounds);else{var i=document.createElement("canvas");i.width=this.layer.tileInfo.size[0],i.height=this.layer.tileInfo.size[1],n=i.getContext("2d"),this.tileContexts.set(r.id,n),this.drawGeometry(n,r.bounds)}}this.tileContexts.forEach(function(t,r){e.has(r)||this.tileContexts.delete(r)}.bind(this)),this.needsImageUpdate=!1},render:function(e){this.manageTileImages();var t=this.layer.tileInfo.size[0],r=e.state,n=r.pixelRatio,i=r.size[0],a=r.size[1],o=e.context,s=[0,0];o.clearRect(0,0,i*n,a*n),0!==r.rotation&&(o.translate(i*n*.5,a*n*.5),o.rotate(r.rotation*Math.PI/180),o.translate(-i*n*.5,-a*n*.5)),o.globalAlpha=this.layer.color[3];for(var l=0;l<this.tiles.length;++l){var c=this.tiles[l],u=this.tileContexts.get(c.id),p=c.resolution/r.resolution*n;r.toScreenNoRotation(s,c.coords),o.drawImage(u.canvas,s[0],s[1],t*p,t*p)}},detach:function(){this.watchHandles.removeAll()},tilesChanged:function(){}});t.a=p},669:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(151),r(173),r(585),r(219),r(675),r(218),r(285)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c){var u=new Set,p=[],d=[],h=function(e,t,r,n,a,o,s,l,c){void 0===l&&(l=[0,0]),void 0===c&&(c=i.create()),this.id=e,this.level=t,this.row=r,this.col=n,this.world=a,this.resolution=o,this.scale=s,this.coords=l,this.bounds=c};return function(e){function t(t){var r=e.call(this,t)||this;return r._tileMap=new Map,r.container=new s.default(r),r.layer=null,r.tiles=[],r}return r.__extends(t,e),Object.defineProperty(t.prototype,"_tileInfoView",{get:function(){var e=this.layer&&this.layer.tileInfo;return e?new a.TileInfoView(e):null},enumerable:!0,configurable:!0}),t.prototype.attach=function(){},t.prototype.detach=function(){},t.prototype.requestRender=function(){this.container.requestRender()},t.prototype.tilesChanged=function(e,t){},t.prototype.doRefresh=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2]}))}))},t.prototype.isUpdating=function(){return!1},t.prototype.update=function(e){var t=this._tileInfoView,r=this.tiles;if(t){var n=t.getTileCoverage(e.state,0),i=n.spans,a=n.lodInfo,o=a.level;if(i.length)for(var s=0,l=i;s<l.length;s++)for(var c=l[s],y=c.row,f=c.colFrom,m=c.colTo,v=f;v<=m;v++){var _=a.normalizeCol(v),g=a.getWorldForColumn(v),b=o+"/"+y+"/"+_+"/"+g;if(!this._tileMap.has(b)){var w=new h(b,o,y,_,g,a.resolution,a.scale);a.getTileCoords(w.coords,w,!1),a.getTileBounds(w.bounds,w,!0),this._tileMap.set(b,w),r.push(w),p.push(w)}u.add(b)}}for(var L=r.length-1;L>=0;L--)w=r[L],u.has(w.id)||(r.splice(L,1),d.push(w),this._tileMap.delete(w.id));(p.length||d.length)&&(this.tilesChanged(p,d),p.length=d.length=0),u.clear(),this.requestRender()},t.prototype.moveStart=function(){},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){},r.__decorate([n.property({dependsOn:["layer.loaded"]})],t.prototype,"_tileInfoView",null),r.__decorate([n.property()],t.prototype,"layer",void 0),r.__decorate([n.subclass("esri.views.2d.layers.BaseLayerView2D")],t)}(c.RefreshableLayerView(o.LayerView2DMixin(l)))}.apply(null,n))||(e.exports=i)},675:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(186),r(544)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this)||this;return r.requestRender=r.requestRender.bind(r),r._layerView=t,r._canvas=document.createElement("canvas"),r._context=r._canvas.getContext("2d"),r._bitmap=new n.Bitmap(null,!1),r.addChild(r._bitmap),r}return r.__extends(t,e),t.prototype.doRender=function(t){var n=t.state,i=this._createCustomRenderParams(t),a=this._canvas,o=this._bitmap,s=window.devicePixelRatio;a.width=n.size[0]*s,a.height=n.size[1]*s,o.resolution=n.resolution;var l=n.clone();l.pixelRatio=s,o.pixelRatio=s,i.state=l,o.x=n.viewpoint.targetGeometry.x-n.extent.width/2,o.y=n.viewpoint.targetGeometry.y+n.extent.height/2,this._layerView.render(i),o.source=a,o.rotation=n.rotation,e.prototype.doRender.call(this,r.__assign(r.__assign({},t),{state:l}))},t.prototype._createCustomRenderParams=function(e){return{globalOpacity:e.globalOpacity,state:e.state,stationary:e.stationary,pixelRatio:window.devicePixelRatio,context:this._context}},t}(i.BitmapContainer);t.Display=a,t.default=a}.apply(null,n))||(e.exports=i)},676:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(258),r(158),r(169),r(167),r(157),r(151),r(677)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c){var u="state",p="all-layer-views",d="legend-properties",h=a.ofType(c),y=["esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer"],f=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];return function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new o,r._layerViewByLayerId={},r._layerInfosByLayerViewId={},r._activeLayerInfosByLayerViewId={},r.activeLayerInfos=new h,r.basemapLegendVisible=!1,r.groundLegendVisible=!1,r.keepCacheOnDestroy=!1,r.respectLayerVisibility=!0,r.layerInfos=[],r.view=null,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(s.init(this,"view",this._viewHandles),"view"),this._handles.add(n.onLocaleChange((function(){return e._refresh()})))},t.prototype.destroy=function(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null},Object.defineProperty(t.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),t.prototype._viewHandles=function(){this._handles.remove(u),this.view&&this._handles.add(s.init(this,"state",this._stateHandles),u)},t.prototype._stateHandles=function(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()},t.prototype._resetAll=function(){this._handles.remove([p,d]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()},t.prototype._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)},t.prototype._destroyViewActiveLayerInfo=function(e){this._handles.remove(e);var t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)},t.prototype._watchPropertiesAndAllLayerViews=function(){var e=this.view.allLayerViews;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),p),this._handles.add(s.watch(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),d)},t.prototype._allLayerViewsChangeHandle=function(e){var t=this;e.removed.forEach((function(e){return t._destroyViewActiveLayerInfo(e.uid)})),this._refresh()},t.prototype._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos(),this._refresh()},t.prototype._refresh=function(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)},t.prototype._sortActiveLayerInfos=function(e){var t=this;if(!(e.length<2)){var r=[];e.forEach((function(n){if(!n.parent){var i=n.layer.parent,a=i&&"uid"in i&&t._layerViewByLayerId[i.uid],o=a&&t._activeLayerInfosByLayerViewId[a.uid];o&&-1!==e.indexOf(o)&&(r.push(n),n.parent=o,o.children.add(n),t._sortActiveLayerInfos(o.children))}})),e.removeMany(r);var n={};this.view.allLayerViews.forEach((function(e,t){return n[e.layer.uid]=t})),e.sort((function(e,t){var r=n[e.layer.uid]||0;return(n[t.layer.uid]||0)-r}))}},t.prototype._generateLayerViews=function(){var e=[];return f.filter(this._filterLayerViews,this).map(this.get,this).filter((function(e){return null!=e})).forEach(this._collectLayerViews("layerViews",e)),e},t.prototype._filterLayerViews=function(e){var t=!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===e||"view.basemapView.referenceLayerViews"===e),r=!this.groundLegendVisible&&"view.groundView.layerViews"===e;return!t&&!r},t.prototype._collectLayerViews=function(e,t){var r=function(n){return n&&n.forEach((function(n){t.push(n),r(n[e])})),t};return r},t.prototype._filterLayerViewsByLayerInfos=function(e){var t=this,r=this.layerInfos;return!r||!r.length||r.some((function(r){return t._hasLayerInfo(r,e)}))},t.prototype._hasLayerInfo=function(e,t){var r=this._isLayerUIDMatching(e.layer,t.layer.uid);return r&&(this._layerInfosByLayerViewId[t.uid]=e),r},t.prototype._isLayerUIDMatching=function(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))},t.prototype._hasLayerUID=function(e,t){var r=this;return e&&e.some((function(e){return r._isLayerUIDMatching(e,t)}))},t.prototype._isLayerViewSupported=function(e){return y.indexOf(e.layer.declaredClass)>-1&&(this._layerViewByLayerId[e.layer.uid]=e,!0)},t.prototype._generateActiveLayerInfo=function(e){var t=this;this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(s.watch(e,"suspended, layer.legendEnabled",(function(){return t._layerActiveHandle(e)})),e.uid))},t.prototype._layerActiveHandle=function(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))},t.prototype._isLayerActive=function(e){return!this.respectLayerVisibility||!e.suspended&&e.get("layer.legendEnabled")},t.prototype._buildActiveLayerInfo=function(e){var t=this,r=e.layer,n=e.uid,i=this._layerInfosByLayerViewId[n],a=this._activeLayerInfosByLayerViewId[n];if(!a){var o=i&&void 0!==i.title;a=new c({layer:r,layerView:e,title:o?i.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:i&&i.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[n]=a}if(!a.parent){var l=r.parent,u=l&&this._layerViewByLayerId[l.uid];a.parent=u&&this._activeLayerInfosByLayerViewId[u.uid]}if(!this._handles.has(n)){var p=[s.watch(r,"title",(function(r){return t._titleHandle(r,a,e)})),s.watch(r,"renderer?, opacity",(function(){return t._constructLegendElements(a,e)})),s.whenTrue(this.view,"stationary",(function(){return t._scaleHandle(a,e)})),s.watch(e,"_effectiveRenderer",(function(){return t._constructLegendElements(a,e)}))];if(this.respectLayerVisibility){var d=s.watch(e,"suspended",(function(r){return t._suspendedHandle(r,a,e)})),h=s.watch(r,"legendEnabled",(function(r){return t._legendEnabledHandle(r,a,e)}));p.push(d,h)}this._handles.add(p,n)}a.isScaleDriven||this._constructLegendElements(a,e),this._addActiveLayerInfo(a,e)},t.prototype._titleHandle=function(e,t,r){t.title=e,this._constructLegendElements(t,r)},t.prototype._legendEnabledHandle=function(e,t,r){e?this._addActiveLayerInfo(t,r):this._removeActiveLayerInfo(t)},t.prototype._suspendedHandle=function(e,t,r){e?this._removeActiveLayerInfo(t):this._addActiveLayerInfo(t,r)},t.prototype._scaleHandle=function(e,t){e.isScaleDriven&&this._constructLegendElements(e,t)},t.prototype._addActiveLayerInfo=function(e,t){if(this._isLayerActive(t)&&-1===this.activeLayerInfos.indexOf(e)){var r=e.parent;r?(-1===r.children.indexOf(e)&&r.children.push(e),this._sortActiveLayerInfos(r.children)):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}},t.prototype._removeActiveLayerInfo=function(e){var t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)},t.prototype._constructLegendElements=function(e,t){var r=t.layer;r.featureCollections?e.buildLegendElementsForFeatureCollections(r.featureCollections):r.renderer?e.buildLegendElementsForRenderer(r.renderer):r.url&&e.buildLegendElementsForTools()},r.__decorate([l.property({type:h})],t.prototype,"activeLayerInfos",void 0),r.__decorate([l.property()],t.prototype,"basemapLegendVisible",void 0),r.__decorate([l.property()],t.prototype,"groundLegendVisible",void 0),r.__decorate([l.property()],t.prototype,"keepCacheOnDestroy",void 0),r.__decorate([l.property()],t.prototype,"respectLayerVisibility",void 0),r.__decorate([l.property()],t.prototype,"layerInfos",void 0),r.__decorate([l.property({dependsOn:["view.ready"],readOnly:!0})],t.prototype,"state",null),r.__decorate([l.property()],t.prototype,"view",void 0),r.__decorate([l.subclass("esri.widgets.Legend.LegendViewModel")],t)}(i)}.apply(null,n))||(e.exports=i)},677:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(182),r(165),r(239),r(158),r(180),r(169),r(167),r(156),r(152),r(153),r(172),r(157),r(151),r(378),r(191),r(316),r(781),r(678),r(357),r(266),r(682),r(683),r(684),r(685),r(686),r(397),r(161)],void 0===(i=function(e,t,n,i,a,o,s,l,c,u,p,d,h,y,f,m,v,_,g,b,w,L,S,x,E,P,M,A,C){var I=p.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),O=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,R=new o.SimpleMarkerSymbol({size:6,outline:{color:[128,128,128,.5],width:.5}}),T=new o.SimpleFillSymbol({style:"solid"});function k(e){return"raster-colormap"===e.type}function N(e){return"raster-stretch"===e.type}function D(e){return"raster-shaded-relief"===e.type}function V(e){return"esri.renderers.SimpleRenderer"===e.declaredClass}function F(e){return"esri.renderers.ClassBreaksRenderer"===e.declaredClass}function j(e){return"esri.renderers.UniqueValueRenderer"===e.declaredClass}function z(e){return"esri.renderers.HeatmapRenderer"===e.declaredClass}function G(e){return"esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function U(e){return"esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function B(e){return"esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function H(e){return"esri.renderers.DotDensityRenderer"===e.declaredClass}function q(e){return"esri.layers.MapImageLayer"===e.declaredClass}function Z(e){return"esri.layers.ImageryLayer"===e.declaredClass}var W=new o.SimpleMarkerSymbol({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}}),Y={};return function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new u,r._hasColorRamp=!1,r._hasOpacityRamp=!1,r._hasSizeRamp=!1,r._webStyleSymbolCache=new Map,r._dotDensityUrlCache=new Map,r._scaleDrivenSizeVariable=null,r._hasClusterSizeVariable=!1,r.children=new c,r.layerView=null,r.layer=null,r.legendElements=[],r.parent=null,r.keepCacheOnDestroy=!1,r.respectLayerVisibility=!0,r.sublayerIds=[],r.title=null,r.view=null,r}return n.__extends(t,e),t.prototype.initialize=function(){var e=this,t=function(){return e.notifyChange("ready")};this._handles.add([f.on(this,"children","change",(function(r){var n=r.added,i=r.removed,a=e._handles;n.map((function(e){var r="activeLayerInfo-ready-watcher-"+e.layer.uid;a.add(f.init(e,"ready",t),r)})),i.forEach((function(e){return a.remove(e.layer.uid)})),t()}))]),this.keepCacheOnDestroy||(Y={})},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Y=null)},Object.defineProperty(t.prototype,"ready",{get:function(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.view&&this.view.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isScaleDriven",{get:function(){var e=this,t=this.layer;if(null===t)return!1;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type)return!0;if("renderer"in t&&t.renderer){if("dot-density"===t.renderer.type)return!0;var r=t.get("renderer.valueExpression");if(O.test(r))return!0;var n=t.get("renderer.visualVariables");if(n)return n.some((function(t){return e._isScaleDrivenSizeVariable(t)}))}return this._isLayerScaleDriven(this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._get("version")+1},enumerable:!0,configurable:!0}),t.prototype.buildLegendElementsForFeatureCollections=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r=this;return n.__generator(this,(function(n){return this.legendElements=[],t=e.map((function(e){if("esri.layers.FeatureLayer"===e.declaredClass)return r._buildRendererLegendElements(e.renderer,{title:e.title,mode:0});if(e.featureSet&&e.featureSet.features.length){var t=e.layerDefinition,n=t&&t.drawingInfo,i=n&&g.fromJSON(n.renderer);return i?r._buildRendererLegendElements(i,{title:e.name,mode:0}):(I.warn("drawingInfo not available!"),null)}return null})),[2,h.eachAlways(t).then((function(){}))]}))}))},t.prototype.buildLegendElementsForRenderer=function(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,this._buildRendererLegendElements(e)]}))}))},t.prototype.buildLegendElementsForTools=function(){return n.__awaiter(this,void 0,void 0,(function(){var e,t=this;return n.__generator(this,(function(r){switch(r.label){case 0:return function(e){return"esri.layers.WMTSLayer"===e.declaredClass}(e=this.layer)?(this._constructLegendElementsForWMTSlayer(),[3,6]):[3,1];case 1:return function(e){return"esri.layers.WMSLayer"===e.declaredClass}(e)?(this._constructLegendElementsForWMSSublayers(),[3,6]):[3,2];case 2:return q(e)||function(e){return"esri.layers.TileLayer"===e.declaredClass}(e)?[4,this._constructLegendElementsForSublayers()]:[3,4];case 3:return r.sent(),[3,6];case 4:return this._handles.remove("imageryLayers-watcher"),[4,this._getLegendLayers().then((function(r){t.legendElements=[],r.forEach((function(r){if(Z(e)){var n=e.watch("renderingRule, bandIds",(function(){Y.default=null,t.buildLegendElementsForTools()}));t._handles.add(n,"imageryLayers-watcher")}var i=t._generateSymbolTableElementForLegendLayer(r);i&&i.infos.length&&(Z(e)&&(i.title=e.title),t.legendElements.push(i)),t.notifyChange("ready")})),t.notifyChange("ready")})).catch((function(e){I.warn("Request to server for legend has failed!",e)}))];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))},t.prototype._isGroupActive=function(){var e=this.children;return!!e.length&&e.some((function(e){return e.ready}))},t.prototype._isScaleDrivenSizeVariable=function(e){if(e&&"size"!==e.type)return!1;var t=e,r=t.minSize,n=t.maxSize;return"object"==typeof r&&r?this._isScaleDrivenSizeVariable(r):"object"==typeof n&&n?this._isScaleDrivenSizeVariable(n):!!t.expression||O.test(t.valueExpression)},t.prototype._isLayerScaleDriven=function(e){var t=this;if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((function(e){return t._isLayerScaleDriven(e)}));var r=e.parent;if(!1===e.loaded&&q(r)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(var n=0,i=r.sourceJSON.layers;n<i.length;n++){var a=i[n];if(a.id===e.source.mapLayerId&&(a.minScale>0||a.maxScale>0))return!0}return!1},t.prototype._buildRendererLegendElements=function(e,t){return void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){var r,i;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._getRendererLegendElements(e,{title:t.title})];case 1:return r=n.sent(),0===t.mode?Array.prototype.push.apply(this.legendElements,r):this.legendElements=r,this.notifyChange("ready"),[3,3];case 2:return i=n.sent(),I.warn("error while building legend for layer!",i),[3,3];case 3:return[2]}}))}))},t.prototype._constructLegendElementsForWMTSlayer=function(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");var e=this.layer,t=e.activeLayer;if(this._handles.add(f.watch(this.layer,"activeLayer",this._constructLegendElementsForWMTSlayer.bind(this)),"wmts-activeLayer-watcher"),t.styleId&&t.styles){var r=null;t.styles.some((function(e){return t.styleId===e.id&&(r=e.legendUrl,!0)})),r&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:r,opacity:e.opacity}]}])}this.notifyChange("ready")},t.prototype._constructLegendElementsForWMSSublayers=function(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");var e=this.layer,t=null;(e.customParameters||e.customLayerParameters)&&(t=n.__assign(n.__assign({},e.customParameters),e.customLayerParameters)),this._handles.add(f.watch(this.layer,"sublayers",this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher"),this.legendElements=this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")},t.prototype._generateLegendElementsForWMSSublayers=function(e,t){var r=this,n=[];return this._handles.add(e.on("change",this._constructLegendElementsForWMSSublayers.bind(this)),"wms-sublayers-watcher"),e.forEach((function(e){var i=e.watch("title, visible, legendEnabled",(function(){return r._constructLegendElementsForWMSSublayers()}));if(r._handles.add(i,"wms-sublayers-watcher"),e.visible&&e.legendEnabled){var a=r._generateSymbolTableElementForWMSSublayer(e,t);a&&a.infos.length&&n.unshift(a)}})),n},t.prototype._generateSymbolTableElementForWMSSublayer=function(e,t){if(!e.legendUrl&&e.sublayers){var r=this._generateLegendElementsForWMSSublayers(e.sublayers,t).filter((function(e){return e}));return{type:"symbol-table",title:e.title,infos:r}}return this._generateSymbolTableElementForLegendUrl(e,t)},t.prototype._generateSymbolTableElementForLegendUrl=function(e,t){var r=e.legendUrl;if(r){var n={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};return t&&(r+="?"+y.objectToQuery(t)),n.infos.push({src:r,opacity:e.layer&&e.layer.opacity}),n}},t.prototype._getLegendLayers=function(e){var t=e&&e.hasDynamicLayers?e.dynamicLayers:null,r=t||"default",n=Y&&Y[r];return n?h.resolve(n):this._legendRequest(t).then((function(e){var t=e.layers;return Y[r]=t,t}))},t.prototype._legendRequest=function(e){var t=this.layer,r={f:"json",dynamicLayers:e};if(Z(t)){var i=t;if(i.renderingRule&&(r.renderingRule=JSON.stringify(i.renderingRule.toJSON())),i.bandIds&&(r.bandIds=i.bandIds.join()),i.raster||i.viewId){var o=i.raster,s=i.viewId;r=n.__assign({raster:o,viewId:s},r)}}var l=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){var c=l.indexOf("?");c>-1?l=l.substring(0,c)+"/legend"+l.substring(c):l+="/legend"}else{var u=l.toLowerCase().indexOf("/rest/"),p=l.substring(0,u)+l.substring(u+5,l.length);l="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(p)+"&returnbytes=true"}return a(l,{query:r}).then((function(e){return e.data}))},t.prototype._constructLegendElementsForSublayers=function(){return n.__awaiter(this,void 0,void 0,(function(){var e,t,r;return n.__generator(this,(function(n){switch(n.label){case 0:this.legendElements=[],this._handles.remove("sublayers-watcher"),e=this.layer,this._handles.add(f.watch(e,"sublayers",this._constructLegendElementsForSublayers.bind(this)),"sublayers-watcher"),n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,this._generateLegendElementsForSublayers(e.sublayers,e.opacity)];case 2:return t.legendElements=n.sent(),this.notifyChange("ready"),[3,4];case 3:return r=n.sent(),I.warn("Request to server for legend has failed!",r),[3,4];case 4:return[2]}}))}))},t.prototype._generateLegendElementsForSublayers=function(e,t,r){return n.__awaiter(this,void 0,void 0,(function(){var i,a,o,s,l,c,u,p,d,h,y,f=this;return n.__generator(this,(function(n){switch(n.label){case 0:i=[],this._handles.add(e.on("change",this._constructLegendElementsForSublayers.bind(this)),"sublayers-watcher"),a=e.toArray(),!r&&this.sublayerIds&&this.sublayerIds.length&&(o=this.layer,a=this.sublayerIds.map((function(e){return o.findSublayerById(e)})).filter(Boolean)),s=0,l=a,n.label=1;case 1:return s<l.length?(c=l[s],u=c.watch("renderer, opacity, title, visible, legendEnabled",(function(){return f._constructLegendElementsForSublayers()})),this._handles.add(u,"sublayers-watcher"),c.visible&&c.legendEnabled?(p=c&&null!=c.opacity?c.opacity:null,d=null!=p?p*t:t,!c.renderer||c.sublayers?[3,5]:this.respectLayerVisibility&&!this._isSublayerInScale(c)?[3,4]:[4,c.load()]):[3,7]):[3,8];case 2:return n.sent(),[4,this._getRendererLegendElements(c.renderer,{title:c.title,opacity:d,sublayer:c})];case 3:h=n.sent(),Array.prototype.unshift.apply(i,h),n.label=4;case 4:return[3,7];case 5:return[4,this._generateSymbolTableElementForSublayer(c,d,r)];case 6:(y=n.sent())&&i.unshift(y),n.label=7;case 7:return s++,[3,1];case 8:return[2,i.filter((function(e){return!!e&&(!("infos"in e)||e.infos.length>0)}))]}}))}))},t.prototype._generateSymbolTableElementForSublayer=function(e,t,r){return n.__awaiter(this,void 0,void 0,(function(){var i,a,o;return n.__generator(this,(function(n){switch(n.label){case 0:if(r)return[3,4];r=new Map,i=new v.ExportImageParameters({layer:this.layer}),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this._getLegendLayers(i)];case 2:return n.sent().forEach((function(e){return r.set(e.layerId,e)})),[3,4];case 3:return i.destroy(),[7];case 4:return(a=r.get(e.id))||!e.sublayers?[3,6]:[4,this._generateLegendElementsForSublayers(e.sublayers,t,r)];case 5:return o=n.sent(),[2,{type:"symbol-table",title:e.title,infos:o}];case 6:return[2,this._generateSymbolTableElementForLegendLayer(a,e,t)]}}))}))},t.prototype._generateSymbolTableElementForLegendLayer=function(e,t,r){var n=this;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;var i=t&&t.renderer,a=t&&t.title||e.layerName;if(i){var o=t&&t.title||this._getRendererTitle(i,t);o&&(a&&(o.title=a),a=o)}var s={type:"symbol-table",title:a,infos:[]};e.legendType&&(s.legendType=e.legendType);var l=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return s.infos=l.map((function(t){var i=t.url;if(t.imageData&&t.imageData.length>0)i="data:image/png;base64,"+t.imageData;else{if(0===i.indexOf("http"))return null;i=y.addTokenParameter(n.layer.url+"/"+e.layerId+"/images/"+i)}return{label:t.label,src:i,opacity:null==r?n.layer.opacity:r,width:t.width,height:t.height}})).filter((function(e){return!!e})),s.infos.length?s:null},t.prototype._isSublayerInScale=function(e){var t=e.minScale||0,r=e.maxScale||0;return!(t>0&&t<this.scale||r>this.scale)},t.prototype._isLegendLayerInScale=function(e,t){var r=t||this.layer,n=null,i=null,a=!0;return!r.minScale&&0!==r.minScale||!r.maxScale&&0!==r.maxScale?(0===e.minScale&&r.tileInfo&&(n=r.tileInfo.lods[0].scale),0===e.maxScale&&r.tileInfo&&(i=r.tileInfo.lods[r.tileInfo.lods.length-1].scale)):(n=Math.min(r.minScale,e.minScale)||r.minScale||e.minScale,i=Math.max(r.maxScale,e.maxScale)),(n>0&&n<this.scale||i>this.scale)&&(a=!1),a},t.prototype._sanitizeLegendForSublayer=function(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;var r=t.renderer,n=e.some((function(e){return e.values})),i=null,a=null;return n&&e.some((function(e,t){return e.values||(i=t,(a=e).label||(a.label="others")),null!=a})),r?"unique-value"===r.type?a&&(e.splice(i,1),e.push(a)):"class-breaks"===r.type&&(a&&e.splice(i,1),e.reverse(),a&&e.push(a)):a&&(e.splice(i,1),e.push(a)),e},t.prototype._getRendererLegendElements=function(e,t){return void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){return function(e){return V(e)||F(e)||j(e)||N(e)||k(e)||z(e)||G(e)||U(e)||B(e)||H(e)||D(e)}(e)?function(e){return G(e)||U(e)||B(e)||function(e){return"esri.renderers.PointCloudRGBRenderer"===e.declaredClass}(e)}(e)?[2,this._constructPointCloudRendererLegendElements(e,t)]:H(e)?[2,this._constructDotDensityRendererLegendElements(e)]:[2,this._constructRendererLegendElements(e,t)]:(I.warn("Renderer not supported!"),[2,[]])}))}))},t.prototype._getPointCloudRendererTitle=function(e){return e.legendOptions&&e.legendOptions.title||e.field},t.prototype._constructPointCloudRendererLegendElements=function(e,t){var r=this;void 0===t&&(t={});var n=t.title,i=[],a=null,o=null;if(G(e))a={type:"symbol-table",title:n||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((function(e){a.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:r._getAppliedCloneSymbol(R,e.color)})}));else if(U(e)){var s=e.stops,l=null;if(s.length&&(1===s.length&&(l=s[0].color),!l)){var c=s[0].value,u=s[s.length-1].value;if(null!=c&&null!=u){var p=c+(u-c)/2;l=E.getColorFromPointCloudStops(p,s)}}a={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(R,l||R.color)}]};var d=E.getRampStopsForPointCloud(e.stops);o={type:"color-ramp",title:n||this._getPointCloudRendererTitle(e),infos:d,preview:w.renderColorRampPreviewHTML(d.map((function(e){return e.color})))}}else B(e)&&(a={type:"symbol-table",title:n||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((function(e){a.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:r._getAppliedCloneSymbol(R,e.color)})})));a&&a.infos.length&&i.push(a),o&&o.infos.length&&i.push(o);var y=i.reduce((function(e,t){return e.concat(t.infos)}),[]).filter((function(e){return!!e.symbol})).map((function(e){return r._getSymbolPreview(e,r.layer.opacity)}));return h.eachAlways(y).then((function(){return i}))},t.prototype._getElementInfoForDotDensity=function(e,t){var r=e.backgroundColor,n=e.outline,i=e.dotSize+"-"+t+"-"+r+"-"+(n&&JSON.stringify(n.toJSON())),a=this._dotDensityUrlCache,o=a.has(i)?a.get(i):w.renderDotDensityPreviewHTML(e,t);return a.set(i,o),{opacity:1,src:o.src,preview:o,width:o.width,height:o.height}},t.prototype._constructDotDensityRendererLegendElements=function(e){var t=this,r=e.calculateDotValue(this.view.scale),n=e.legendOptions&&e.legendOptions.unit,i={type:"symbol-table",title:{value:r&&Math.round(r),unit:n||""},infos:[]};return e.attributes.forEach((function(r){var n=t._getElementInfoForDotDensity(e,r.color);n.label=r.label||r.valueExpressionTitle||r.field,i.infos.push(n)})),h.resolve([i])},t.prototype._constructRendererLegendElements=function(e,t){return void 0===t&&(t={}),n.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,l,c,u,p,y,f,m,v,_,g,b,L,S,x,E,A,C,I,O,R,G,U,B,H,q,Y,X,J,K,Q,$,ee,te,re,ne,ie,ae=this;return n.__generator(this,(function(n){switch(n.label){case 0:return r=t.title,i=t.sublayer,a=i||this.layer,[4,this._loadRenderer(e)];case 1:return s=n.sent(),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null,[4,this._getVisualVariableLegendElements(s,a)];case 2:return l=n.sent()||[],c={type:"symbol-table",title:r||this._getRendererTitle(s,a),infos:[]},u=null,p=!1,y=new Set,z(s)?(f=P.getHeatmapRampStops(s),l.push({type:"heatmap-ramp",title:r,infos:f,preview:w.renderColorRampPreviewHTML(f.map((function(e){return e.color})))}),[3,12]):[3,3];case 3:if(!j(s))return[3,4];if((m=s&&s.authoringInfo)&&"relationship"===m.type){if(v=m.focus,_=m.numClasses,g=m.field1,b=m.field2,_&&g&&b){for(L=[g,b],S=M.getRotationAngleForFocus(v)||0,x=0,E=L;x<E.length;x++)C=(A=E[x]).field,I=A.normalizationField,O=A.label,R=O||{field:this._getFieldAlias(C,a),normField:I&&this._getFieldAlias(I,a)},(G=W.clone()).angle=S,c.infos.push({label:R,symbol:G}),y.add(G),S+=90;U=M.getRelationshipRampElement({focus:v,numClasses:_,infos:s.uniqueValueInfos}),l.unshift(U)}}else B=s.field,s.uniqueValueInfos.forEach((function(e){if(e.symbol){var t=e.symbol.clone();Z(ae.layer)&&(t=o.SimpleMarkerSymbol.fromJSON({color:t.color,style:"square"})),c.infos.push({label:e.label||ae._getDomainName(B,e.value,a)||e.value,value:e.value,symbol:t})}}));return s.defaultSymbol&&(c.infos.push({label:s.defaultLabel||"others",symbol:s.defaultSymbol}),p=!0),[3,12];case 4:return F(s)?((!(u=this._isUnclassedRenderer(s))||!this._hasSizeRamp)&&(s.classBreakInfos.forEach((function(e){if(e.symbol){var t=e.symbol.clone();Z(ae.layer)&&(t=o.SimpleMarkerSymbol.fromJSON({color:t.color,style:"square"})),c.infos.unshift({label:e.label||(u?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:t})}})),u&&(c.title=null),this._updateInfosforClassedSizeRenderer(s,c.infos)),s.defaultSymbol&&!u&&(c.infos.push({label:s.defaultLabel||"others",symbol:s.defaultSymbol}),p=!0),[3,12]):[3,5];case 5:return N(s)?function(e){return"esri.layers.ImageryTileLayer"===e.declaredClass}(this.layer)?("stretch-ramp"===(H=this._constructTileImageryStretchRendererElements(s)).type?l.push(H):c.infos=H,[3,10]):[3,6]:[3,11];case 6:return q=this.layer,Y=void 0,X=void 0,s.statistics&&s.statistics.length&&(Y=s.statistics[0].min||s.statistics[0][0],X=s.statistics[0].max||s.statistics[0][1]),J=[],Q=d.unwrap,q.renderingRule?[4,q.generateRasterInfo(q.renderingRule)]:[3,8];case 7:return $=n.sent(),[3,9];case 8:$=q.serviceRasterInfo,n.label=9;case 9:K=Q.apply(void 0,[$]),ee=K.keyProperties.BandProperties,1===K.bandCount?(Y=Y||K.statistics&&K.statistics[0].min,X=X||K.statistics&&K.statistics[0].max,Y||X?l.push(this._getStretchLegendElements(s,{min:Y,max:X})):this.buildLegendElementsForTools()):q.bandIds&&1===q.bandIds.length?(Y=Y||K.statistics&&K.statistics[q.bandIds[0]].min,X=X||K.statistics&&K.statistics[q.bandIds[0]].max,Y||X?l.push(this._getStretchLegendElements(s,{min:Y,max:X})):this.buildLegendElementsForTools()):K.bandCount>=3?ee&&ee.length>=K.bandCount?q.bandIds&&3===q.bandIds.length?(J=q.bandIds.map((function(e){return ee[e].BandName})),c.infos=this._createSymbolTableElementMultiBand(J)):"lerc"===q.format?(J=[0,1,2].map((function(e){return ee[e].BandName})),c.infos=this._createSymbolTableElementMultiBand(J)):this.buildLegendElementsForTools():"lerc"===q.format?(J=["band0","band1","band2"],c.infos=this._createSymbolTableElementMultiBand(J)):this.buildLegendElementsForTools():this.buildLegendElementsForTools(),n.label=10;case 10:return[3,12];case 11:k(s)?s.colormapInfos.forEach((function(e){c.infos.push({label:e.label,value:e.value,symbol:ae._getAppliedCloneSymbol(T,e.color)})})):V(s)?s.symbol&&!this._hasSizeRamp&&c.infos.push({label:s.label,symbol:s.symbol}):D(s)&&l.push(this._getStretchLegendElements(s,{min:0,max:255})),n.label=12;case 12:return!(te=s.defaultSymbol)||p||V(s)||u&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||l.push({type:"symbol-table",infos:[{label:s.defaultLabel||"others",symbol:te}]}),c.infos.length&&l.unshift(c),re=null==t.opacity?a.opacity:t.opacity,ne=this._getSymbolConfig("visualVariables"in s&&s.visualVariables),ie=l.reduce((function(e,t){return e.concat(t.infos)}),[]).filter((function(e){return!(!e||!e.symbol)})).map((function(e){return ae._getSymbolPreview(e,re,{applyScaleDrivenSize:!y.has(e.symbol),symbolConfig:ne})})),s=null,[4,h.eachAlways(ie)];case 13:return n.sent(),[2,l]}}))}))},t.prototype._constructTileImageryStretchRendererElements=function(e){var t,r,n,i=this.layer,a=i.rasterInfo,o=a.bandCount||e.statistics.length,s=a.keyProperties&&a.keyProperties.BandProperties;if(e.statistics&&e.statistics.length&&(t=void 0!==e.statistics[0].min?e.statistics[0].min:e.statistics[0][0],r=e.statistics[0].max||e.statistics[0][1]),1===a.bandCount)return this._getStretchLegendElements(e,{min:t,max:r});function l(e){var t=(i.bandIds&&i.bandIds.length?i.bandIds:[0,1,2]).map((function(t){return e&&e[t]&&e[t].BandName||"band"+t}));return t.length<3?t.push(t[1]):t.length>3&&t.splice(3),t}return n=s&&s.length>=o?l(s):l(),this._createSymbolTableElementMultiBand(n)},t.prototype._getStretchLegendElements=function(e,t){var r=e.colorRamp,n=E.getStrectchRampStops(r,t);return{type:"stretch-ramp",title:"",infos:n,preview:w.renderColorRampPreviewHTML(n.map((function(e){return e.color})))}},t.prototype._createSymbolTableElementMultiBand=function(e){var t=[],r=["red","green","blue"];return e.forEach((function(e,n){t.push({label:{colorName:r[n],bandName:e},src:C.RGB_IMG_SOURCE[n],opacity:1})})),t},t.prototype._updateInfosforClassedSizeRenderer=function(e,t){var r=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,n=e.classBreakInfos.some((function(e){return L.isVolumetricSymbol(e.symbol)}));if(r&&n){var i=A.REAL_WORLD_MAX_SIZE,a=A.REAL_WORLD_MIN_SIZE,o=e.classBreakInfos.length,s=(i-a)/(o>1?o-1:o);t.forEach((function(e,t){e.size=i-s*t}))}},t.prototype._getSymbolConfig=function(e){var t=!1,r=!1;if(e)for(var n=0;n<e.length&&(!t||!r);n++){var i=e[n];"size"===i.type&&("height"===i.axis&&(t=!0),"width-and-depth"===i.axis&&(r=!0))}return t&&r?"tall":null},t.prototype._getSymbolPreview=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var a,o;return n.__generator(this,(function(n){switch(n.label){case 0:return a=e.size,this._scaleDrivenSizeVariable&&(null==i?void 0:i.applyScaleDrivenSize)?[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))]:[3,2];case 1:o=n.sent().getSize,a=o(this._scaleDrivenSizeVariable,null,{view:this.view,scale:this.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null}),n.label=2;case 2:return[2,w.renderPreviewHTML(e.symbol,{size:a,opacity:t,symbolConfig:null==i?void 0:i.symbolConfig,rotation:e.symbol.angle}).then((function(t){return e.preview=t,e})).catch((function(){return e.preview=null,e}))]}}))}))},t.prototype._loadRenderer=function(e){var t,r;return n.__awaiter(this,void 0,void 0,(function(){var i,a,o,s,l,c,u,p,y,f,m,v,_=this;return n.__generator(this,(function(n){switch(n.label){case 0:return i=[],a=this.layer,e=e.clone(),this._hasClusterSizeVariable=!1,o="visualVariables"in e&&(null===(t=e.visualVariables)||void 0===t?void 0:t.some((function(e){return"size"===e.type&&"outline"!==e.target&&!O.test(e.valueExpression)}))),e&&"visualVariables"in e&&!o&&"featureReduction"in a&&"cluster"===(null===(r=a.featureReduction)||void 0===r?void 0:r.type)&&(s=this.layerView._effectiveRenderer,(l=d.unwrap(x.getClusterSizeVariable(s,this.view)))&&("clusterMinSize"in(c=a.featureReduction)&&"clusterMaxSize"in c&&(u=c.clusterMinSize,p=c.clusterMaxSize,l.legendOptions=new b({showLegend:u!==p})),y=e.visualVariables||[],e.visualVariables=y.concat([l]),this._hasClusterSizeVariable=!0)),[4,this._getMedianColor(e)];case 1:return f=n.sent(),(F(e)||j(e))&&(m=e.classBreakInfos||e.uniqueValueInfos,v=m.map((function(e){return _._fetchSymbol(e.symbol,f).then((function(t){e.symbol=t})).catch((function(){e.symbol=null}))})),Array.prototype.push.apply(i,v)),i.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:f).then((function(t){_._applySymbolToRenderer(e,t,V(e))})).catch((function(){_._applySymbolToRenderer(e,null,V(e))}))),[2,h.eachAlways(i).then((function(){return e}))]}}))}))},t.prototype._applySymbolToRenderer=function(e,t,r){r?e.symbol=t:e.defaultSymbol=t},t.prototype._getMedianColor=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,i,a,o;return n.__generator(this,(function(n){switch(n.label){case 0:if(!("visualVariables"in e)||!e.visualVariables)return[2,null];if(!(t=l.find(e.visualVariables,(function(e){return"color"===e.type}))))return[2,null];if(i=null,a=null,t.stops){if(1===t.stops.length)return[2,t.stops[0].color];i=t.stops[0].value,a=t.stops[t.stops.length-1].value}return o=i+(a-i)/2,[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,(0,n.sent().getColor)(t,o)]}}))}))},t.prototype._fetchSymbol=function(e,t){var r=this;if(!e)return h.reject();if("web-style"===e.type){var n=e.portal,i=n&&n.url,a=n&&n.user&&n.user.username,o=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+i+"-"+a,s=this._webStyleSymbolCache;return s.has(o)||(this.view instanceof S?s.set(o,e.fetchCIMSymbol()):s.set(o,e.fetchSymbol())),s.get(o).then((function(e){return r._getAppliedCloneSymbol(e,t)})).catch((function(){return I.warn("Fetching web-style failed!"),h.reject()}))}return h.resolve(this._getAppliedCloneSymbol(e,t))},t.prototype._getAppliedCloneSymbol=function(e,t){if(!e)return e;var r=e.clone(),n=r.type.indexOf("3d")>-1,a=t&&t.toRgba();return n?this._applyColorTo3dSymbol(r,a):r.color&&(r.color=new i(a||r.color)),r},t.prototype._applyColorTo3dSymbol=function(e,t){t&&e.symbolLayers.forEach((function(e){e&&(e.material||(e.material={}),e.material.color=new i(t))}))},t.prototype._getVisualVariableLegendElements=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var r,i,a,o,s,l,c,u,p,y,f,m,v=this;return n.__generator(this,(function(g){switch(g.label){case 0:if(!("visualVariables"in e)||!e.visualVariables)return[2,null];for(r=e.visualVariables,i=[],a=[],o=[],s=0,l=r;s<l.length;s++)"color"===(c=l[s]).type?i.push(c):"size"===c.type?a.push(c):"opacity"===c.type&&o.push(c);return u=n.__spreadArrays(i,a,o),0===i.length&&F(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&(f=e.classBreakInfos[0],p=f&&f.symbol),0===i.length&&V(e)&&(p=e.symbol),p&&(p.type.indexOf("3d")>-1?"water"===(m=p.symbolLayers.getItemAt(0)).type?d.isSome(m.color)&&(y=m.color):d.isSome(m.material)&&d.isSome(m.material.color)&&(y=m.material.color):p.url||(y=p.color)),[4,h.all(u.map((function(r){return n.__awaiter(v,void 0,void 0,(function(){var i,a,o,s,l,c,u,p;return n.__generator(this,(function(n){switch(n.label){case 0:return r.legendOptions&&!1===r.legendOptions.showLegend?[3,10]:(i=this._getRampTitle(r,t),a=null,o="getField"in t&&t.getField&&t.getField(r.field),s=o&&_.isDateField(o),"color"!==r.type?[3,2]:[4,E.getRampStops(r,null,s)]);case 1:return p=n.sent(),a={type:"color-ramp",title:i,infos:p,preview:w.renderColorRampPreviewHTML(p.map((function(e){return e.color})))},this._hasColorRamp||(this._hasColorRamp=!(null==a.infos||!a.infos.length)),[3,9];case 2:return"size"!==r.type||"outline"===r.target?[3,7]:O.test(r.valueExpression)?(this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=r),[3,6]):[3,3];case 3:return l={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(r):i},c=A.getRampStops,u=[e,r],[4,this._getMedianColor(e)];case 4:return[4,c.apply(void 0,u.concat([n.sent(),this.scale,this.view,s]))];case 5:l.infos=n.sent(),a=l,this._hasSizeRamp||(this._hasSizeRamp=!(null==a.infos||!a.infos.length)),n.label=6;case 6:return[3,9];case 7:return"opacity"!==r.type?[3,9]:[4,E.getRampStops(r,y,s)];case 8:p=n.sent(),a={type:"opacity-ramp",title:i,infos:p,preview:w.renderColorRampPreviewHTML(p.map((function(e){return e.color})))},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==a.infos||!a.infos.length)),n.label=9;case 9:return[2,a&&a.infos?a:null];case 10:return[2,void 0]}}))}))})))];case 1:return[2,g.sent().filter((function(e){return!!e}))]}}))}))},t.prototype._getDomainName=function(e,t,r){if(e&&"function"!=typeof e){var n="getField"in r&&r.getField&&r.getField(e),i=n&&"getFieldDomain"in r&&r.getFieldDomain?r.getFieldDomain(n.name):null;return i&&"coded-value"===i.type?i.getName(t):null}return null},t.prototype._getClusterTitle=function(e){var t=this.layer,r=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){var n=t.featureReduction,i="popupTemplate"in n&&n.popupTemplate,a=i&&i.fieldInfos;if(a)for(var o=0,s=a;o<s.length;o++){var l=s[o];if(l.fieldName===r)return"cluster_count"===r?l.label||{showCount:!0}:l.label}}return{showCount:!0}},t.prototype._getRampTitle=function(e,t){var r=e.field,n=e.normalizationField,i=!1,a=!1,o=!1,s=null;r="function"==typeof r?null:r,n="function"==typeof n?null:n;var l=e.legendOptions&&e.legendOptions.title;if(null!=l)s=l;else if(e.valueExpressionTitle)s=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables)for(var c=t.renderer.authoringInfo.visualVariables,u=0;u<c.length;u++){var p=c[u];if("color"===p.type){if("ratio"===p.style){i=!0;break}if("percent"===p.style){a=!0;break}if("percent-of-total"===p.style){o=!0;break}}}s={field:r&&this._getFieldAlias(r,t),normField:n&&this._getFieldAlias(n,t),ratio:i,ratioPercent:a,ratioPercentTotal:o}}return s},t.prototype._getRendererTitle=function(e,t){var r=e;if(r.legendOptions&&r.legendOptions.title)return r.legendOptions.title;if(r.valueExpressionTitle)return r.valueExpressionTitle;var n=r.field,i=null,a=null;F(r)&&(i=r.normalizationField,a="percent-of-total"===r.normalizationType),i="function"==typeof i?null:i;var o=null;return((n="function"==typeof n?null:n)||i)&&(o={field:n&&this._getFieldAlias(n,t),normField:i&&this._getFieldAlias(i,t),normByPct:a}),o},t.prototype._getFieldAlias=function(e,t){var r="popupTemplate"in t&&t.popupTemplate,n=r&&r.fieldInfos,i=null;n&&n.some((function(t){return e===t.fieldName&&(i=t,!0)}));var a=null;"getField"in t&&t.getField?a=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(a=t.fieldsIndex.get(e));var o=i||a,s=null;return o&&(s=i&&i.label||a&&a.alias||"name"in o&&o.name||"fieldName"in o&&o.fieldName),s},t.prototype._isUnclassedRenderer=function(e){var t=e.visualVariables,r=!1;return F(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(r=e.field?t.some((function(t){return!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField)})):!!t.length),r},n.__decorate([m.property()],t.prototype,"children",void 0),n.__decorate([m.property()],t.prototype,"layerView",void 0),n.__decorate([m.property()],t.prototype,"layer",void 0),n.__decorate([m.property()],t.prototype,"legendElements",void 0),n.__decorate([m.property()],t.prototype,"parent",void 0),n.__decorate([m.property({readOnly:!0})],t.prototype,"ready",null),n.__decorate([m.property()],t.prototype,"keepCacheOnDestroy",void 0),n.__decorate([m.property()],t.prototype,"respectLayerVisibility",void 0),n.__decorate([m.property({dependsOn:["view.scale"],readOnly:!0})],t.prototype,"scale",null),n.__decorate([m.property()],t.prototype,"sublayerIds",void 0),n.__decorate([m.property({dependsOn:["layer.renderer?.valueExpression?","layer.renderer?.visualVariables?","layer.featureReduction?","scale"],readOnly:!0})],t.prototype,"isScaleDriven",null),n.__decorate([m.property()],t.prototype,"title",void 0),n.__decorate([m.property({dependsOn:["ready"],readOnly:!0,value:0})],t.prototype,"version",null),n.__decorate([m.property()],t.prototype,"view",void 0),n.__decorate([m.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],t)}(s)}.apply(null,n))||(e.exports=i)},678:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(177),r(152),r(246),r(679),r(680),r(503),r(681),r(357),r(161)],void 0===(i=function(e,t,n,i,a,o,s,l,c,u,p){Object.defineProperty(t,"__esModule",{value:!0});var d=null;function h(e,t){return Math.floor(Math.random()*(t-e+1)+e)}t.renderDotDensityPreviewHTML=function(e,t,r){var n=e.backgroundColor,i=e.outline,a=e.dotSize,o=r&&r.swatchSize||22,s=Math.round(o*o/Math.pow(a,2)*.8),l=window.devicePixelRatio,c=document.createElement("canvas"),u=o*l;c.width=u,c.height=u,c.style.width=c.width/l+"px",c.style.height=c.height/l+"px";var p=c.getContext("2d");if(n&&(p.fillStyle=n.toCss(!0),p.fillRect(0,0,u,u),p.fill()),p.fillStyle=t.toCss(!0),d&&d.length/2===s)for(var y=0;y<2*s;y+=2){var f=d[y],m=d[y+1];p.fillRect(f,m,a*l,a*l),p.fill()}else for(d=[],y=0;y<2*s;y+=2)f=h(0,u),m=h(0,u),d.push(f,m),p.fillRect(f,m,a*l,a*l),p.fill();i&&(i.color&&(p.strokeStyle=i.color.toCss(!0)),p.lineWidth=i.width,p.strokeRect(0,0,u,u));var v=new Image(o,o);return v.src=c.toDataURL(),v},t.renderColorRampPreviewHTML=function(e,t){void 0===t&&(t={});var r="horizontal"===t.align,n=r?75:24,i=r?24:75,a=t.width,o=void 0===a?n:a,s=t.height,l=void 0===s?i:s,c=t.gradient,u=void 0===c||c,p=window.devicePixelRatio,d=o*p,h=l*p,y=document.createElement("canvas");y.width=d,y.height=h,y.style.width=o+"px",y.style.height=l+"px";var f=y.getContext("2d"),m=r?d:0,v=r?0:h;if(u){var _=f.createLinearGradient(0,0,m,v),g=1/(e.length-1);e.forEach((function(e,t){return _.addColorStop(t*g,e.toString())})),f.fillStyle=_,f.fillRect(0,0,d,h)}else for(var b=r?d/e.length:d,w=r?h:h/e.length,L=0,S=0,x=0,E=e;x<E.length;x++){var P=E[x];f.fillStyle=P.toString(),f.fillRect(L,S,b,w),L=r?L+b:0,S=r?0:S+w}var M=document.createElement("div");return M.style.width=o+"px",M.style.height=l+"px",M.appendChild(y),M},t.renderPreviewHTML=function e(t,r){switch(t.type){case"web-style":return u.previewWebStyleSymbol(t,e,r);case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return c.previewSymbol3D(t,r);case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":return l.previewSymbol2D(t,r);case"cim":return s.previewCIMSymbol(t,r);default:return void i.neverReached(t)}},t.getDisplayedSymbol=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var i,s,l,c,u,d,h,y,f,m,v,_,g,b,w,L,S,x,E,P,M,A,C;return n.__generator(this,(function(I){switch(I.label){case 0:return e?(i=function e(t){return t&&"opacity"in t?t.opacity*e(t.parent):1}(e.layer||e.sourceLayer),!a.isSome(e.symbol)||a.isSome(t)&&!0===t.ignoreGraphicSymbol?[3,4]:"web-style"!==e.symbol.type?[3,2]:[4,e.symbol.fetchSymbol(a.isSome(t)?t.abortOptions:null)]):[2,void 0];case 1:return l=I.sent(),[3,3];case 2:l=e.symbol.clone(),I.label=3;case 3:return s=l,p.applyColorToSymbol(s,null,i),[2,s];case 4:return[4,(c=a.isSome(t)&&t.renderer||e.get("layer.renderer")||e.get("sourceLayer.renderer")).getSymbolAsync(e)];case 5:return(u=I.sent())?"web-style"!==u.type?[3,7]:[4,u.fetchSymbol(a.isSome(t)?t.abortOptions:null)]:[2,void 0];case 6:return u=I.sent(),[3,8];case 7:u=u.clone(),I.label=8;case 8:return!("visualVariables"in c)||"visualVariables"in c&&!c.visualVariables||"visualVariables"in c&&c.visualVariables&&!c.visualVariables.length?[2,u]:c.arcadeRequiredForVisualVariables&&(a.isNone(t)||a.isNone(t.arcade))?(d=n.__assign({},a.unwrap(t)),h=d,[4,o.loadArcade()]):[3,10];case 9:h.arcade=I.sent(),t=d,I.label=10;case 10:return[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 11:for(y=I.sent(),f=[],m=[],v=[],_=[],g=0,b=c.visualVariables;g<b.length;g++)switch((w=b[g]).type){case"color":f.push(w);break;case"opacity":m.push(w);break;case"rotation":_.push(w);break;case"size":w.target||v.push(w)}return L=!!f.length&&f[f.length-1],S=L?y.getColor(L,e,t):null,x=!!m.length&&m[m.length-1],E=x?y.getOpacity(x,e,t):null,null!=i&&(E=null!=E?E*i:i),p.applyColorToSymbol(u,S,E),v.length?(P=y.getAllSizes(v,e,t),[4,p.applySizesToSymbol(u,P)]):[3,13];case 12:I.sent(),I.label=13;case 13:for(M=0,A=_;M<A.length;M++)C=A[M],p.applyRotationToSymbol(u,y.getRotationAngle(C,e,t),C.axis);return[2,u]}}))}))}}.apply(null,n))||(e.exports=i)},679:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(813)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=new n.CIMSymbolRasterizer(null,!0);t.previewCIMSymbol=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,a,o,s,l,c,u,p,d,h,y;return r.__generator(this,(function(r){switch(r.label){case 0:return n=t.size,a=t.maxSize,o=t.feature,s=t.fieldMap,l=t.geometryType,c=t.style,u=Math.min(n||22,a||120),p=3,e&&e.data&&e.data.symbol&&"CIMPointSymbol"!==e.data.symbol.type&&(p=1),[4,i.rasterizeCIMSymbolAsync(e,o,s,l,{targetSize:u*p,style:c})];case 1:return d=r.sent(),(h=document.createElement("canvas")).width=d.imageData.width,h.height=d.imageData.height,h.getContext("2d").putImageData(d.imageData,0,0),(y=new Image(h.width/p,h.height/p)).src=h.toDataURL(),[2,y]}}))}))}}.apply(null,n))||(e.exports=i)},680:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(154),r(153),r(171),r(420),r(501),r(502)],void 0===(i=function(e,t,r,n,i,a,o,s){Object.defineProperty(t,"__esModule",{value:!0});var l=document.createElement("canvas");t.previewSymbol2D=function(e,t){var c=t&&t.size?i.pt2px(t.size):null,u=t&&t.maxSize?i.pt2px(t.maxSize):null,p=t&&null!=t.opacity?t.opacity:null,d=t&&null!=t.rotation?t.rotation:null,h=a.getStroke(e),y={shape:null,fill:null,stroke:h};h&&h.width&&(h.width=Math.min(h.width,80));var f=0,m=0;switch(e.type){case"simple-marker":var v=e.style,_=i.pt2px(e.size);switch(f=Math.min(c||_||22,u||120),m=Math.min(c||_||22,u||120),v){case"circle":y.shape={type:"circle",cx:.5*_,cy:.5*_,r:.5*_};break;case"cross":y.shape={type:"path",path:[{command:"M",values:[0,.5*m]},{command:"L",values:[f,.5*m]},{command:"M",values:[.5*f,0]},{command:"L",values:[.5*f,m]}]};break;case"diamond":y.shape={type:"path",path:[{command:"M",values:[0,.5*m]},{command:"L",values:[.5*f,0]},{command:"L",values:[f,.5*m]},{command:"L",values:[.5*f,m]},{command:"Z",values:[]}]};break;case"square":y.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[f,0]},{command:"L",values:[f,m]},{command:"L",values:[0,m]},{command:"Z",values:[]}]};break;case"triangle":y.shape={type:"path",path:[{command:"M",values:[.5*f,0]},{command:"L",values:[f,m]},{command:"L",values:[0,m]},{command:"Z",values:[]}]};break;case"x":y.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[f,m]},{command:"M",values:[f,0]},{command:"L",values:[0,m]}]};break;case"path":y.shape={type:"path",path:e.path||""}}break;case"simple-line":var g=Math.min(c||h&&h.width||22,u||80),b=g>22?2*g:40;h.width=g,f=b,m=g,y.shape={type:"path",path:[{command:"M",values:[0,m]},{command:"L",values:[f,m]}]};break;case"picture-fill":case"simple-fill":f=Math.min(c||22,u||120),m=Math.min(c||22,u||120),y.shape=o.shapes.fill[0];break;case"picture-marker":var w=i.pt2px(e.width),L=i.pt2px(e.height),S=Math.max(w,L),x=w/L;w=x<=1?Math.ceil(S*x):S,L=x<=1?S:Math.ceil(S/x),f=Math.min(c||w||22,u||120),m=Math.min(c||L||22,u||120),y.shape={type:"image",x:-Math.round(f/2),y:-Math.round(m/2),width:f,height:m,src:e.url||""};break;case"text":var E=e,P=E.text||"Aa",M=E.font,A=Math.min(c||i.pt2px(M.size),u||120),C=function(e,t){var r=l.getContext("2d"),n=[];return t&&(t.weight&&n.push(t.weight),t.size&&n.push(t.size+"px"),t.family&&n.push(t.family)),r.font=n.join(" "),r.measureText(e).width}(P,{weight:M.weight,size:A,family:M.family}),I=/[\uE600-\uE6FF]/.test(P);f=I?A:C,m=A;var O=.25*function(e){if(0===e.length)return 0;if(e.length>2){var t=i.px2pt(1),r=parseFloat(e);switch(e.slice(-2)){case"px":return r;case"pt":return r*t;case"in":return 72*r*t;case"pc":return 12*r*t;case"mm":return r*(7.2/2.54)*t;case"cm":return r*(72/2.54)*t}}return parseFloat(e)}((M?A:0).toString());I&&(O+=5),y.shape={type:"text",text:P,x:0,y:O,align:"middle",decoration:M&&M.decoration,rotated:E.rotated,kerning:E.kerning},y.font=M&&{size:A,style:M.style,decoration:M.decoration,weight:M.weight,family:M.family}}if(!y.shape)return n.reject(new r("symbolPreview: renderPreviewHTML2D","symbol not supported."));var R=a.getFill(e),T=R,k=e.color,N=null;return T&&"pattern"===T.type&&k&&"picture-fill"!==e.type?N=a.getPatternUrlWithColor(T.src,k.toCss(!0)).then((function(e){return T.src=e,y.fill=T,y})):(y.fill=R,N=n.resolve(y)),N.then((function(e){return s.renderSymbol([[e]],[f,m],{node:t&&t.node,scale:!0,opacity:p,rotation:d})}))}}.apply(null,n))||(e.exports=i)},681:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(165),r(171)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.previewWebStyleSymbol=function(e,t,i){var a=e.thumbnail&&e.thumbnail.url;return a?r(a,{responseType:"image"}).then((function(e){var t=function(e,t){var r=!/\\.svg$/i.test(e.src)&&t&&t.disableUpsampling,i=Math.max(e.width,e.height),a=t&&null!=t.maxSize?n.pt2px(t.maxSize):120;r&&(a=Math.min(i,a));var o=Math.min(a,t&&null!=t.size?n.pt2px(t.size):i);if(o!==i){var s=0!==e.width&&0!==e.height?e.width/e.height:1;s>=1?(e.width=o,e.height=o/s):(e.width=o*s,e.height=o)}return e}(e.data,i);return i&&i.node?(i.node.appendChild(t),i.node):t})):e.fetchSymbol().then((function(e){return t(e,i)}))}}.apply(null,n))||(e.exports=i)},682:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(180),r(433)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getClusterSizeVariable=function(e,t){if(!(e&&"visualVariables"in e&&e.visualVariables))return null;var i=r.find(e.visualVariables,(function(e){return"size"===e.type})),a=function(e,t){var r=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return t.levels?t.levels[r]:null}(t,i);return a?new n({field:i.field,minSize:a[2].size,minDataValue:a[2].value,maxSize:a[3].size,maxDataValue:a[3].value}):null}}.apply(null,n))||(e.exports=i)},683:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(182),r(153),r(397),r(161)],void 0===(i=function(e,t,n,i,a,o){Object.defineProperty(t,"__esModule",{value:!0});var s=new i([64,64,64]);function l(e,t){var r=[],n=e.length-1;return 5===e.length?r.push(0,2,4):r.push(0,n),e.map((function(e,i){return r.indexOf(i)>-1?o.createStopLabel(e,i,n,t):null}))}function c(e,t,a){return void 0===a&&(a=s),n.__awaiter(this,void 0,void 0,(function(){var o,s;return n.__generator(this,(function(n){switch(n.label){case 0:return o=new i(a),[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return null!=(s=n.sent().getOpacity(t,e))&&(o.a=s),[2,o]}}))}))}function u(e,t){var r=function(e,t){var r=0,n=t.length-1;return t.some((function(t,i){return e<t.value?(n=i,!0):(r=i,!1)})),{startIndex:r,endIndex:n,weight:(e-t[r].value)/(t[n].value-t[r].value)}}(e,t),n=r.startIndex,a=r.endIndex,o=r.weight;if(n===a)return t[n].color;var s=i.blendColors(t[n].color,t[a].color,o);return new i(s)}t.getRampStops=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var o,s,u,p,d,h,y,f=this;return n.__generator(this,(function(m){switch(m.label){case 0:return o=!1,s=[],u=[],e.stops&&(p=e.stops,s=p.map((function(e){return e.value})),(o=p.some((function(e){return!!e.label})))&&(u=p.map((function(e){return e.label})))),d=s[0],h=s[s.length-1],null==d&&null==h?[2,null]:(y=o?null:l(s,i),[4,a.all(s.map((function(i,a){return n.__awaiter(f,void 0,void 0,(function(){var s,l,p;return n.__generator(this,(function(n){switch(n.label){case 0:return"opacity"!==e.type?[3,2]:[4,c(i,e,t)];case 1:return l=n.sent(),[3,4];case 2:return[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 3:l=n.sent().getColor(e,i),n.label=4;case 4:return s=l,p=o?u[a]:y[a],[2,{value:i,color:s,label:p}]}}))}))})))]);case 1:return[2,m.sent().reverse()]}}))}))},t.getRampStopsForPointCloud=function(e){var t,r=[],n=[];r=e.map((function(e){return e.value})),(t=e.some((function(e){return!!e.label})))&&(n=e.map((function(e){return e.label})));var i=r[0],a=r[r.length-1];if(null==i&&null==a)return null;var o=t?null:l(r,!1);return r.map((function(r,i){return{value:r,color:u(r,e),label:t?n[i]:o[i]}})).reverse()},t.getColorFromPointCloudStops=u,t.getStrectchRampStops=function(e,t){var r=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((function(n,a){0===a?r.push({value:t.max,color:new i(n.toColor),label:"high"}):r.push({value:null,color:new i(n.toColor),label:""}),a===e.colorRamps.length-1?r.push({value:t.min,color:new i(n.fromColor),label:"low"}):r.push({value:null,color:new i(n.fromColor),label:""})}));else{var n=void 0,a=void 0;e&&"algorithmic"===e.type?(n=e.fromColor,a=e.toColor):(n=[0,0,0,1],a=[255,255,255,1]),r=[{value:t.max,color:new i(a),label:"high"},{value:t.min,color:new i(n),label:"low"}]}return r}}.apply(null,n))||(e.exports=i)},684:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(783)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getHeatmapRampStops=function(e){var t=e.colorStops,n=t.length-1;if(t&&t[0]){var i=t[n];i&&1!==i.ratio&&((t=t.slice(0)).push(new r({ratio:1,color:i.color})),n++)}return t.map((function(e,t){var r="";return 0===t?r="low":t===n&&(r="high"),{color:e.color,label:r,ratio:e.ratio}})).reverse()}}.apply(null,n))||(e.exports=i)},685:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(420),r(503)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i={HH:315,HL:45,LL:135,LH:225},a={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function o(e){if(e){var t,i=e.type;return i.indexOf("3d")>-1?n.getSymbolLayerFill(e.symbolLayers.getItemAt(0)):"simple-line"===i?(t=r.getStroke(e))&&t.color:"simple-marker"!==e.type||"x"!==e.style&&"cross"!==e.style?r.getFill(e):(t=r.getStroke(e))&&t.color}}function s(e){var t=i[e];return e&&null==t&&(t=i.HH),t||0}t.getRelationshipRampElement=function(e){var t=e.focus,r=e.infos,n=e.numClasses,i=a[n],l={};r.forEach((function(e){l[e.value]={label:e.label,fill:o(e.symbol)}}));for(var c=[],u=0;u<n;u++){for(var p=[],d=0;d<n;d++){var h=l[i[u][d]];p.push(h.fill)}c.push(p)}return{type:"relationship-ramp",numClasses:n,focus:t,colors:c,labels:function(e,t){var r=t.HH.label,n=t.LL.label,i=t.HL.label,a=t.LH.label;switch(e){case"HH":return{top:r,bottom:n,left:i,right:a};case"HL":return{top:i,bottom:a,left:n,right:r};case"LL":return{top:n,bottom:r,left:a,right:i};case"LH":return{top:a,bottom:i,left:r,right:n};default:return{top:r,bottom:n,left:i,right:a}}}(t,l),rotation:s(t)}},t.getRotationAngleForFocus=s}.apply(null,n))||(e.exports=i)},686:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(239),r(153),r(434),r(357),r(397),r(161)],void 0===(i=function(e,t,n,i,a,o,s,l){Object.defineProperty(t,"__esModule",{value:!0}),t.REAL_WORLD_MAX_SIZE=30,t.REAL_WORLD_MIN_SIZE=12;var c=[255,255,255],u=[200,200,200],p=[128,128,128];function d(e,t,i,a){return n.__awaiter(this,void 0,void 0,(function(){var s,l,c,u,p;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:if(s=n.sent().getSizeRangeAtScale(e,i,a),l=s&&function(e){for(var t=e.minSize,r=(e.maxSize-t)/4,n=[],i=0;i<5;i++)n.push(t+r*i);return n}(s),!s&&!l)return[2,void 0];c=l.map((function(t){return function(e,t,r){var n=r.minSize,i=r.maxSize,a=t.minDataValue,o=t.maxDataValue;return e<=n?a:e>=i?o:(e-n)/(i-n)*(o-a)+a}(t,e,s)})),c=o.round(c),u=1,n.label=2;case 2:return u<c.length-1?[4,h(e,t,c[u],c[u-1],i,a)]:[3,5];case 3:(p=n.sent())&&(c[u]=p[0],l[u]=p[1]),n.label=4;case 4:return u++,[3,2];case 5:return[2,c]}}))}))}function h(e,t,r,i,a,s){return n.__awaiter(this,void 0,void 0,(function(){var l,c,u,p,d,h,f,m,v,_,g,b,w,L,S,x,E,P,M,A,C,I;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,y(e,t,r,a,s)];case 1:return l=n.sent(),[4,y(e,t,i,a,s)];case 2:c=n.sent(),u=o.numDigits(r),p=u.fractional,d=20,h=u.integer,f=null,m=null,r>0&&r<1&&(f=Math.pow(10,p),r*=f,h=o.numDigits(r).integer),v=h-1,n.label=3;case 3:return v>=0?(_=Math.pow(10,v),g=Math.floor(r/_)*_,b=Math.ceil(r/_)*_,null!=f&&(g/=f,b/=f),w=(g+b)/2,I=o.round([g,w,b],{indexes:[1]}),w=I[1],[4,y(e,t,g,a,s)]):[3,8];case 4:return L=n.sent(),[4,y(e,t,b,a,s)];case 5:return S=n.sent(),[4,y(e,t,w,a,s)];case 6:if(x=n.sent(),E=o.percentChange(l,L,c,null),P=o.percentChange(l,S,c,null),M=o.percentChange(l,x,c,null),A=E.previous<=d,C=P.previous<=d,A&&C&&(E.previous<=P.previous?(A=!0,C=!1):(C=!0,A=!1)),A?m=[g,L]:C?m=[b,S]:M.previous<=d&&(m=[w,x]),m)return[3,8];n.label=7;case 7:return v--,[3,3];case 8:return[2,m]}}))}))}function y(e,t,i,a,o){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e,t){Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,(0,n.sent().getSize)(e,i,{scale:a,view:o,shape:"simple-marker"===t.type?t.style:null})]}}))}))}t.getRampStops=function(e,r,h,f,m,v){return n.__awaiter(this,void 0,void 0,(function(){var _,g,b,w,L,S,x,E,P,M,A,C,I,O,R,T,k=this;return n.__generator(this,(function(N){switch(N.label){case 0:return _=r.legendOptions,g=_&&_.customValues,b=function(e,t){var r=null,n=null;if("simple"===e.type)r=e.symbol;else if("class-breaks"===e.type){var a=e.classBreakInfos;r=a&&a[0]&&a[0].symbol,n=a.length>1}else"unique-value"===e.type&&(r=(a=e.uniqueValueInfos)&&a[0]&&a[0].symbol,n=a.length>1);return!r||function(e){return!!e&&(i.isSymbol3D(e)?!!e.symbolLayers&&e.symbolLayers.some((function(e){return e&&"fill"===e.type})):-1!==e.type.indexOf("fill"))}(r)?null:(r=r.clone(),(t||n)&&(r.type.indexOf("3d")>-1?function(e){s.isVolumetricSymbol(e)||("line-3d"===e.type?e.symbolLayers.forEach((function(e){e.material={color:p}})):e.symbolLayers.forEach((function(e){"icon"!==e.type||e.resource&&e.resource.href?e.material={color:u}:(e.material={color:c},e.outline={color:p,size:1.5})})))}(r):function(e){-1!==e.type.indexOf("line")?e.color=p:(e.color=c,"simple-marker"===e.type&&(e.outline={color:p,width:1.5}))}(r)),r)}(e,h),w=!!b,L=!!g,S=null!=r.minSize&&null!=r.maxSize,x=r.stops&&r.stops.length>1,E=!!r.target,w&&(L||S||x&&!E)?(P=s.isVolumetricSymbol(b),M=null,A=null,C=null,!P||x?[3,1]:(A=o.round([r.minDataValue,r.maxDataValue]),[3,4])):[2,void 0];case 1:return(I=g)?[3,3]:[4,d(r,b,f,m)];case 2:I=N.sent(),N.label=3;case 3:A=I,N.label=4;case 4:return!A&&x&&(A=r.stops.map((function(e){return e.value})),(M=r.stops.some((function(e){return!!e.label})))&&(C=r.stops.map((function(e){return e.label})))),P&&A&&A.length>2&&(A=[A[0],A[A.length-1]]),A?(O=[t.REAL_WORLD_MIN_SIZE,t.REAL_WORLD_MAX_SIZE],R=s.getSymbolOutlineSize(b),T=M?null:function(e,t){var r=e.length-1;return e.map((function(e,n){return l.createStopLabel(e,n,r,t)}))}(A,v),[4,a.all(A.map((function(e,t){return n.__awaiter(k,void 0,void 0,(function(){var a,o,l,c;return n.__generator(this,(function(n){switch(n.label){case 0:return P?(l=O[t],[3,3]):[3,1];case 1:return[4,y(r,b,e,f,m)];case 2:l=n.sent(),n.label=3;case 3:return o=function(e,t){var r=e.clone();if(i.isSymbol3D(r))s.isVolumetricSymbol(r)||r.symbolLayers.forEach((function(e){"fill"!==e.type&&(e.size=t)}));else if("esri.symbols.SimpleMarkerSymbol"===r.declaredClass)r.size=t;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(r)){var n=r.width,a=r.height;r.height=t,r.width=t*(n/a)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(r)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(r)&&r.font&&(r.font.size=t):r.width=t;return r}(b,a=l),c=M?C[t]:T[t],[2,{value:e,symbol:o,label:c,size:a,outlineSize:R}]}}))}))})))]):[2,null];case 5:return[2,N.sent().reverse()]}}))}))}}.apply(null,n))||(e.exports=i)},687:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(258),r(167),r(171),r(151),r(396),r(188),r(504),r(505),r(183)],void 0===(i=function(e,t,r,n,i,a,o,s,l,c,u,p){var d="esri-legend--card__image-label",h="esri-legend--card__layer-caption",y="esri-legend--card__layer-row",f="esri-legend--card__ramp-label",m="esri-legend--card__section",v="esri-legend--card__service",_="esri-legend--card__symbol-row",g="esri-legend--card__service-caption-container",b="esri-legend--card__size-ramp-container",w="esri-widget__heading",L="esri-legend--card__",S=window.devicePixelRatio;return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._handles=new i,n._hasIndicators=!1,n._selectedSectionName=null,n._sectionNames=[],n._sectionMap=new Map,n.activeLayerInfos=null,n.layout="stack",n.messages=null,n.messagesCommon=null,n.type="card",n.view=null,n}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this.own([this.watch("activeLayerInfos",(function(t){e._handles.removeAll(),e._watchForSectionChanges(t)}))])},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null},t.prototype.render=function(){var e,t=this;this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=768||"stack"===this.layout;var r=this.activeLayerInfos,i=r&&r.toArray().map((function(e){return t._renderLegendForLayer(e)})).filter((function(e){return!!e}));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;var a=this._sectionNames.length,o=this._sectionNames.map((function(e,r){var i,o=n.substitute(t.messagesCommon.pagination.pageText,{index:r+1,total:a});return p.tsx("div",{key:e,"aria-label":o,title:o,tabIndex:0,onclick:t._selectSection,onkeydown:t._selectSection,bind:t,class:t.classes("esri-legend--card__carousel-indicator",(i={},i["esri-legend--card__carousel-indicator--activated"]=t._selectedSectionName===e,i)),"data-section-name":e})})),s=this._hasIndicators&&a>1?p.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation"},o):null,l=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):i&&i.length?i:null,c=((e={})["esri-legend--stacked"]=this._hasIndicators,e);return p.tsx("div",{class:this.classes("esri-legend--card",c)},s,l||p.tsx("div",{class:"esri-legend--card__message"},this.messages.noLegend))},t.prototype._selectSection=function(e){var t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)},t.prototype._watchForSectionChanges=function(e){var t=this;if(this._generateSectionNames(),e){e.forEach((function(e){var r="activeLayerInfo-"+e.layer.uid+"-version-change";t._handles.remove(r),t._watchForSectionChanges(e.children),t._handles.add(e.watch("version",(function(){return t._generateSectionNames()})),r)}));var r="activeLayerInfos-collection-change";this._handles.remove(r),this._handles.add(e.on("change",(function(){return t._watchForSectionChanges(e)})),r)}},t.prototype._generateSectionNames=function(){this._sectionNames.length=0,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)},t.prototype._generateSectionNamesForActiveLayerInfo=function(e){var t=this;e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((function(r,n){t._sectionNames.push(""+L+e.layer.uid+"-type-"+r.type+"-"+n)}))},t.prototype._renderLegendForLayer=function(e){var t,r=this;if(!e.ready)return null;if(e.children.length){var n=e.children.map((function(e){return r._renderLegendForLayer(e)})).toArray();return p.tsx("div",{key:e.layer.uid,class:this.classes(v,"esri-legend--card__group-layer")},p.tsx("div",{class:g},e.title),n)}var i=e.legendElements;if(i&&!i.length)return null;var a=i.some((function(e){return"relationship-ramp"===e.type})),o=i.map((function(t,n){return r._renderLegendForElement(t,e,n,a)})).filter((function(e){return!!e}));if(!o.length)return null;var s=((t={})["esri-legend--card__group-layer-child"]=!!e.parent,t);return p.tsx("div",{key:e.layer.uid,class:this.classes(v,s)},p.tsx("div",{class:g},p.tsx("div",{class:"esri-legend--card__service-caption-text"},e.title)),p.tsx("div",{class:"esri-legend--card__service-content"},o))},t.prototype._renderLegendForElement=function(e,t,r,n){var i,a=this;void 0===n&&(n=!1);var o="color-ramp"===e.type,s="opacity-ramp"===e.type,l="size-ramp"===e.type,d=t.layer,y=e.title,f=null;if("string"==typeof y)f=y;else if(y){var v=u.getTitle(this.messages,y,o||s);f=y.title?y.title+" ("+v+")":v}var g=""+L+d.uid+"-type-"+e.type+"-"+r,b=this._hasIndicators?p.tsx("div",null,p.tsx("h3",{class:this.classes(w,"esri-legend--card__carousel-title")},t.title),p.tsx("h4",{class:this.classes(w,h)},f)):f?p.tsx("h4",{class:this.classes(w,h)},f):null,S=null;if("symbol-table"===e.type){var x=e.infos.map((function(r,n){return a._renderLegendForElementInfo(r,t,e.legendType,n)})).filter((function(e){return!!e}));if(x.length){var E=x[0].properties.classes&&x[0].properties.classes[_],P=((i={})["esri-legend--card__label-container"]=!E&&!n,i["esri-legend--card__relationship-label-container"]=n,i);S=p.tsx("div",{key:g,class:m},b,p.tsx("div",{class:this.classes(P)},x))}}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?S=p.tsx("div",{key:g,class:m},b,this._renderLegendForRamp(e,d.opacity)):l?S=p.tsx("div",{key:g,class:m},b,this._renderSizeRamp(e,d.opacity)):"relationship-ramp"===e.type&&(S=p.tsx("div",{key:g,class:this.classes(m,"esri-legend--card__relationship-section")},b,c.renderRelationshipRamp(e,this.id,d.opacity)));return S?(this._sectionMap.set(g,S),S):null},t.prototype._renderLegendForElementInfo=function(e,t,r,n){var i,a,o,s,l,c=t.layer;if(e.type)return this._renderLegendForElement(e,t,n);var h=u.isImageryStretchedLegend(c,r);if(e.symbol&&e.preview){if(-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return p.tsx("div",{key:n,bind:e.preview,afterCreate:u.attachToNode});var f=((i={})["esri-legend--card__symbol-cell"]=this._hasIndicators,i);return p.tsx("div",{key:n,class:this.classes(y,(a={},a[_]=this._hasIndicators,a))},p.tsx("div",{class:this.classes(f),bind:e.preview,afterCreate:u.attachToNode}),p.tsx("div",{class:this.classes(d,(o={},o["esri-legend--card__label-cell"]=this._hasIndicators,o))},u.getTitle(this.messages,e.label,!1)||""))}var m=255,v=255,g=255,b=0,w=255,L=255,S=255,x=0,E=e.symbol.color&&e.symbol.color.a,P=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;E&&(m=e.symbol.color.r,v=e.symbol.color.g,g=e.symbol.color.b,b=e.symbol.color.a*c.opacity),P&&(w=e.symbol.outline.color.r,L=e.symbol.outline.color.g,S=e.symbol.outline.color.b,x=e.symbol.outline.color.a*c.opacity);var M=null===(l=null===(s=e.symbol.color)||void 0===s?void 0:s.isBright)||void 0===l||l,A=M?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",C={background:E?"rgba("+m+", "+v+", "+g+", "+b+")":"none",color:M?"black":"white",textShadow:"-1px -1px 0 "+A+",\n                                              1px -1px 0 "+A+",\n                                              -1px 1px 0 "+A+",\n                                              1px 1px 0 "+A,border:P?"1px solid rgba("+w+", "+L+", "+S+", "+x+")":"none"};return p.tsx("div",{key:n,class:y},p.tsx("div",{class:"esri-legend--card__label-element",styles:C}," ",e.label," "))}if(e.src){var I=this._renderImage(e,c,h);return p.tsx("div",{key:n,class:y},I,p.tsx("div",{class:d},e.label||""))}},t.prototype._renderImage=function(e,t,r){var n,i=e.label,a=e.src,o=e.opacity,s=((n={})["esri-legend--card__imagery-layer-image--stretched"]=r,n["esri-legend--card__symbol"]=!r,n),l={opacity:""+(null!=o?o:t.opacity)};return p.tsx("img",{alt:u.getTitle(this.messages,i,!1),src:a,border:0,width:e.width,height:e.height,class:this.classes(s),styles:l})},t.prototype._renderSizeRampLines=function(e){var t=e.infos,r=t[0],n=t[t.length-1],i=r.symbol,o=this._hasIndicators,s=a.pt2px(r.size+r.outlineSize)*S,l=a.pt2px(n.size+n.outlineSize)*S,c=o?s:s+50*S,d=o?s/2+50*S:s,h=function(e){if(e){if(e.type.indexOf("3d")>-1){var t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;var r=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return"triangle"===r||"cone"===r||"tetrahedron"===r}return"triangle"===e.style}}(i),y=function(e){if(e){if(e.type.indexOf("3d")>-1){var t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;var r=e.symbolLayers.getItemAt(t-1),n=r.resource&&r.resource.primitive;return"circle"===n||"cross"===n||"kite"===n||"sphere"===n||"cube"===n||"diamond"===n}var i=e.style;return"circle"===i||"diamond"===i||"cross"===i}}(i),f=document.createElement("canvas");f.width=c,f.height=d,f.style.width=f.width/S+"px",f.style.height=f.height/S+"px";var m=f.getContext("2d");if(o){m.beginPath();var v=c/2-l/2,_=d;m.moveTo(0,0),m.lineTo(v,_);var g=c,b=c/2+l/2,w=d;m.moveTo(g,0),m.lineTo(b,w)}else{m.beginPath();var L=d/2-l/2,x=c;m.moveTo(0,L),m.lineTo(x,0);var E=d/2+l/2,P=c,M=d;m.moveTo(0,E),m.lineTo(P,M)}return m.strokeStyle="#ddd",m.stroke(),p.tsx("div",{bind:f,afterCreate:u.attachToNode,styles:o?{display:"flex",marginTop:"-"+(h?0:y?s/2:0)+"px",marginBottom:"-"+(h?l:y?l/2:0)+"px"}:{display:"flex",marginRight:"-"+(h?0:y?s/2:0)+"px",marginLeft:"-"+(h?0:y?l/2:0)+"px"}})},t.prototype._renderSizeRamp=function(e,t){var r,n=e.infos,i=n[0].label,a=n[n.length-1].label,o=n[0].preview,s=n[n.length-1].preview,l=this._hasIndicators,c={"flex-direction":l?"column":"row-reverse"};o&&((o=o.cloneNode(!0)).style.display="flex"),s&&((s=s.cloneNode(!0)).style.display="flex");var d={opacity:null!=t?""+t:""};return p.tsx("div",{class:this.classes(y,(r={},r["esri-legend--card__size-ramp-row"]=l,r))},p.tsx("div",{class:f},l?i:a),p.tsx("div",{class:b,styles:c},p.tsx("div",{bind:o,afterCreate:u.attachToNode,class:"esri-legend--card__size-ramp-preview",styles:d}),this._renderSizeRampLines(e),p.tsx("div",{bind:s,afterCreate:u.attachToNode,class:b,styles:d})),p.tsx("div",{class:f},l?a:i))},t.prototype._renderLegendForRamp=function(e,t){var r=e.infos,n="heatmap-ramp"===e.type,i=r.length-1,a=i>2&&!n?25*i:100,o=a+20,l=r.slice(0).reverse();l.forEach((function(e,t){e.offset=n?e.ratio:t/i}));var c=l.length-1,u=l.length%2!=0&&l[l.length/2|0],d=u&&p.tsx("div",{class:"esri-legend--card__interval-separators-container"},p.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),p.tsx("div",{class:f},u.label)),h=r[r.length-1].label,m=r[0].label,v=null;null!=t&&(v="opacity: "+t);var _=[[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:l[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,y:0,width:a,height:25},fill:{type:"linear",x1:10,y1:0,x2:a+10,y2:0,colors:l},stroke:{width:0}},{shape:{type:"path",path:"M"+(a+10)+" 0 L"+o+" 12.5 L"+(a+10)+" 25 Z"},fill:l[c].color,stroke:{width:0}}]],g=s.renderSVG(_,o,25),b=this.messages;return p.tsx("div",{class:y},p.tsx("div",{class:f},n?b[h]:h),p.tsx("div",{class:"esri-legend--card__symbol-container"},p.tsx("div",{style:v},g),d),p.tsx("div",{class:f},n?b[m]:m))},r.__decorate([p.renderable(),o.property()],t.prototype,"activeLayerInfos",void 0),r.__decorate([o.property()],t.prototype,"layout",void 0),r.__decorate([o.property(),p.renderable(),p.messageBundle("esri/widgets/Legend/t9n/Legend")],t.prototype,"messages",void 0),r.__decorate([o.property(),p.renderable(),p.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0),r.__decorate([o.property({readOnly:!0})],t.prototype,"type",void 0),r.__decorate([o.property()],t.prototype,"view",void 0),r.__decorate([p.accessibleHandler()],t.prototype,"_selectSection",null),r.__decorate([o.subclass("esri.widgets.Legend.styles.Card")],t)}(l)}.apply(null,n))||(e.exports=i)},688:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(258),r(151),r(188),r(504),r(505),r(183)],void 0===(i=function(e,t,r,n,i,a,o,s,l){var c="esri-legend__service",u="esri-legend__layer-row",p="esri-legend__layer-cell esri-legend__layer-cell--info",d="esri-legend__imagery-layer-info--stretched",h="esri-legend__layer-cell esri-legend__layer-cell--symbols",y="esri-legend__symbol";return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.activeLayerInfos=null,n.messages=null,n.type="classic",n}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.activeLayerInfos,r=t&&t.toArray().map((function(t){return e._renderLegendForLayer(t)})).filter((function(e){return!!e}));return l.tsx("div",null,r&&r.length?r:l.tsx("div",{class:"esri-legend__message"},this.messages.noLegend))},t.prototype._renderLegendForLayer=function(e){var t,r=this;if(!e.ready)return null;var n=!!e.children.length,i="esri-legend__"+e.layer.uid+"-version-"+e.version,a=e.title?l.tsx("h3",{class:this.classes("esri-widget__heading","esri-legend__service-label")},e.title):null;if(n){var o=e.children.map((function(e){return r._renderLegendForLayer(e)})).toArray();return l.tsx("div",{key:i,class:this.classes(c,"esri-legend__group-layer")},a,o)}var s=e.legendElements;if(s&&!s.length)return null;var u=s.map((function(t){return r._renderLegendForElement(t,e.layer)})).filter((function(e){return!!e}));if(!u.length)return null;var p=((t={})["esri-legend__group-layer-child"]=!!e.parent,t);return l.tsx("div",{key:i,class:this.classes(c,p)},a,l.tsx("div",{class:"esri-legend__layer"},u))},t.prototype._renderLegendForElement=function(e,t,r){var n,i=this,a="color-ramp"===e.type,c="opacity-ramp"===e.type,u="size-ramp"===e.type,p=null;if("symbol-table"===e.type||u){var d=e.infos.map((function(r){return i._renderLegendForElementInfo(r,t,u,e.legendType)})).filter((function(e){return!!e}));d.length&&(p=l.tsx("div",{class:"esri-legend__layer-body"},d))}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?p=this._renderLegendForRamp(e,t.opacity):"relationship-ramp"===e.type&&(p=o.renderRelationshipRamp(e,this.id,t.opacity));if(!p)return null;var h=e.title,y=null;if("string"==typeof h)y=h;else if(h){var f=s.getTitle(this.messages,h,a||c);y=s.isRendererTitle(h,a||c)&&h.title?h.title+" ("+f+")":f}var m=r?"esri-legend__layer-child-table":"esri-legend__layer-table",v=y?l.tsx("div",{class:"esri-legend__layer-caption"},y):null,_=((n={})["esri-legend__layer-table--size-ramp"]=u||!r,n);return l.tsx("div",{class:this.classes(m,_)},v,p)},t.prototype._renderLegendForRamp=function(e,t){var r=this,n=e.infos,i="opacity-ramp"===e.type,a="heatmap-ramp"===e.type,o="stretch-ramp"===e.type,c=e.preview,d=i?"esri-legend__opacity-ramp":"";c.className="esri-legend__color-ramp "+d,null!=t&&(c.style.opacity=t.toString());var y=n.map((function(e){return l.tsx("div",{class:e.label?"esri-legend__ramp-label":null},a?r.messages[e.label]:o?r._getStretchStopLabel(e):e.label)})),f={height:c.style.height};return l.tsx("div",{class:u},l.tsx("div",{class:h,styles:{width:"24px"}},l.tsx("div",{class:"esri-legend__ramps",bind:c,afterCreate:s.attachToNode})),l.tsx("div",{class:p},l.tsx("div",{class:"esri-legend__ramp-labels",styles:f},y)))},t.prototype._getStretchStopLabel=function(e){return e.label?this.messages[e.label]+": "+n.formatNumber(e.value,{style:"decimal"}):""},t.prototype._renderLegendForElementInfo=function(e,t,r,n){var i,a;if(e.type)return this._renderLegendForElement(e,t,!0);var o=null,c=s.isImageryStretchedLegend(t,n);if(e.symbol&&e.preview?o=l.tsx("div",{class:y,bind:e.preview,afterCreate:s.attachToNode}):e.src&&(o=this._renderImage(e,t,c)),!o)return null;var f=((i={})[d]=c,i),m=((a={})[d]=c,a["esri-legend__size-ramp"]=!c&&r,a);return l.tsx("div",{class:u},l.tsx("div",{class:this.classes(h,m)},o),l.tsx("div",{class:this.classes(p,f)},s.getTitle(this.messages,e.label,!1)||""))},t.prototype._renderImage=function(e,t,r){var n,i=e.label,a=e.src,o=e.opacity,c=((n={})["esri-legend__imagery-layer-image--stretched"]=r,n[y]=!r,n),u={opacity:""+(null!=o?o:t.opacity)};return l.tsx("img",{alt:s.getTitle(this.messages,i,!1),src:a,border:0,width:e.width,height:e.height,class:this.classes(c),styles:u})},r.__decorate([l.renderable(),i.property()],t.prototype,"activeLayerInfos",void 0),r.__decorate([i.property(),l.renderable(),l.messageBundle("esri/widgets/Legend/t9n/Legend")],t.prototype,"messages",void 0),r.__decorate([i.property({readOnly:!0})],t.prototype,"type",void 0),r.__decorate([i.subclass("esri.widgets.Legend.styles.Classic")],t)}(a)}.apply(null,n))||(e.exports=i)}}]);
//# sourceMappingURL=37.js.map