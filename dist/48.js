(function(){var e={"esri/layers/support/PixelBlock":267,"esri/core/pbf":268,"esri/layers/support/RasterFunction":313,"esri/layers/support/rasterFunctions/pixelUtils":376,"esri/layers/support/MosaicRule":400,"esri/layers/support/DimensionalDefinition":421,"esri/layers/support/imageryRendererUtils":422,"esri/layers/ImageryLayer":460,"esri/layers/support/RasterJobHandler":550,"esri/layers/mixins/ArcGISImageService":689,"esri/layers/support/ExportImageServiceParameters":690,"esri/tasks/ImageServiceIdentifyTask":693,"esri/tasks/support/ImageServiceIdentifyResult":694,"esri/tasks/support/ImageServiceIdentifyParameters":696},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[48,64],{1009:function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n)()(!0);i.push([e.i,".esri-popup__main-container .subtitle{font-weight:normal;font-style:italic}.esri-popup__main-container .description{margin-bottom:1em !important}.esri-popup__main-container .esri-feature__attachments.esri-feature__content-element h2{display:none}.esri-popup__main-container .esri-feature__attachments.esri-feature__content-element .esri-attachments__label{display:none}.esri-popup__main-container .esri-feature__attachments.esri-feature__content-element .esri-attachments__item-button{padding:0;margin-bottom:0}.esri-popup__main-container .esri-feature__attachments.esri-feature__content-element .esri-attachments__item{margin-bottom:0}.esri-feature__last-edited-info.esri-feature__content-element{display:none}.esri-feature__content-element.esri-feature__text{padding:0 7px 7px 7px}\n","",{version:3,sources:["webpack://src/components/chapters/hurricanes/popupStyles.scss"],names:[],mappings:"AAAA,sCAEE,kBAAmB,CACnB,iBAAkB,CAHpB,yCAOE,4BAA6B,CAC7B,wFAMC,YAAa,CAHhB,8GAOG,YAAa,CAPhB,oHAWG,SAAU,CACV,eAAgB,CAZnB,6GAgBG,eAAgB,CAChB,8DAMD,YAAa,CACb,kDAID,qBAAsB",sourcesContent:[".esri-popup__main-container {\n\t.subtitle {\n\t\tfont-weight: normal;\n\t\tfont-style: italic;\n\t}\n\n\t.description {\n\t\tmargin-bottom: 1em !important;\n\t}\n}\n\n.esri-popup__main-container {\n\t.esri-feature__attachments.esri-feature__content-element {\n\t\th2 {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.esri-attachments__label {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.esri-attachments__item-button {\n\t\t\tpadding: 0;\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t.esri-attachments__item {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n}\n\n.esri-feature__last-edited-info {\n\t&.esri-feature__content-element {\n\t\tdisplay: none;\n\t}\n}\n\n.esri-feature__content-element.esri-feature__text {\n\tpadding: 0 7px 7px 7px;\n}\n"],sourceRoot:""}]),t.default=i},181:function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n)()(!0);i.push([e.i,".esri-scroll-zoom-toggle{padding:0.7em 1.5em}.esri-scroll-zoom-toggle--inner-wrapper{display:flex;flex-direction:row;align-items:center;cursor:pointer}.esri-scroll-zoom-toggle--input-checkbox{margin-left:1em;margin-bottom:6px;cursor:pointer}\n","",{version:3,sources:["webpack://src/components/mapcomponents/ScrollZoom.scss"],names:[],mappings:"AAAA,yBACC,mBAAoB,CACpB,wCAGA,YAAa,CACb,kBAAmB,CACnB,kBAAmB,CACnB,cAAe,CACf,yCAGA,eAAgB,CAChB,iBAAkB,CAClB,cAAe",sourcesContent:[".esri-scroll-zoom-toggle {\n\tpadding: 0.7em 1.5em;\n}\n\n.esri-scroll-zoom-toggle--inner-wrapper {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n.esri-scroll-zoom-toggle--input-checkbox {\n\tmargin-left: 1em;\n\tmargin-bottom: 6px;\n\tcursor: pointer;\n}\n"],sourceRoot:""}]),t.default=i},1988:function(e,t,r){var n=r(99),i=r(1009);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=n(i,o);if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(1009,(function(){"string"==typeof(i=(i=r(1009)).__esModule?i.default:i)&&(i=[[e.i,i,""]]),function(e,t,r){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!r||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(r&&"default"===n||e[n]))return!1;return!0}(s,i.locals)?(s=i.locals,a(i)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),e.exports=i.locals||{}},212:function(e,t,r){var n=r(99),i=r(181);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=n(i,o);if(!i.locals||e.hot.invalidate){var s=i.locals;e.hot.accept(181,(function(){"string"==typeof(i=(i=r(181)).__esModule?i.default:i)&&(i=[[e.i,i,""]]),function(e,t,r){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!r||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(r&&"default"===n||e[n]))return!1;return!0}(s,i.locals)?(s=i.locals,a(i)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),e.exports=i.locals||{}},213:function(e,t,r){"use strict";var n=r(2),i=r.n(n),o=r(3),a=r(108),s=r.n(a),l=r(6),u=r(5),p=r(284),c=r.n(p),d=r(275),f=r.n(d),h=r(266),m=r.n(h),y=r(287),g=r.n(y),v=r(278),_=r.n(v),b=r(157),I=r(188),T=r.n(I),w=r(151),x=r(183);r(212);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N,R,A,E=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),O=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},C="esri-widget esri-scroll-zoom-toggle",k="esri-scroll-zoom-toggle--inner-wrapper",M="esri-scroll-zoom-toggle--input-checkbox",P=function(e){function t(t){var r=e.call(this,t)||this;return r.enabled=!1,r._toggleZoomOnScroll=function(){r.enabled=!r.enabled,r.enabled?(r.view.navigation.mouseWheelZoomEnabled=!0,r.view.navigation.browserTouchPanEnabled=!0):(r.view.navigation.mouseWheelZoomEnabled=!1,r.view.navigation.browserTouchPanEnabled=!1)},r}return E(t,e),t.prototype.render=function(){return Object(x.tsx)("div",{class:C},Object(x.tsx)("div",{class:k,onclick:this._toggleZoomOnScroll},Object(x.tsx)("div",null,"Enable Scroll Zoom"),Object(x.tsx)("input",{type:"checkbox",class:M,checked:this.enabled})))},O([Object(w.property)(),Object(x.renderable)()],t.prototype,"enabled",void 0),t=O([Object(w.subclass)("esri.widgets.ScrollZoom")],t)}(T.a),j=function(){return(j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},F=function(e){var t=e.metadata,r=e.sources,o=e.customFeatures,a=e.customFeaturesPerPage,s=e.customMapDOM,l=e.pageRefs,p=e.currentPage,d=e.mapState,h=d.basemap,y=d.layers,v=d.position,I=d.customBehavior,T=Object(n.useRef)(null),w=Object(n.useState)(null),x=w[0],S=w[1],N=Object(n.useState)(!0),R=N[0],A=N[1],E=Object(n.useState)(null),O=E[0],C=E[1];return Object(n.useEffect)((function(){var e=new f.a({basemap:h||null,layers:y}),n=j(j({container:T.current,map:e},v),{navigation:{mouseWheelZoomEnabled:!1,browserTouchPanEnabled:!1}}),a=t.sceneview?new g.a(n):new m.a(n);(S({map:e,view:a}),t.fullWidthMap&&!t.sceneview)&&(document.querySelector("#"+t.name+" .esri-ui-top-left").style.left="calc(30% - 10px)");if(t.fullWidthMap&&t.sceneview){var s=document.querySelector("#"+t.name+' div[class^="SideCar"]');s.style.left="40px",s.style.width="500px",s.style.transition="all 0.5s";var l=new _.a({view:a,expandIconClass:"esri-icon-question",expandTooltip:"Information",expanded:!0});a.ui.add([{component:l,position:"top-left",index:0}]),l.container.addEventListener("click",(function(){l.expanded?(s.style.left="40px",s.style.opacity="1",s.style.pointerEvents="auto",s.style.transition="all 0.5s"):(s.style.left="35px",s.style.opacity="0",s.style.pointerEvents="none",s.style.transition="none")}));var p=new P({view:a});a.ui.add(p,"top-right")}document.createElement("div").innerHTML="Data sources here";var d=new _.a({view:a,expandIconClass:"clipboard-icon",expandTooltip:"Data Sources",collapseTooltip:"Close",content:c.a.renderToStaticMarkup(i.a.createElement(u.a,{sources:r,theme:t.theme}))});a.ui.add(d,"bottom-right"),t.disableSpinnerAfterInitialLoad?b.whenTrueOnce(a,"updating",(function(){A(!0)})):b.whenTrue(a,"updating",(function(){A(!0)})),b.whenFalse(a,"updating",(function(){A(!1)})),o&&o({map:e,view:a,layers:y})}),[]),Object(n.useEffect)((function(){x&&(x.map.layers=y)}),[y]),Object(n.useEffect)((function(){x&&(x.map.basemap=h)}),[h,x]),Object(n.useEffect)((function(){x&&v&&x.view.goTo({target:v.center,zoom:v.zoom},{duration:1e3})}),[v]),Object(n.useEffect)((function(){if(x)if(I){var e=x.map,t=x.view;O&&O();var r=I({map:e,view:t});C((function(){return r}))}else O&&O()}),[I,x]),Object(n.useEffect)((function(){if(x&&a){var e=x.view,t=x.map,r=a({map:t,view:e,layers:y,pageRefs:l,currentPage:p});if(r)return r}}),[x,p,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"arcgis-map "+t.name,ref:T}),s&&x&&s(x),R&&i.a.createElement(u.c,null))},Y=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},V=o.b.section.withConfig({displayName:"ChapterTemplate__Wrapper",componentId:"sc-1cxnsi8-0"})(R||(R=Y(["\n\twidth: 100%;\n\theight: ",";\n\tmin-height: 500px;\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: ",";\n\t/* scroll-snap-stop: always;\n\tscroll-snap-align: start; */\n"],["\n\twidth: 100%;\n\theight: ",";\n\tmin-height: 500px;\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: ",";\n\t/* scroll-snap-stop: always;\n\tscroll-snap-align: start; */\n"])),(function(e){return e.height||100*e.screensTall+"vh"||"auto"}),(function(e){return"light"===e.maptheme?"":"#242424"})),D=o.b.div.withConfig({displayName:"ChapterTemplate__Trigger",componentId:"sc-1cxnsi8-1"})(A||(A=Y(["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 3px;\n\twidth: 3px;\n\tpointer-events: none;\n"],["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 3px;\n\twidth: 3px;\n\tpointer-events: none;\n"])));t.a=function(e){e.customMap;var t=e.data,r=t.metadata,o=t.sources,a=t.customFeatures,p=t.customFeaturesPerPage,c=t.customMapDOM,d=t.customChapterDOM,f=t.pages,h=Object(n.useState)(0),m=h[0],y=h[1],g=Object(n.useContext)(l.a).dispatch,v={};return Object(n.useMemo)((function(){return i.a.createElement(V,{maptheme:r.theme,id:r.name,screensTall:f.length>1?f.length:1},i.a.createElement(u.i,{floating:r.fullWidthMap},f.map((function(e,t){return i.a.createElement(u.d,{floating:r.fullWidthMap,ref:function(e){return v[t]=e},key:r.name+"-page-"+t},i.a.createElement(u.e,{theme:r.theme,floating:r.fullWidthMap},i.a.createElement(u.g,null,e.title),i.a.createElement(u.f,{floating:r.fullWidthMap},e.content)),i.a.createElement(s.a,{onChange:function(e){e&&(g({type:"SET_NAV",payload:r.name}),y(t))}},(function(e){e.isVisible;return i.a.createElement(D,null)})))}))),i.a.createElement(s.a,{partialVisibility:!0},(function(e){var t=e.isVisible;return i.a.createElement(u.b,{fullWidth:r.fullWidthMap,className:"arcgis-map-"+r.theme},t&&i.a.createElement(F,{mapState:f[m].mapState,customFeatures:a,customFeaturesPerPage:p,customMapDOM:c,metadata:r,sources:o,pageRefs:v,currentPage:m}))})),d&&d)}),[m])}},2289:function(e,t,r){"use strict";r.r(t);var n=r(2),i=r.n(n),o=r(222),a=r.n(o),s=r(460),l=r.n(s),u=r(313),p=new l.a({url:"https://utility.arcgis.com/usrsvcs/servers/ad47b1b7d5ea46ffafdc0c75526a1986/rest/services/WorldElevation/TopoBathy/ImageServer",opacity:.1,renderingRule:u.fromJSON({name:"Grayscale_Hillshade",description:"This server-side function will apply an on-the-fly process to the input elevation values to generate a single band grayscale hillshade. ",help:"Raster Function Templates may be activated in ArcMap by loading the service into the map, right clicking on the service in the Table of Contents to select Properties, and selecting the desired function from the Server Functions tab.  For help with invoking raster functions via REST calls, see http://resources.arcgis.com/en/help/rest/apiref/. ",functionType:0,thumbnail:""})}),c=new a.a({url:"https://services6.arcgis.com/VqchQRhgtql2vsmO/arcgis/rest/services/Hurricanes2020/FeatureServer/0",renderer:{type:"unique-value",visualVariables:[{type:"size",field:null,valueExpression:"var INTENSITY=$feature.INTENSITY\r\nvar cs=$view.scale\r\n\r\nWhen (cs<=74000000&&cs>=37000000&&INTENSITY>=137,30,\r\ncs<=74000000&&cs>=37000000&&INTENSITY<137&&INTENSITY>112,25,\r\ncs<=74000000&&cs>=37000000&&INTENSITY<=112&&INTENSITY>95,20,\r\ncs<=74000000&&cs>=37000000&&INTENSITY<=95&&INTENSITY>82,15,\r\ncs<=74000000&&cs>=37000000&&INTENSITY<=82&&INTENSITY>63,10,\t\r\ncs<=74000000&&cs>=37000000&&INTENSITY<=63&&INTENSITY>33,0,\r\ncs<=74000000&&cs>=37000000&&INTENSITY<=33&&INTENSITY>=0,0,\r\n\r\ncs<37000000&&cs>=18500000&&INTENSITY>=137,37,\r\ncs<37000000&&cs>=18500000&&INTENSITY<137&&INTENSITY>112,32,\r\ncs<37000000&&cs>=18500000&&INTENSITY<=112&&INTENSITY>95,27,\r\ncs<37000000&&cs>=18500000&&INTENSITY<=95&&INTENSITY>82,22,\r\ncs<37000000&&cs>=18500000&&INTENSITY<=82&&INTENSITY>63,18,\r\ncs<37000000&&cs>=18500000&&INTENSITY<=63&&INTENSITY>33,0,\r\ncs<37000000&&cs>=18500000&&INTENSITY<=33&&INTENSITY>=0,0,\r\n\r\ncs<18500000&&cs>=9300000&&INTENSITY>=137,65,\r\ncs<18500000&&cs>=9300000&&INTENSITY<137&&INTENSITY>112,55,\r\ncs<18500000&&cs>=9300000&&INTENSITY<=112&&INTENSITY>95,45,\r\ncs<18500000&&cs>=9300000&&INTENSITY<=95&&INTENSITY>82,35,\r\ncs<18500000&&cs>=9300000&&INTENSITY<=82&&INTENSITY>63,25,\r\ncs<18500000&&cs>=9300000&&INTENSITY<=63&&INTENSITY>33,0,\r\ncs<18500000&&cs>=9300000&&INTENSITY<=33&&INTENSITY>=0,0,\r\n\r\ncs<9300000&&cs>=1200&&INTENSITY>=137,80,\r\ncs<9300000&&cs>=1200&&INTENSITY<137&&INTENSITY>112,65,\r\ncs<9300000&&cs>=1200&&INTENSITY<=112&&INTENSITY>95,55,\r\ncs<9300000&&cs>=1200&&INTENSITY<=95&&INTENSITY>82,45,\r\ncs<9300000&&cs>=1200&&INTENSITY<=82&&INTENSITY>63,35,\r\ncs<9300000&&cs>=1200&&INTENSITY<=63&&INTENSITY>33,0,\r\ncs<9300000&&cs>=1200&&INTENSITY<=33&&INTENSITY>=0,0,\r\n\r\n1)",valueExpressionTitle:"Set the Symbol Size by Map Scale",valueUnit:"unknown",minSize:7.5,maxSize:60,minDataValue:10,maxDataValue:80}],authoringInfo:{visualVariables:[{type:"size",minSliderValue:10,maxSliderValue:80}]},valueExpression:'Var INTENSITY=$feature.INTENSITY\r\n\r\nWhen(INTENSITY>=137,"Category 5 Hurricane",\r\nINTENSITY<137&&INTENSITY>112, "Category 4 Hurricane",\r\nINTENSITY<=112&&INTENSITY>95, "Category 3 Hurricane",\r\nINTENSITY<=95&&INTENSITY>82,"Category 2 Hurricane",\r\nINTENSITY<=82&&INTENSITY>63, "Category 1 Hurricane",\r\nINTENSITY<=63&&INTENSITY>33, "Tropical Storm",\r\nINTENSITY<=33&&INTENSITY>=0, "Tropical Depression", "NO DATA")\r\n',valueExpressionTitle:"Assign Storm Type (Saffir) by Intensity",defaultSymbol:null,uniqueValueInfos:[{value:"Category 5 Hurricane",symbol:{type:"picture-marker",angle:0,xoffset:0,yoffset:0,url:"https://arcgis-content.maps.arcgis.com/sharing/rest/content/items/f67790e2d65143f1af2edca3bab4c739/data",width:6,height:7.764705882352942},label:"Category 5 Hurricane"},{value:"Category 4 Hurricane",symbol:{type:"picture-marker",angle:0,xoffset:0,yoffset:0,url:"https://arcgis-content.maps.arcgis.com/sharing/rest/content/items/f67790e2d65143f1af2edca3bab4c739/data",width:6,height:7.764705882352942},label:"Category 4 Hurricane"},{value:"Category 3 Hurricane",symbol:{type:"picture-marker",angle:0,xoffset:0,yoffset:0,url:"https://arcgis-content.maps.arcgis.com/sharing/rest/content/items/f67790e2d65143f1af2edca3bab4c739/data",width:6,height:7.764705882352942},label:"Category 3 Hurricane"},{value:"Category 2 Hurricane",symbol:{type:"picture-marker",angle:0,xoffset:0,yoffset:0,url:"https://arcgis-content.maps.arcgis.com/sharing/rest/content/items/f67790e2d65143f1af2edca3bab4c739/data",width:6,height:7.764705882352942},label:"Category 2 Hurricane"},{value:"Category 1 Hurricane",symbol:{type:"picture-marker",angle:0,xoffset:0,yoffset:0,url:"https://arcgis-content.maps.arcgis.com/sharing/rest/content/items/f67790e2d65143f1af2edca3bab4c739/data",width:6,height:7.764705882352942},label:"Category 1 Hurricane"},{value:"Tropical Storm",symbol:{type:"simple-marker",color:null,size:6,angle:0,xoffset:0,yoffset:0,outline:{color:null,width:.75}},label:"Tropical Storm"},{value:"Tropical Depression",symbol:{type:"simple-marker",color:null,size:6,angle:0,xoffset:0,yoffset:0,outline:{color:null,width:.75}},label:"Tropical Depression"}]},outFields:["*"],popupTemplate:{content:"<b><font size='3'>OBSERVED STORMS TO DATE ({YEAR})</font></b>\n<br /> <br />\n<font size='3'><b>{STORMNAME} </b>was observed here on<b> {DTG}</b> and was classified as a <b>{expression/expr0}</b>.\n<br /><br />The maximum wind speed recorded was <b>{INTENSITY} knots</b>.</font>\n\n<br /><br /></font>\n\n<font size='2'><i>Longitude/Latitude: {LAT}, {LON}\n\n<br /></i>\n\n<i><span style='font-family: Arial, sans-serif;'><br /> </span></i>\n\n<span style='font-family: Arial, sans-serif;'><a href='https://www.noaa.gov/' target='_blank'>\n\n<b><span style='color: mediumturquoise;'>NOAA</span></b></a></span>\n\n<span style='font-family: Arial, sans-serif;'> - </span>\n\n<span style='font-family: Arial, sans-serif;'>\n\n<a href='https://www.nhc.noaa.gov/' style='' target='_blank'><b><font color='#b22222'>National Hurricane Center</font></b></a></span>\n",showAttachments:!0,expressionInfos:[{name:"expr0",title:"Custom",expression:'var BASIN = $feature.BASIN\r\nvar INTENSITY = $feature.INTENSITY\r\n\r\nif (BASIN == "al" || BASIN =="cp" || BASIN == "EP" || BASIN == "ep" || BASIN == "NA" || BASIN == "SA" || BASIN == "SL" || BASIN == "CS" || BASIN =="GM"){\r\nWhen(INTENSITY<=33,"Tropical Depression", \r\nINTENSITY>33&&INTENSITY<=63,"Tropical Storm",\r\nINTENSITY>63&&INTENSITY<=82,"Category 1 Hurricane",\r\nINTENSITY>82&&INTENSITY<=95,"Category 2 Hurricane",\r\nINTENSITY>95&&INTENSITY<=112,"Category 3 Hurricane",\r\nINTENSITY>112&&INTENSITY<=136,"Category 4 Hurricane",\r\nINTENSITY>136,"Category 5 Hurricane","NO DATA")\r\n}\r\n\r\nelse if (BASIN == "WP") {\r\nWhen (INTENSITY <=33, "Tropical Depression",\r\nINTENSITY >33&&INTENSITY<=63, "Tropical Storm",\r\nINTENSITY >63&&INTENSITY<=129, "Typhoon",\r\nINTENSITY >129, "Super Typhoon", "NO DATA")\r\n}\r\n\r\nelse if (BASIN == "SH" || BASIN == "SP" || BASIN == "WA" || BASIN == "EA") {\r\nWhen (INTENSITY <=33, "Tropical Disturbance/Depression/Low",\r\nINTENSITY >34&&INTENSITY<=47, "Category 1 Tropical Cyclone",\r\nINTENSITY >48&&INTENSITY<=63, "Category 2 Tropical Cyclone",\r\nINTENSITY >64&&INTENSITY<=85, "Category 3 Tropical Cyclone",\r\nINTENSITY >86&&INTENSITY<=107, "Category 4 Tropical Cyclone",\r\nINTENSITY >108, "Category 5 Tropical Cyclone", "NO DATA")\r\n}\r\n\r\nelse if (BASIN == "IO" || BASIN == "NI" || BASIN == "AS" || BASIN == "BB") {\r\nWhen (INTENSITY <=17, "Low Pressure Area",\r\nINTENSITY >17&&INTENSITY<=27, "Depression",\r\nINTENSITY >28&&INTENSITY<=33, "Deep Depression",\r\nINTENSITY >34&&INTENSITY<=47, "Cyclonic Storm",\r\nINTENSITY >48&&INTENSITY<=63, "Severe Cyclonic Storm",\r\nINTENSITY >64&&INTENSITY<=89, "Very Severe Cyclonic Storm",\r\nINTENSITY >90&&INTENSITY<=119, "Extremely Severe Cyclonic Storm",\r\nINTENSITY >120, "Super Cyclonic Storm", "NO DATA")\r\n}\r\n\r\nelse if (BASIN == "SI") {\r\nWhen (INTENSITY <=28, "Zone of Disturbed Weather",\r\nINTENSITY >28&&INTENSITY<=29, "Tropical Disturbance",\r\nINTENSITY >30&&INTENSITY<=33, "Tropical Depression",\r\nINTENSITY >34&&INTENSITY<=47, "Moderate Tropical Storm",\r\nINTENSITY >48&&INTENSITY<=63, "Severe Tropical Storm",\r\nINTENSITY >64&&INTENSITY<=85, "Tropical Cyclone",\r\nINTENSITY >86&&INTENSITY<=113, "Intense Tropical Cyclone",\r\nINTENSITY >114, "Very Intense Tropical Cyclone", "NO DATA")\r\n}\r\n\r\nelse {\r\nreturn "Testing"\r\n}',returnType:"string"}]}}),d=new a.a({url:"https://services6.arcgis.com/VqchQRhgtql2vsmO/arcgis/rest/services/Hurricanes2020/FeatureServer/0",renderer:{visualVariables:[{type:"size",field:null,valueExpression:"var INTENSITY=$feature.INTENSITY\r\nvar cs=$view.scale\r\n\r\nWhen (cs<=74000000&&cs>=37000000&&INTENSITY<=63&&INTENSITY>33,0,\r\ncs<=74000000&&cs>=37000000&&INTENSITY<=33&&INTENSITY>=0,0,\r\n\r\ncs<37000000&&cs>=18500000&&INTENSITY<=63&&INTENSITY>33,3,\r\ncs<37000000&&cs>=18500000&&INTENSITY<=33&&INTENSITY>=0,2,\r\n\r\ncs<18500000&&cs>=9300000&&INTENSITY<=63&&INTENSITY>33,5,\r\ncs<18500000&&cs>=9300000&&INTENSITY<=33&&INTENSITY>=0,2,\r\n\r\ncs<9300000&&cs>=1200&&INTENSITY<=63&&INTENSITY>33,6,\r\ncs<9300000&&cs>=1200&&INTENSITY<=33&&INTENSITY>=0,3,\r\n\r\n1)",valueExpressionTitle:"Set the Symbol Size by Map Scale",valueUnit:"unknown",minSize:1.5,maxSize:4.5,minDataValue:2,maxDataValue:6}],authoringInfo:{visualVariables:[{type:"size",minSliderValue:1,maxSliderValue:6}]},type:"unique-value",valueExpression:'Var INTENSITY=$feature.INTENSITY\nVar cs=$view.scale\n\nWhen(INTENSITY>=137,"Category 5 Hurricane",\nINTENSITY<137&&INTENSITY>112, "Category 4 Hurricane",\nINTENSITY<=112&&INTENSITY>95, "Category 3 Hurricane",\nINTENSITY<=95&&INTENSITY>82,"Category 2 Hurricane",\nINTENSITY<=82&&INTENSITY>63, "Category 1 Hurricane",\nINTENSITY<=63&&INTENSITY>33, "Tropical Storm",\nINTENSITY<=33&&INTENSITY>=0, "Tropical Depression", "NO DATA")',valueExpressionTitle:"Assign Storm Type (Saffir) by Intensity",defaultSymbol:null,uniqueValueInfos:[{value:"Tropical Storm",label:"Tropical Storm",symbol:{color:[43,212,212,255],size:6,angle:0,xoffset:0,yoffset:0,type:"simple-marker",outline:{color:null,width:.75}}},{value:"Tropical Depression",label:"Tropical Depression",symbol:{color:[43,212,212,255],size:6,angle:0,xoffset:0,yoffset:0,type:"simple-marker",outline:{color:null,width:.75}}}]},definitionExpression:"(INTENSITY = 5) OR (INTENSITY = 10) OR (INTENSITY = 15) OR (INTENSITY = 20) OR (INTENSITY = 25) OR (INTENSITY = 30) OR (INTENSITY = 35) OR (INTENSITY = 40) OR (INTENSITY = 45) OR (INTENSITY = 50) OR (INTENSITY = 55) OR (INTENSITY = 60)"}),f=new a.a({id:"Hurricane_Recent_4466_1123_2461_5598_3670",url:"https://services6.arcgis.com/VqchQRhgtql2vsmO/arcgis/rest/services/Hurricanes2020/FeatureServer/1",title:"Blue Hatched Track",opacity:.45,renderer:{type:"class-breaks",defaultSymbol:{color:[43,212,212,255],width:.75,type:"simple-line",style:"short-dot"},visualVariables:[{type:"size",field:null,valueExpression:"var cs=$view.scale\r\n\r\nWhen (cs<=74000000&&cs>=37000000,0.4,\r\ncs<37000000&&cs>=18500000,.75,\r\ncs<18500000&&cs>=9300000,1,\r\ncs<9300000&&cs>=1200,1,\r\n\r\n1)",valueExpressionTitle:"Custom",valueUnit:"unknown",minSize:.75,maxSize:.75,minDataValue:.4,maxDataValue:1.5}],authoringInfo:{visualVariables:[{type:"size",minSliderValue:.4,maxSliderValue:1.5}]},field:null,valueExpression:"var cs=$view.scale\r\n\r\nWhen (cs<=74000000&&cs>=37000000,0.4,\r\ncs<37000000&&cs>=18500000,.75,\r\ncs<18500000&&cs>=9300000,1,\r\ncs<9300000&&cs>=1200,1,\r\n\r\n1)",classBreakInfos:[{symbol:{color:[43,212,212,255],width:.75,type:"simple-line",style:"short-dot"}}]},labelingInfo:[{labelExpression:null,labelExpressionInfo:{expression:'$feature["STORMNAME"]'},useCodedValues:!0,maxScale:0,minScale:13717861,where:null,labelPlacement:"center-along",symbol:{color:[43,212,212,255],type:"text",horizontalAlignment:"center",rightToLeft:!1,lineWidth:500,font:{size:9,decoration:"none",weight:"normal",family:"Arial Unicode MS"}}}],outFields:["*"],popupTemplate:{content:"<font><b><font size='3' style=''>STORM NAME: </font></b><b><font size='3'>{STORMNAME}</font></b></font><font size='2'><i><font><br /></font></i><i><span style='font-family: Arial, sans-serif;'><br /></span></i><span style='font-family: Arial, sans-serif;'><a href='https://www.noaa.gov/' target='_blank'><b><span style='color: mediumturquoise;'>NOAA</span></b></a></span><span style='font-family: Arial, sans-serif;'> - </span><span style='font-family: Arial, sans-serif;'><a href='https://www.nhc.noaa.gov/' target='_blank'><b><font color='#dc143c'>National Hurricane Center</font></b></a></span></font>"}}),h=new a.a({id:"Hurricane_Recent_4466_1123_2461_5598_8316_2112",url:"https://services6.arcgis.com/VqchQRhgtql2vsmO/arcgis/rest/services/Hurricanes2020/FeatureServer/1",opacity:.14,title:"Light Trans Solid Track",renderer:{defaultSymbol:{color:[255,241,224,255],width:.75,type:"simple-line",style:"short-dot"},visualVariables:[{type:"size",field:null,valueExpression:"var cs=$view.scale\r\n\r\nWhen (cs<=74000000&&cs>=37000000,0.5,\r\ncs<37000000&&cs>=18500000,.75,\r\ncs<18500000&&cs>=9300000,2.5,\r\ncs<9300000&&cs>=1200,2.5,\r\n\r\n1)",valueExpressionTitle:"Red Solid Line Expression",valueUnit:"unknown",minSize:.75,maxSize:2.25,minDataValue:.5,maxDataValue:2.5}],authoringInfo:{visualVariables:[{type:"size",minSliderValue:.5,maxSliderValue:2.5}]},type:"class-breaks",field:null,valueExpression:"var cs=$view.scale\r\n\r\nWhen (cs<=74000000&&cs>=37000000,0.5,\r\ncs<37000000&&cs>=18500000,.75,\r\ncs<18500000&&cs>=9300000,2.5,\r\ncs<9300000&&cs>=1200,2.5,\r\n\r\n1)",classBreakInfos:[{symbol:{color:[255,241,224,255],width:.75,type:"simple-line"},classMaxValue:9007199254740991}]}}),m=new a.a({url:"https://services.arcgis.com/0ZRg6WRC7mxSLyKX/arcgis/rest/services/Hurricane_Laura_Crowdsourced_Photos/FeatureServer",outFields:["*"],popupTemplate:{content:[{type:"text",text:'\n            <h3>{Title}</h3>\n            <h3 class="subtitle">{Date_Time}</h3>\n            <p class="description">{Description}</p>\n         '},{type:"attachments",displayType:"preview"}],dockEnabled:!0,dockOptions:{position:"top-right\t"}}}),y=new a.a({url:"https://services.arcgis.com/pGfbNJoYypmNq86F/ArcGIS/rest/services/Hurricane_Laura_2020_Actual_Winds/FeatureServer/2",opacity:.2}),g=r(5),v=(r(1988),{metadata:{name:"hurricanes",theme:"dark",fullWidthMap:!0},sources:[{name:"Recent Hurricanes, Cyclones and Typhoons",url:"https://www.arcgis.com/home/item.html?id=adfe292a67f8471a9d8230ef93294414"},{name:"Hurricanes Marco and Laura - NAPSG Crowdsourced Photos",url:"https://www.arcgis.com/home/item.html?id=b409fcc78ace412da8ec0a9935620b62"}],pages:[{title:"Hurricanes",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Like everything else, this year's hurricane season"," ",i.a.createElement(g.h,{theme:"dark",link:"https://www.noaa.gov/media-release/record-breaking-atlantic-hurricane-season-draws-to-end",linkTitle:'"Record-breaking Atlantic hurricane season draws to an end", Blackwell, J., NOAA, Nov 24, 2020, Retrieved Dec 17, 2020'},"broke records"),". With 30 named storms (top winds of 39 mph or greater), 2020 has the most storms on record, surpassing the 28 from 2005, and the second-highest number of hurricanes on record. This map shows the hurricanes' tracks and recorded intensities as they progressed.")),mapState:{position:{center:[-151,17],zoom:2},basemap:"dark-gray-vector",layers:[p,f,h,c,d]}},{title:"Damage in the Southeastern U.S.",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"To put a more relatable face on the hurricanes, National Alliance for Public Safety GIS"," ",i.a.createElement(g.h,{theme:"dark",link:"https://www.napsgfoundation.org/",linkTitle:"napsgfoundation.org"},"NAPSG")," ","published a collection of crowdsourced photos in the southeastern U.S. in the wake of hurricanes Marco and Laura. The colored bands represent hurricane Laura's wind footprint."),i.a.createElement("p",null,"Click a purple diamond to see photos of the hurricane damage and responses.")),mapState:{position:{center:[-92,31],zoom:4},basemap:"dark-gray-vector",layers:[p,y,c,d,f,h,m],customBehavior:function(e){var t=e.view;return[c,d,f,h].forEach((function(e){e.opacity=.2,e.popupEnabled=!1})),t.popup.dockEnabled=!0,t.popup.dockOptions={position:"top-right"},function(){[c,d,f,h].forEach((function(e){e.opacity=1,e.popupEnabled=!0})),t.popup.dockEnabled=!1}}}}]}),_=r(213);t.default=function(){return i.a.createElement(_.a,{data:v})}},267:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(177),r(154),r(155),r(118),r(156),r(152),r(151)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u){var p=s.getLogger("esri.layers.support.PixelBlock");return function(e){function t(t){var r=e.call(this,t)||this;return r.width=null,r.height=null,r.pixelType="f32",r.validPixelCount=null,r.mask=null,r.maskIsAlpha=!1,r.pixels=null,r.statistics=null,r}var o;return r.__extends(t,e),o=t,t.createEmptyBand=function(e,t){return new(o.getPixelArrayConstructor(e))(t)},t.getPixelArrayConstructor=function(e){var t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"u32":t=Uint32Array;break;case"f32":t=Float32Array;break;case"f64":t=Float64Array;break;case"c64":case"c128":case"unknown":t=Float32Array;break;default:n.neverReached(e)}return t},t.prototype.castPixelType=function(e){if(!e)return"f32";var t=e.toLowerCase();return["u1","u2","u4"].indexOf(t)>-1?t="u8":-1===["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].indexOf(t)&&(t="f32"),t},t.prototype.getPlaneCount=function(){return this.pixels&&this.pixels.length},t.prototype.addData=function(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new i("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics||{minValue:null,maxValue:null})},t.prototype.getAsRGBA=function(){var e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)},t.prototype.getAsRGBAFloat=function(){var e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e},t.prototype.updateStatistics=function(){var e=this;this.statistics=this.pixels.map((function(t){return e._calculateBandStatistics(t,e.mask)}));var t=this.mask,r=0;if(t)for(var n=0;n<t.length;n++)t[n]&&r++;else r=this.width*this.height;this.validPixelCount=r},t.prototype.clamp=function(e){if(e&&"f64"!==e&&"f32"!==e){var t;switch(e){case"u8":t=[0,255];break;case"u16":t=[0,65535];break;case"u32":t=[0,4294967295];break;case"s8":t=[-128,127];break;case"s16":t=[-32768,32767];break;case"s32":t=[-2147483648,2147483647];break;default:t=[-34e38,34e38]}for(var r,n,i,a=t[0],s=t[1],l=this.pixels,u=this.width*this.height,p=l.length,c=[],d=0;d<p;d++){i=o.createEmptyBand(e,u),r=l[d];for(var f=0;f<u;f++)n=r[f],i[f]=n>s?s:n<a?a:n;c.push(i)}this.pixels=c,this.pixelType=e}},t.prototype.extractBands=function(e){var t=this;if(l.isNone(e)||0===e.length||null==this.pixels||0===this.pixels.length)return this;var r=this.pixels.length,n=e.some((function(e){return e>=t.pixels.length})),i=r===e.length&&!e.some((function(e,t){return e!==t}));return n||i?this:new o({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map((function(e){return t.pixels[e]})),statistics:this.statistics&&e.map((function(e){return t.statistics[e]}))})},t.prototype.clone=function(){var e,t=new o({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(this.mask instanceof Uint8Array?t.mask=new Uint8Array(this.mask):t.mask=this.mask.slice(0));var r=o.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];var n=this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=n?this.pixels[e].slice(0,this.pixels[e].length):new r(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=a.clone(this.statistics[e]);return t},t.prototype._fillFrom8Bit=function(e){var t=this.mask,r=this.maskIsAlpha,n=this.pixels;if(e&&n&&n.length){var i,o,a,s;i=o=a=n[0],n.length>=3?(o=n[1],a=n[2]):2===n.length&&(o=n[1]);var l=new Uint32Array(e),u=this.width*this.height;if(i.length===u)if(t&&t.length===u)if(r)for(s=0;s<u;s++)t[s]&&(l[s]=t[s]<<24|a[s]<<16|o[s]<<8|i[s]);else for(s=0;s<u;s++)t[s]&&(l[s]=255<<24|a[s]<<16|o[s]<<8|i[s]);else for(s=0;s<u;s++)l[s]=255<<24|a[s]<<16|o[s]<<8|i[s];else p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")},t.prototype._fillFromNon8Bit=function(e){var t=this.pixels,r=this.mask,n=this.statistics;if(e&&t&&t.length){var i=this.pixelType,o=1,a=0;if(n&&n.length>0)a=n.map((function(e){return e.minValue})).reduce((function(e,t){return Math.min(e,t)})),o=255/n.map((function(e){return e.maxValue-e.minValue})).reduce((function(e,t){return Math.max(e,t)}));else{var s=255;"s8"===i?(a=-128,s=127):"u16"===i?s=65535:"s16"===i?(a=-32768,s=32767):"u32"===i?s=4294967295:"s32"===i?(a=-2147483648,s=2147483647):"f32"===i?(a=-34e38,s=34e38):"f64"===i&&(a=-Number.MAX_VALUE,s=Number.MAX_VALUE),o=255/(s-a)}var l,u,c,d,f,h=new Uint32Array(e),m=this.width*this.height;if((l=u=c=t[0]).length!==m)return p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(u=t[1],t.length>=3&&(c=t[2]),r&&r.length===m)for(d=0;d<m;d++)r[d]&&(h[d]=255<<24|(c[d]-a)*o<<16|(u[d]-a)*o<<8|(l[d]-a)*o);else for(d=0;d<m;d++)h[d]=255<<24|(c[d]-a)*o<<16|(u[d]-a)*o<<8|(l[d]-a)*o;else if(r&&r.length===m)for(d=0;d<m;d++)f=(l[d]-a)*o,r[d]&&(h[d]=255<<24|f<<16|f<<8|f);else for(d=0;d<m;d++)f=(l[d]-a)*o,h[d]=255<<24|f<<16|f<<8|f}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")},t.prototype._fillFrom32Bit=function(e){var t,r,n,i,o=this.pixels,a=this.mask;if(!e||!o||!o.length)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");t=r=n=o[0],o.length>=3?(r=o[1],n=o[2]):2===o.length&&(r=o[1]);var s=this.width*this.height;if(t.length!==s)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var l=0;if(a&&a.length===s)for(i=0;i<s;i++)e[l++]=t[i],e[l++]=r[i],e[l++]=n[i],e[l++]=1&a[i];else for(i=0;i<s;i++)e[l++]=t[i],e[l++]=r[i],e[l++]=n[i],e[l++]=1},t.prototype._calculateBandStatistics=function(e,t){var r,n=1/0,i=-1/0,o=e.length,a=0;if(t)for(r=0;r<o;r++)t[r]&&(n=(a=e[r])<n?a:n,i=a>i?a:i);else for(r=0;r<o;r++)n=(a=e[r])<n?a:n,i=a>i?a:i;return{minValue:n,maxValue:i}},r.__decorate([u.property({json:{write:!0}})],t.prototype,"width",void 0),r.__decorate([u.property({json:{write:!0}})],t.prototype,"height",void 0),r.__decorate([u.property({json:{write:!0}})],t.prototype,"pixelType",void 0),r.__decorate([u.cast("pixelType")],t.prototype,"castPixelType",null),r.__decorate([u.property({json:{write:!0}})],t.prototype,"validPixelCount",void 0),r.__decorate([u.property({json:{write:!0}})],t.prototype,"mask",void 0),r.__decorate([u.property({json:{write:!0}})],t.prototype,"maskIsAlpha",void 0),r.__decorate([u.property({json:{write:!0}})],t.prototype,"pixels",void 0),r.__decorate([u.property({json:{write:!0}})],t.prototype,"statistics",void 0),o=r.__decorate([u.subclass("esri.layers.support.PixelBlock")],t)}(o.JSONSupport)}.apply(null,n))||(e.exports=i)},268:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(164),r(230)],void 0===(i=function(e,t,r,n){var i=r("esri-text-decoder")?new TextDecoder("utf-8"):null,o=r("safari")||r("ios")?6:r("ff")?12:32;return function(){function e(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=e?e.byteLength:0),this._tag=0,this._dataType=99,this.init(e,t,r,n)}return e.prototype.init=function(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n},e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.processMessageWithArgs=function(e,t,r,n){var i=this.getMessage(),o=e(i,t,r,n);return i.release(),o},e.prototype.processMessage=function(e){var t=this.getMessage(),r=e(t);return t.release(),r},e.prototype.getMessage=function(){var t=this._getLength(),r=e.pool.acquire();return r.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r},e.prototype.release=function(){e.pool.release(this)},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,n=0;if(this._end-r>=10)do{if(n|=127&(e=t[r++]),0==(128&e))break;if(n|=(127&(e=t[r++]))<<7,0==(128&e))break;if(n|=(127&(e=t[r++]))<<14,0==(128&e))break;if(n|=(127&(e=t[r++]))<<21,0==(128&e))break;if(n+=268435456*(127&(e=t[r++])),0==(128&e))break;if(n+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(n+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(n+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(n+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(n+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var i=1;r!==this._end&&0!=(128&(e=t[r]));)++r,n+=(127&e)*i,i*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=e*i}return this._pos=r,n},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){if((r=Math.min(this._end,r))-t>o&&i){var n=e.subarray(t,r);return i.decode(n)}for(var a="",s="",l=t;l<r;++l){var u=e[l];128&u?s+="%"+u.toString(16):(a+=decodeURIComponent(s)+String.fromCharCode(u),s="")}return s.length&&(a+=decodeURIComponent(s)),a},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e.pool=new n(e,null,(function(e){e._data=null,e._dataView=null})),e}()}.apply(null,n))||(e.exports=i)},313:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(155),r(118),r(198),r(151)],void 0===(i=function(e,t,r,n,i,o,a){var s,l=o.SetFromValues(["Raster","Raster2","DEM","FillRaster"]),u=o.SetFromValues(["Rasters"]),p=function(e){return e&&e.rasterFunction?d.fromJSON(e):e},c=function(e){return e&&e instanceof d?e.toJSON():e};!function(e){e[e.MOSAIC=0]="MOSAIC",e[e.GROUP=1]="GROUP",e[e.ITEM=2]="ITEM"}(s||(s={}));var d=function(e){function t(t){var r=e.call(this,t)||this;return r.functionArguments=null,r.functionName=null,r.outputPixelType="unknown",r.variableName=null,r.description=null,r.functionDefinition=null,r.thumbnail=null,r}var n;return r.__extends(t,e),n=t,t.prototype.readFunctionArguments=function(e,t){return function(e){if(null==e)return null;for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];l.has(i)?t[i]=p(e[i]):u.has(i)&&Array.isArray(e[i])?t[i]=e[i].map(p):t[i]=e[i]}return t}(t.arguments||t.rasterFunctionArguments)},t.prototype.writeFunctionArguments=function(e,t,r){for(var n={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];l.has(a)?n[a]=c(e[a]):u.has(a)&&Array.isArray(e[a])?n[a]=e[a].map(c):n[a]=c(e[a])}this.functionDefinition?t.arguments=n:t[r]=n},t.prototype.readFunctionName=function(e,t){var r=t.rasterFunctionInfos;return t.name||(r&&r.length&&"None"!==r[0].name?r[0].name:t.rasterFunction)},t.prototype.writeFunctionName=function(e,t,r){this.functionDefinition?t.name=e:t[r]=e},t.prototype.readFunctionType=function(e){return s[e]},t.prototype.writeFunctionType=function(e,t,r){t[r]=s[e]},t.prototype.clone=function(){return new n({functionName:this.functionName,functionArguments:i.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,name:this.functionName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})},r.__decorate([a.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],t.prototype,"functionArguments",void 0),r.__decorate([a.reader("functionArguments",["rasterFunctionArguments","arguments"])],t.prototype,"readFunctionArguments",null),r.__decorate([a.writer("functionArguments")],t.prototype,"writeFunctionArguments",null),r.__decorate([a.property({json:{type:String,write:{target:"rasterFunction"}}})],t.prototype,"functionName",void 0),r.__decorate([a.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],t.prototype,"readFunctionName",null),r.__decorate([a.writer("functionName")],t.prototype,"writeFunctionName",null),r.__decorate([a.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),a.property({json:{default:"unknown"}})],t.prototype,"outputPixelType",void 0),r.__decorate([a.property({type:String,json:{read:!0,write:!0}})],t.prototype,"variableName",void 0),r.__decorate([a.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"description",void 0),r.__decorate([a.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"functionType",void 0),r.__decorate([a.reader("functionType")],t.prototype,"readFunctionType",null),r.__decorate([a.writer("functionType")],t.prototype,"writeFunctionType",null),r.__decorate([a.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"functionDefinition",void 0),r.__decorate([a.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"thumbnail",void 0),n=r.__decorate([a.subclass("esri.layers.support.RasterFunction")],t)}(n.JSONSupport);return d}.apply(null,n))||(e.exports=i)},376:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(267)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0};function i(e,t){var r,n,i=Math.min(Math.max(e,-100),100),o=Math.min(Math.max(t,-100),100),a=new Uint8Array(256);for(r=0;r<256;r++)i>0&&i<100?n=(200*r-25500+510*o)/(2*(100-i))+128:i<=0&&i>-100?n=(200*r-25500+510*o)*(100+i)/2e4+128:100===i?n=(n=200*r-25500+256*(100-i)+510*o)>0?255:0:-100===i&&(n=128),a[r]=n>255?255:n<0?0:n;return a}function o(e,t,r,n,i,o,a,s){return{xmin:i<=r*e?0:i<r*e+e?i-r*e:e,ymin:o<=n*t?0:o<n*t+t?o-n*t:t,xmax:i+a<=r*e?0:i+a<r*e+e?i+a-r*e:e,ymax:o+s<=n*t?0:o+s<n*t+t?o+s-n*t:t}}function a(e,t,i,a){var s=e.filter((function(e){return n(e)}))[0];if(null==s)return null;var l,u,p,c,d,f,h,m,y,g,v,_,b,I=a?a.width:t.width,T=a?a.height:t.height,w=s.width,x=s.height,S=t.width/w,N=t.height/x,R=i?i.x:0,A=i?i.y:0,E=s.pixelType,O=r.getPixelArrayConstructor(E),C=s.pixels.length,k=[];for(f=0;f<C;f++){for(u=new O(I*T),h=0;h<N;h++)for(m=0;m<S;m++)if(p=e[h*S+m])for(l=p.pixels[f],y=(v=o(w,x,m,h,R,A,I,T)).ymin;y<v.ymax;y++)for(c=(h*x+y-A)*I+(m*w-R),d=y*w,g=v.xmin;g<v.xmax;g++)u[c+g]=l[d+g];k.push(u)}if(e.some((function(e){return null==e||e.mask&&e.mask.length>0})))for(_=new Uint8Array(I*T),h=0;h<N;h++)for(m=0;m<S;m++)if(b=(p=e[h*S+m])?p.mask:null,v=o(w,x,m,h,R,A,I,T),b)for(y=v.ymin;y<v.ymax;y++)for(c=(h*x+y-A)*I+(m*w-R),d=y*w,g=v.xmin;g<v.xmax;g++)_[c+g]=b[d+g];else if(p)for(y=v.ymin;y<v.ymax;y++)for(c=(h*x+y-A)*I+(m*w-R),d=y*w,g=v.xmin;g<v.xmax;g++)_[c+g]=1;else for(y=v.ymin;y<v.ymax;y++)for(c=(h*x+y-A)*I+(m*w-R),d=y*w,g=v.xmin;g<v.xmax;g++)_[c+g]=0;var M=new r({width:I,height:T,pixels:k,pixelType:E,mask:_});return M.updateStatistics(),M}t.extractBands=function(e,t){if(!t||!n(e))return e;var i=e.pixels.length;return t&&t.some((function(e){return e>=i}))||1===i&&1===t.length&&0===t[0]?e:i!==t.length||t.some((function(e,t){return e!==t}))?new r({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map((function(t){return e.pixels[t]})),statistics:e.statistics&&t.map((function(t){return e.statistics[t]}))}):e},t.createColormapLUT=function(e){if(e){var t=e.colormap;if(t&&0!==t.length){var r=t.sort((function(e,t){return e[0]-t[0]})),n=0;r[0][0]<0&&(n=r[0][0]);var i,o=Math.max(256,r[r.length-1][0]-n+1),a=new Uint8Array(4*o),s=[],l=0,u=0,p=5===r[0].length;if(o>65536)return r.forEach((function(e){s[e[0]-n]=p?e.slice(1):e.slice(1).concat([255])})),{indexed2DColormap:s,offset:n,alphaSpecified:p};if(e.fillUnspecified)for(l=(i=r[u])[0]-n;l<o;l++)a[4*l]=i[1],a[4*l+1]=i[2],a[4*l+2]=i[3],a[4*l+3]=p?i[4]:255,l===i[0]-n&&(i=u===r.length-1?i:r[++u]);else for(l=0;l<r.length;l++)a[u=4*((i=r[l])[0]-n)]=i[1],a[u+1]=i[2],a[u+2]=i[3],a[u+3]=p?i[4]:255;return{indexedColormap:a,offset:n,alphaSpecified:p}}}},t.colorize=function(e,t){if(!n(e))return e;if(!t&&(t.indexedColormap||t.indexed2DColormap))return e;var r=e.clone(),i=r.pixels,o=r.mask,a=r.width*r.height;if(1!==i.length)return e;var s,l=t.indexedColormap,u=t.indexed2DColormap,p=t.offset,c=t.alphaSpecified,d=l.length-1,f=0,h=i[0],m=new Uint8Array(h.length),y=new Uint8Array(h.length),g=new Uint8Array(h.length),v=0;if(l)if(o)for(f=0;f<a;f++)o[f]&&((v=4*(h[f]-p))<p||v>d?o[f]=0:(m[f]=l[v],y[f]=l[v+1],g[f]=l[v+2],o[f]=l[v+3]));else{for(o=new Uint8Array(a),f=0;f<a;f++)(v=4*(h[f]-p))<p||v>d?o[f]=0:(m[f]=l[v],y[f]=l[v+1],g[f]=l[v+2],o[f]=l[v+3]);r.mask=o}else if(o)for(f=0;f<a;f++)o[f]&&(s=u[h[f]],m[f]=s[0],y[f]=s[1],g[f]=s[2],o[f]=s[3]);else{for(o=new Uint8Array(a),f=0;f<a;f++)s=u[h[f]],m[f]=s[0],y[f]=s[1],g[f]=s[2],o[f]=s[3];r.mask=o}return r.pixels=[m,y,g],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=c,r},t.estimateStatisticsHistograms=function(e){if(!n(e))return null;e.statistics||e.updateStatistics();var t,r,i,o,a,s,l,u,p,c,d,f,h,m,y=e.pixels,g=e.mask,v=e.pixelType,_=e.statistics,b=e.width*e.height,I=y.length,T=[],w=[];for(o=0;o<I;o++){if(s=new Uint32Array(256),u=y[o],"u8"===v)if(t=-.5,r=255.5,g)for(a=0;a<b;a++)g[a]&&s[u[a]]++;else for(a=0;a<b;a++)s[u[a]]++;else{if(t=_[o].minValue,i=((r=_[o].maxValue)-t)/256,l=new Uint32Array(257),g)for(a=0;a<b;a++)g[a]&&l[Math.floor((u[a]-t)/i)]++;else for(a=0;a<b;a++)l[Math.floor((u[a]-t)/i)]++;for(a=0;a<255;a++)s[a]=l[a];s[255]=l[255]+l[256]}for(T.push({min:t,max:r,size:256,counts:s}),p=0,c=0,h=0,a=0;a<256;a++)p+=s[a],c+=a*s[a];for(m=c/p,a=0;a<256;a++)h+=s[a]*Math.pow(a-m,2);d=(m+.5)*(i=(r-t)/256)+t,f=Math.sqrt(h/(p-1))*i,w.push({min:t,max:r,avg:d,stddev:f})}return{statistics:w,histograms:T}},t.createStretchLUT=function(e){var t=e.minCutOff,r=e.maxCutOff,n=e.gamma,o=e.pixelType,a=e.outMin||0,s=e.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(o))return null;var l,u,p=t.length,c=0;"s8"===o?c=-127:"s16"===o&&(c=-32767);var d=256;["u16","s16"].indexOf(o)>-1&&(d=65536);var f=[],h=[],m=s-a;for(l=0;l<p;l++)h[l]=r[l]-t[l],f[l]=m/(r[l]-t[l]);var y,g=n&&n.length>=p,v=[];if(g)for(l=0;l<p;l++)n[l]>1?n[l]>2?v[l]=6.5+Math.pow(n[l]-2,2.5):v[l]=6.5+100*Math.pow(2-n[l],4):v[l]=1;var _,b,I,T=[];if(g)for(l=0;l<p;l++){for(I=[],u=0;u<d;u++)y=((_=u+c)-t[l])/h[l],b=1,n[l]>1&&(b-=Math.pow(1/m,y*v[l])),_<r[l]&&_>t[l]?I[u]=Math.floor(b*m*Math.pow(y,1/n[l]))+a:_>=r[l]?I[u]=s:I[u]=a;T[l]=I}else for(l=0;l<p;l++){for(I=[],u=0;u<d;u++)(_=u+c)<=t[l]?I[u]=a:_>=r[l]?I[u]=s:I[u]=Math.floor((_-t[l])/h[l]*m)+a;T[l]=I}if(null!=e.contrastOffset){var w=i(e.contrastOffset,e.brightnessOffset);for(l=0;l<p;l++)for(I=T[l],u=0;u<d;u++)I[u]=w[I[u]]}return{lut:T,offset:c}},t.createContrastBrightnessLUT=i,t.stretch=function(e,t){if(!n(e))return null;var r,i,o,a,s,l=e.clone(),u=l.pixels,p=l.mask,c=t.minCutOff,d=t.maxCutOff,f=t.gamma,h=t.outMin||0,m=t.outMax||255,y=l.width*l.height,g=u.length,v=m-h,_=[],b=[];for(r=0;r<g;r++)b[r]=d[r]-c[r],_[r]=v/(d[r]-c[r]);var I=f&&f.length>=g,T=[];if(I)for(r=0;r<g;r++)f[r]>1?f[r]>2?T[r]=6.5+Math.pow(f[r]-2,2.5):T[r]=6.5+100*Math.pow(2-f[r],4):T[r]=1;if(I)if(null!=p){for(i=0;i<y;i++)if(p[i])for(r=0;r<g;r++)s=((o=u[r][i])-c[r])/b[r],a=1,f[r]>1&&(a-=Math.pow(1/v,s*T[r])),o<d[r]&&o>c[r]?u[r][i]=Math.floor(a*v*Math.pow(s,1/f[r]))+h:o>=d[r]?u[r][i]=m:u[r][i]=h}else for(i=0;i<y;i++)for(r=0;r<g;r++)s=((o=u[r][i])-c[r])/b[r],a=1,f[r]>1&&(a-=Math.pow(1/v,s*T[r])),o<d[r]&&o>c[r]?u[r][i]=Math.floor(a*v*Math.pow(s,1/f[r]))+h:o>=d[r]?u[r][i]=m:u[r][i]=h;else if(null!=p){for(i=0;i<y;i++)if(p[i])for(r=0;r<g;r++)(o=u[r][i])<d[r]&&o>c[r]?u[r][i]=Math.floor((o-c[r])/b[r]*v)+h:o>=d[r]?u[r][i]=m:u[r][i]=h}else for(i=0;i<y;i++)for(r=0;r<g;r++)(o=u[r][i])<d[r]&&o>c[r]?u[r][i]=Math.floor((o-c[r])/b[r]*v)+h:o>=d[r]?u[r][i]=m:u[r][i]=h;return l.pixelType="u8",l.updateStatistics(),l},t.lookupPixels=function(e,t){if(!n(e))return null;var i,o,a=e.pixels,s=e.mask,l=e.width*e.height,u=a.length,p=t.lut,c=t.offset;p&&1===p[0].length&&(p=a.map((function(){return p})));var d,f,h,m=[];if(c)if(null==s)for(i=0;i<u;i++){for(d=a[i],f=p[i],h=new Uint8Array(l),o=0;o<l;o++)h[o]=f[d[o]-c];m.push(h)}else for(i=0;i<u;i++){for(d=a[i],f=p[i],h=new Uint8Array(l),o=0;o<l;o++)s[o]&&(h[o]=f[d[o]-c]);m.push(h)}else if(null==s)for(i=0;i<u;i++){for(d=a[i],f=p[i],h=new Uint8Array(l),o=0;o<l;o++)h[o]=f[d[o]];m.push(h)}else for(i=0;i<u;i++){for(d=a[i],f=p[i],h=new Uint8Array(l),o=0;o<l;o++)s[o]&&(h[o]=f[d[o]]);m.push(h)}var y=new r({width:e.width,height:e.height,pixels:m,mask:s,pixelType:"u8"});return y.updateStatistics(),y},t.remapColor=function(e,t){if(!n(e))return null;var r,i,o,a,s,l,u=e.clone(),p=u.pixels,c=u.width*u.height,d=t.length,f=Math.floor(d/2),h=t[Math.floor(f)],m=p[0],y=!1,g=new Uint8Array(c),v=new Uint8Array(c),_=new Uint8Array(c),b=u.mask,I=4===t[0].mappedColor.length;for(b||((b=new Uint8Array(c)).fill(I?255:1),u.mask=b),s=0;s<c;s++)if(b[s]){for(r=m[s],y=!1,l=f,i=h,o=0,a=d-1;a-o>1;){if(r===i.value){y=!0;break}r>i.value?o=l:a=l,l=Math.floor((o+a)/2),i=t[Math.floor(l)]}y||(r===t[o].value?(i=t[o],y=!0):r===t[a].value?(i=t[a],y=!0):r<t[o].value?(y=!1,i=null):r>t[o].value&&(r<t[a].value?(i=t[o],y=!0):a===d-1?(y=!1,i=null):(i=t[a],y=!0))),y?(g[s]=i.mappedColor[0],v[s]=i.mappedColor[1],_[s]=i.mappedColor[2],b[s]=i.mappedColor[3]):g[s]=v[s]=_[s]=b[s]=0}return u.pixels=[g,v,_],u.mask=b,u.pixelType="u8",u.maskIsAlpha=I,u},t.getClipBounds=o,t.mosaicPixelData=function(e,t){if(!e||0===e.length)return null;var r=e.filter((function(e){return e.pixelBlock}))[0];if(!r)return null;var n=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,i=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,o=.01*Math.min(n,i),s=e.sort((function(e,t){return Math.abs(e.extent.ymax-t.extent.ymax)>o?t.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-t.extent.xmin)>o?e.extent.xmin-t.extent.xmin:0})),l=Math.min.apply(null,s.map((function(e){return e.extent.xmin}))),u=Math.min.apply(null,s.map((function(e){return e.extent.ymin}))),p=Math.max.apply(null,s.map((function(e){return e.extent.xmax}))),c=Math.max.apply(null,s.map((function(e){return e.extent.ymax}))),d={x:Math.round((t.xmin-l)/n),y:Math.round((c-t.ymax)/i)},f={width:Math.round((p-l)/n),height:Math.round((c-u)/i)},h={width:Math.round((t.xmax-t.xmin)/n),height:Math.round((t.ymax-t.ymin)/i)};return Math.round(f.width/r.pixelBlock.width)*Math.round(f.height/r.pixelBlock.height)!==s.length||d.x<0||d.y<0||f.width<h.width||f.height<h.height?null:{extent:t,pixelBlock:a(s.map((function(e){return e.pixelBlock})),f,d,h)}},t.mosaic=a,t.setValidBoundary=function(e,t,r){if(!n(e))return null;var i=e.width,o=e.height,a=t.x,s=t.y,l=r.width+a,u=r.height+s;if(a<0||s<0||l>i||u>o)return e;if(0===a&&0===s&&l===i&&u===o)return e;e.mask||(e.mask=new Uint8Array(i*o));for(var p=e.mask,c=0;c<o;c++)for(var d=c*i,f=0;f<i;f++)p[d+f]=c<s||c>=u||f<a||f>=l?0:1;return e.updateStatistics(),e},t.clip=function(e,t,i){if(!n(e))return null;var o=t.x,a=t.y,s=t.x+i.width,l=t.x+i.height;if(l===e.height&&s===e.width)return e;for(var u,p=e.pixels,c=e.mask,d=e.width,f=d*e.height,h=p.length,m=[],y=0;y<h;y++){for(var g=p[y],v=r.createEmptyBand(e.pixelType,f),_=0,b=a;b<=l;b++)for(var I=b*d,T=o;T<=s;T++)v[_++]=g[I+T];m.push(v)}if(c)for(u=new Uint8Array(i.width*i.height),_=0,b=a;b<=l;b++)for(I=b*d,T=o;T<=s;T++)u[_++]=c[I+T];var w=new r({width:i.width,height:i.height,pixels:m,mask:u});return w.updateStatistics(),w},t.approximateTransform=function(e,t,i,o){if(!n(e))return null;for(var a,s,l,u,p,c,d,f=e.pixels,h=e.mask,m=e.pixelType,y=e.width,g=e.height,v=r.getPixelArrayConstructor(m),_=f.length,b=t.width,I=t.height,T=o.cols,w=o.rows,x=Math.ceil(b/T),S=Math.ceil(I/w),N=!1,R=0;R<i.length;R+=3)-1===i[R]&&-1===i[R+1]&&-1===i[R+2]&&(N=!0);var A,E,O=new Float32Array(b*I),C=new Float32Array(b*I),k=0;for(R=0;R<S;R++)for(var M=0;M<x;M++){s=i[a=12*(R*x+M)],l=i[a+1],u=i[a+2],p=i[a+3],c=i[a+4],d=i[a+5];for(var P=0;P<w;P++){k=(R*w+P)*b+M*T,E=(P+.5)/w;for(var j=0;j<P;j++)A=(j+.5)/T,O[k+j]=Math.round((s*A+l*E+u)*y-.5),C[k+j]=Math.round((p*A+c*E+d)*g-.5)}for(s=i[a+=6],l=i[a+1],u=i[a+2],p=i[a+3],c=i[a+4],d=i[a+5],P=0;P<w;P++)for(k=(R*w+P)*b+M*T,E=(P+.5)/w,j=P;j<T;j++)A=(j+.5)/T,O[k+j]=Math.round((s*A+l*E+u)*y-.5),C[k+j]=Math.round((p*A+c*E+d)*g-.5)}for(var F,Y=function(e,t){for(var r=0;r<I;r++){a=r*b;for(var n=0;n<b;n++)N&&(O[a]<0||C[a]<0)?e[a]=0:e[a]=t[O[a]+C[a]*y],a++}},V=[],D=0;D<_;D++)Y(F=new v(b*I),f[D]),V.push(F);var B=new r({width:b,height:I,pixelType:m,pixels:V});if(h)B.mask=new Uint8Array(b*I),Y(B.mask,h);else if(N)for(B.mask=new Uint8Array(b*I),R=0;R<b*I;R++)B.mask[R]=O[R]<0||C[R]<0?0:1;return B.updateStatistics(),B}}.apply(null,n))||(e.exports=i)},400:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(166),r(155),r(118),r(151),r(202),r(421),r(313)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u){var p=n.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),c=n.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});return function(e){function t(t){var r=e.call(this,t)||this;return r.ascending=!0,r.itemRenderingRule=null,r.lockRasterIds=null,r.method=null,r.multidimensionalDefinition=null,r.objectIds=null,r.operation=null,r.sortField=null,r.sortValue=null,r.viewpoint=null,r.where=null,r}var n;return r.__extends(t,e),n=t,t.prototype.readAscending=function(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending},t.prototype.readMethod=function(e,t){return function(e){var t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;case"none":default:t="esriMosaicNone"}return c.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)},t.prototype.readOperation=function(e,t){var r=t.mosaicOperation,n=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),i=r||(n?p.toJSON(n):null);return p.fromJSON(i)||"first"},t.prototype.castSortValue=function(e){return null==e||"string"==typeof e||"number"==typeof e?e:""+e},t.prototype.clone=function(){return new n({ascending:this.ascending,itemRenderingRule:o.clone(this.itemRenderingRule),lockRasterIds:o.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:o.clone(this.multidimensionalDefinition),objectIds:o.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:o.clone(this.viewpoint),where:this.where})},r.__decorate([a.property({type:Boolean,json:{write:!0}})],t.prototype,"ascending",void 0),r.__decorate([a.reader("ascending",["ascending","sortAscending"])],t.prototype,"readAscending",null),r.__decorate([a.property({type:u,json:{write:!0}})],t.prototype,"itemRenderingRule",void 0),r.__decorate([a.property({type:[Number],json:{write:{overridePolicy:function(){return{enabled:"lock-raster"===this.method}}}}})],t.prototype,"lockRasterIds",void 0),r.__decorate([a.property({type:String,json:{type:c.jsonValues,write:{target:"mosaicMethod",writer:c.write}}})],t.prototype,"method",void 0),r.__decorate([a.reader("method",["mosaicMethod","defaultMosaicMethod"])],t.prototype,"readMethod",null),r.__decorate([a.property({type:[l],json:{write:!0}})],t.prototype,"multidimensionalDefinition",void 0),r.__decorate([a.property({type:[Number],json:{read:{source:"fids"},write:{target:"fids"}}})],t.prototype,"objectIds",void 0),r.__decorate([a.property({json:{type:p.jsonValues,read:{reader:p.read},write:{target:"mosaicOperation",writer:p.write}}})],t.prototype,"operation",void 0),r.__decorate([a.reader("operation",["mosaicOperation","mosaicOperator"])],t.prototype,"readOperation",null),r.__decorate([a.property({type:String,json:{write:{overridePolicy:function(){return{enabled:"attribute"===this.method}}}}})],t.prototype,"sortField",void 0),r.__decorate([a.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],t.prototype,"sortValue",void 0),r.__decorate([a.cast("sortValue")],t.prototype,"castSortValue",null),r.__decorate([a.property({type:s,json:{write:!0}})],t.prototype,"viewpoint",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"where",void 0),n=r.__decorate([a.subclass("esri.layers.support.MosaicRule")],t)}(i.JSONSupport)}.apply(null,n))||(e.exports=i)},421:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(155),r(118),r(151),r(179)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.variableName=null,r.dimensionName=null,r.values=[],r.isSlice=!1,r}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({variableName:this.variableName,dimensionName:this.dimensionName,values:i.clone(this.values),isSlice:this.isSlice})},r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"variableName",void 0),r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"dimensionName",void 0),r.__decorate([o.property({type:a.types.array(a.types.oneOf([a.types.native(Number),a.types.array(a.types.native(Number))])),json:{write:!0}})],t.prototype,"values",void 0),r.__decorate([o.property({type:Boolean,json:{write:!0}})],t.prototype,"isSlice",void 0),n=r.__decorate([o.subclass("esri.layers.support.DimensionalDefinition")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},422:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(399),r(180),r(118),r(313),r(461),r(549),r(630)],void 0===(i=function(e,t,r,n,i,o,a,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},p={type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},c=l.fromJSON(a.PREDEFINED_JSON_COLOR_RAMPS[0]);t.isSupportedRendererType=function(e){return["raster-stretch","unique-value","class-breaks","raster-shaded-relief"].indexOf(e.type)>-1},t.combineRenderingRules=function(e,t){if(!e||!t)return i.clone(e||t);var r=i.clone(e);return"none"!==t.functionName.toLowerCase()&&((function e(t){var r=t.Raster;return r&&"esri.layers.support.RasterFunction"===r.declaredClass?e(r.functionArguments):t}(r.functionArguments)).Raster=t),r},t.convertRendererToRenderingRule=function(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){var r=new o;r.functionName="Stretch";var n=d[s.stretchTypeJSONDict.toJSON(e.stretchType)],i={StretchType:n,Statistics:function(e){var t=[];return e.forEach((function(e){var r=e;if(Array.isArray(r))t.push(r);else{if(null==r.min||null==r.max)return;var n=[r.min,r.max,r.avg||0,r.stddev||0];t.push(n)}})),t}(e.statistics),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(i.Min=e.outputMin),null!=e.outputMax&&(i.Max=e.outputMax),n===d.standardDeviation?(i.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType="u8"):n===d.percentClip?(i.MinPercent=e.minPercent,i.MaxPercent=e.maxPercent,r.outputPixelType="u8"):n===d.minMax?r.outputPixelType="u8":n===d.sigmoid&&(i.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=i,r.variableName="Raster",e.colorRamp){var l=e.colorRamp,u=new o,p=a.getColorRampName(l);return p?u.functionArguments={colorRamp:p}:!t.convertColorRampToColormap||"algorithmic"!==l.type&&"multipart"!==l.type?u.functionArguments={colorRamp:e.colorRamp.toJSON()}:u.functionArguments={Colormap:a.convertColorRampToColormap(l,256)},u.variableName="Raster",u.functionName="Colormap",u.functionArguments.Raster=r,u}return r}(e,t);case"class-breaks":return function(e,t){var r=[],n=[],i=[],a=[],s=t.pixelType,l=t.rasterAttributeTable,u=l&&l.features,p=h(l);if(u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((function(t,r){var n,i=t.symbol.color;i.a&&u.forEach((function(o){((n=o.attributes[e.field])>=t.minValue&&n<t.maxValue||r===e.classBreakInfos.length-1&&n>=t.minValue)&&a.push([o.attributes[p],i.r,i.g,i.b])}))}));var c=s?f(a,s):a,d=new o;return d.functionName="Colormap",d.functionArguments={},d.functionArguments.Colormap=c,d.variableName="Raster",d}e.classBreakInfos.forEach((function(e,t){var o=e.symbol&&e.symbol.color;o.a?(0===t?r.push(e.minValue,e.maxValue+1e-6):r.push(e.minValue+1e-6,e.maxValue+1e-6),n.push(t),a.push([t,o.r,o.g,o.b])):i.push(e.minValue,e.maxValue)}));var m=s?f(a,s):a,y=new o;y.functionName="Remap",y.functionArguments={InputRanges:r,OutputValues:n,NoDataRanges:i},y.variableName="Raster";var g=new o;return g.functionName="Colormap",g.functionArguments={Colormap:m,Raster:y},g}(e,t);case"unique-value":return function(e,t){var r=[],n=t.pixelType,i=t.rasterAttributeTable,a=i&&i.features,s=h(i),l=!1;if(e.uniqueValueInfos&&e.uniqueValueInfos.forEach((function(t){var n=t.symbol.color;n.a&&(e.field!==s&&a?a&&a.forEach((function(i){String(i.attributes[e.field])===String(t.value)&&r.push([i.attributes[s],n.r,n.g,n.b])})):isNaN(t.value)?l=!0:r.push([t.value,n.r,n.g,n.b]))})),l)return null;var u=n&&r.length>0?f(r,n):r,p=new o;return p.functionName="Colormap",p.functionArguments={},p.functionArguments.Colormap=u,p.variableName="Raster",p}(e,t);case"raster-colormap":return function(e,t){var r=e.extractColormap();if(r&&0!==r.length){var n=t.pixelType,i=n?f(r,n):r,a=new o;return a.functionName="Colormap",a.functionArguments={},a.functionArguments.Colormap=i,a}}(e,t);case"raster-shaded-relief":return function(e,t){if("elevation"!==t.dataType)return new o;var r=new o;r.functionName="Hillshade";var n="traditional"===e.hillshadeType?0:1,i="none"===e.scalingType?1:3,s={HillshadeType:n,SlopeType:i,ZFactor:e.zFactor};return 0===n&&(s.Azimuth=e.azimuth,s.Altitude=e.altitude),3===i&&(s.PSPower=e.pixelSizePower,s.PSZFactor=e.pixelSizeFactor),r.functionArguments=s,r.variableName="Raster",e.colorRamp&&(r.functionName="ShadedRelief",s.Colormap=a.convertColorRampToColormap(e.colorRamp,256)),r}(e,t)}},t.createDefaultRenderer=function(e,t){if(e){var n,i,o,s,l,u,d,f=e.attributeTable,h=e.dataType,m=e.bandCount,y=e.pixelType,g=e.colormap,v=e.statistics,_=e.histograms;if(t&&t.length>0&&(v=v?t.map((function(e){return v[e]})):null,_=_?t.map((function(e){return _[e]})):null),f&&(i=f.fields.filter((function(e){return"red"===e.name.toLowerCase()}))[0],o=f.fields.filter((function(e){return"green"===e.name.toLowerCase()}))[0],s=f.fields.filter((function(e){return"blue"===e.name.toLowerCase()}))[0],u=f.fields.filter((function(e){return"value"===e.name.toLowerCase()}))[0],(l=f.fields.filter((function(e){return"classname"===e.name.toLowerCase()||"class_name"===e.name.toLowerCase()}))[0])||(l=f.fields.filter((function(e){return"string"===e.type}))[0])||(l=u)),1===m&&(null==g?void 0:g.length)>0)f&&i&&o&&s&&(d={},f.features.forEach((function(e){var t=e.attributes;d[t[u.name]]=l?t[l.name]:t[u.name]}))),n=r.RasterColormapRenderer.createFromColormap(g,d);else if(1===m&&f){var b=void 0,I=f.features;if(i&&o&&s&&l)b=I.map((function(e){return{value:e.attributes[l.name],label:e.attributes[l.name],symbol:{type:"esriSFS",style:"esriSFSSolid",color:[e.attributes[i.name],e.attributes[o.name],e.attributes[s.name],255]}}}));else{var T=a.convertColorRampToColormap(c,I.length);b=I.map((function(e,t){return{value:e.attributes[u.name],label:e.attributes[u.name],symbol:{color:T[t].slice(1,4),type:"esriSFS",style:"esriSFSSolid"}}}))}b.sort((function(e,t){return e.value>t.value?1:-1})),n=r.UniqueValueRenderer.fromJSON({field1:l.name,uniqueValueInfos:b})}if(!n){var w=void 0,x=!1,S=void 0,N=void 0,R=void 0;"u8"===y&&"processed"===h?(w="none",v=1===m?[{min:0,max:255}]:[{min:0,max:255},{min:0,max:255},{min:0,max:255}]):"u8"===y||"elevation"===h?(w="min-max",x=!v):"scientific"===h?(w="min-max",x=!v,S=p):_&&_.length>0?(w="percent-clip",R=N=.25):v?w="min-max":(w="percent-clip",x=!0),n=r.RasterStretchRenderer.fromJSON({stretchType:w,dra:x,colorRamp:S,min:0,max:255,statistics:x?null:v,histograms:x?null:_,maxPercent:N,minPercent:R})}return n}},t.getDefaultBandCombination=function(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var r,n,i,o,a,s=e.keyProperties&&e.keyProperties.BandProperties;if(s&&s.length===t){for(var l=0;l<s.length;l++)s[l].BandName&&"red"===s[l].BandName.toLowerCase()&&(n=l),s[l].BandName&&"green"===s[l].BandName.toLowerCase()&&(i=l),s[l].BandName&&"blue"===s[l].BandName.toLowerCase()&&(o=l),s[l].BandName&&"nearinfrared"===s[l].BandName.toLowerCase()&&(a=l);void 0!==n&&void 0!==i&&void 0!==o?r=[n,i,o]:void 0!==n&&void 0!==i&&void 0!==a&&(r=[a,n,i])}return!r&&t>3&&(r=[0,1,2]),r};var d={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function f(e,t){var r=u[String(t).toLowerCase()];return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function h(e){if(e){var t=e.fields,r=t&&n.find(t,(function(e){return e&&e.name&&"value"===e.name.toLowerCase()}));return r&&r.name}}}.apply(null,n))||(e.exports=i)},460:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(297),r(152),r(225),r(153),r(151),r(208),r(689),r(339),r(244),r(240),r(298),r(265),r(410),r(233),r(411)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,d,f,h,m,y,g){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n.legendEnabled=!0,n.isReference=null,n.operationalLayerType="ArcGISImageServiceLayer",n.popupEnabled=!0,n.popupTemplate=null,n.type="imagery",n}return r.__extends(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r.__assign({url:e},t):e},t.prototype.load=function(e){var t=this,r=i.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),a.resolve(this)},Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),t.prototype.createPopupTemplate=function(e){var t=this.rasterFields,n=this.title,i=new Set,o=!1,a=!1;this.capabilities&&(a=(o=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));var s=new Set;o&&(s.add("raster.itempixelvalue"),a&&s.add("raster.magnitude").add("raster.direction"));for(var l=0,u=t;l<u.length;l++){var p=u[l],c=p.name.toLowerCase();s.has(c)||c.indexOf("raster.servicepixelvalue.")>-1||i.add(p.name)}return g.createPopupTemplate({fields:t,title:n},r.__assign(r.__assign({},e),{visibleFieldNames:i}))},t.prototype.redraw=function(){this.emit("redraw")},r.__decorate([s.property(y.legendEnabled)],t.prototype,"legendEnabled",void 0),r.__decorate([s.property({type:["show","hide"]})],t.prototype,"listMode",void 0),r.__decorate([s.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],t.prototype,"isReference",void 0),r.__decorate([s.property({type:["ArcGISImageServiceLayer"]})],t.prototype,"operationalLayerType",void 0),r.__decorate([s.property(y.popupEnabled)],t.prototype,"popupEnabled",void 0),r.__decorate([s.property({type:n,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),r.__decorate([s.property({readOnly:!0,dependsOn:["fields","title"]})],t.prototype,"defaultPopupTemplate",null),r.__decorate([s.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),r.__decorate([s.subclass("esri.layers.ImageryLayer")],t)}(m.TemporalLayer(f.RefreshableLayer(h.ScaleRangeLayer(c.OperationalLayer(d.PortalLayer(u.ArcGISImageService(p.ArcGISService(o.MultiOriginJSONMixin(l)))))))))}.apply(null,n))||(e.exports=i)},550:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(154),r(153),r(305),r(267)],void 0===(i=function(e,t,r,n,i,o,a){return function(){function e(){this._workerThread=null,this._destroyed=!1}return e.prototype.initialize=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,o.open("RasterWorker")];case 1:return e=t.sent(),this._destroyed?e.close():this._workerThread=e,[2]}}))}))},e.prototype.destroy=function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)},e.prototype.decode=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new n("raster-jobhandler:no-connection","no available worker connection");return[4,this._workerThread.invoke("decode",e,t)];case 1:return[2,(i=r.sent())?new a(i):null]}}))}))},e.prototype.symbolize=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new n("raster-jobhandler:no-connection","no available worker connection");return i={extent:e.extent&&e.extent.toJSON(),pixelBlock:e.pixelBlock.toJSON(),simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},[4,this._workerThread.invoke("symbolize",i,t)];case 1:return[2,(o=r.sent())?new a(o):null]}}))}))},e.prototype.updateSymbolizer=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var o;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new n("raster-jobhandler:no-connection","no available worker connection");return o=e&&e.renderer&&"raster-stretch"===e.renderer.type&&e.renderer.histograms,[4,i.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:o},t))];case 1:return r.sent(),[2]}}))}))},e.prototype.stretch=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this._workerThread)throw new n("raster-jobhandler:no-connection","no available worker connection");return e&&e.pixelBlock?(i={srcPixelBlock:e.pixelBlock.toJSON(),stretchParams:e.stretchParams},[4,this._workerThread.invoke("stretch",i,t)]):[2,null];case 1:return[2,(o=r.sent())?new a(o):null]}}))}))},e.prototype.mosaicAndTransform=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(s){switch(s.label){case 0:if(!this._workerThread)throw new n("raster-jobhandler:no-connection","no available worker connection");return e&&e.srcPixelBlocks&&e.srcPixelBlocks.length>0?(i=r.__assign(r.__assign({},e),{srcPixelBlocks:e.srcPixelBlocks.map((function(e){return e?e.toJSON():null}))}),[4,this._workerThread.invoke("mosaicAndTransform",i,t)]):[2,null];case 1:return[2,(o=s.sent())?new a(o):null]}}))}))},e}()}.apply(null,n))||(e.exports=i)},689:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(159),r(174),r(399),r(165),r(154),r(166),r(118),r(156),r(152),r(153),r(172),r(151),r(179),r(233),r(421),r(690),r(194),r(255),r(422),r(400),r(267),r(313),r(423),r(550),r(603),r(604),r(693),r(463),r(187),r(696),r(199)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u,p,c,d,f,h,m,y,g,v,_,b,I,T,w,x,S,N,R,A,E,O,C,k,M){Object.defineProperty(t,"__esModule",{value:!0});var P=p.getLogger("esri.layers.mixins.ArcGISImageService"),j=l.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),F=l.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),Y=l.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});t.ArcGISImageService=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._functionRasterInfos={},t._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},t._symbolizer=null,t._defaultServiceMosaicRule=null,t.rasterAttributeTableFieldPrefix="Raster.",t.adjustAspectRatio=null,t.bandCount=null,t.bandIds=void 0,t.capabilities=null,t.compressionQuality=void 0,t.compressionTolerance=.01,t.copyright=null,t.definitionExpression=null,t.exportImageServiceParameters=null,t.rasterInfo=null,t.fields=null,t.fullExtent=null,t.hasMultidimensions=!1,t.imageMaxHeight=4100,t.imageMaxWidth=4100,t.interpolation=void 0,t.multidimensionalInfo=null,t.noData=null,t.noDataInterpretation=void 0,t.objectIdField=null,t.pixelSizeX=null,t.pixelSizeY=null,t.pixelFilter=null,t.raster=void 0,t.viewId=void 0,t.renderer=null,t.rasterAttributeTable=null,t.rasterFunctionInfos=null,t.serviceDataType=null,t.spatialReference=null,t.pixelType=null,t.serviceRasterInfo=null,t.sourceJSON=null,t.url=null,t.version=null,t}return r.__extends(t,e),t.prototype.initialize=function(){this._set("exportImageServiceParameters",new v.ExportImageServiceParameters({layer:this}))},t.prototype.readDefaultServiceMosaicRule=function(e,t){return T.fromJSON(t)},Object.defineProperty(t.prototype,"rasterFunctionNamesIndex",{get:function(){var e=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos.length<1||this.rasterFunctionInfos.forEach((function(t){e.set(t.name.toLowerCase().replace(/ /gi,"_"),t.name)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryTask",{get:function(){return new O({url:this.url})},enumerable:!0,configurable:!0}),t.prototype.readBandIds=function(e,t){if(Array.isArray(e)&&e.length>0&&e.every((function(e){return"number"==typeof e})))return e},t.prototype.readCapabilities=function(e,t){return this._readCapabilities(t)},t.prototype.writeCompressionQuality=function(e,t,r){null!=e&&"lerc"!==this.format&&(t[r]=e)},t.prototype.writeCompressionTolerance=function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)},Object.defineProperty(t.prototype,"fieldsIndex",{get:function(){return this.fields?new b(this.fields):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._get("format")||(null!=this.pixelFilter?"lerc":"jpgpng")},set:function(e){e&&["png","png8","png24","png32","jpg","bmp","jpgpng","lerc","tiff"].indexOf(e.toLowerCase())>-1&&this._set("format",e.toLowerCase())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mosaicRule",{set:function(e){var t=e;t&&t.mosaicMethod&&(t=T.fromJSON(r.__assign(r.__assign({},t.toJSON()),{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)},enumerable:!0,configurable:!0}),t.prototype.readMosaicRule=function(e,t){return T.fromJSON(e||t.mosaicRule||t)},t.prototype.writeMosaicRule=function(e,t,r){var n=this.mosaicRule,i=this.definitionExpression;n?i&&i!==n.where&&((n=n.clone()).where=i):i&&(n=new T({where:i})),this._isValidCustomizedMosaicRule(n)&&(t[r]=n.toJSON())},t.prototype.writeNoData=function(e,t,r){null!=e&&"number"==typeof e&&(t[r]=e)},t.prototype.readObjectIdField=function(e,t){if(!e){var r=t.fields.filter((function(e){return"esriFieldTypeOID"===e.type||"oid"===e.type}));e=r&&r[0]&&r[0].name}return e},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this.url?f.urlToObject(this.url):null},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var n=t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,i=o.read(n,r)||void 0;if(null!=i)return I.isSupportedRendererType(i)||P.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),i},Object.defineProperty(t.prototype,"rasterFields",{get:function(){var e=this.rasterAttributeTableFieldPrefix||"Raster.",t=new _({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),r=new _({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new _({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),i=this.fields?u.clone(this.fields):[];i.push(r),this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0&&i.push(t),this.version>=10.4&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some((function(e){return"none"===e.name.toLowerCase()}))&&i.push(n),this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((function(e){return"none"!==e.name.toLowerCase()})).forEach((function(e){i.push(new _({name:"Raster.ServicePixelValue."+e.name,alias:e.name,domain:null,editable:!1,length:50,type:"string"}))})),null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(i.push(new _({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),i.push(new _({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));var o=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(o&&o.length>0){var a=o.filter((function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(t){var r=u.clone(t);return r.name=e+t.name,r}));i=i.concat(a)}return i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingRule",{set:function(e){var t=e;t&&t.rasterFunction&&(t=x.fromJSON(r.__assign(r.__assign({},t.toJSON()),{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)},enumerable:!0,configurable:!0}),t.prototype.readRenderingRule=function(e,t){var r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&"None"!==r[0].name?x.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null},t.prototype.writeRenderingRule=function(e,t,r){this._isRFTJson(e)||(t[r]=e.toJSON())},t.prototype.readSpatialReference=function(e,t){var r=e||t.extent.spatialReference;return r?n.SpatialReference.fromJSON(r):null},t.prototype.readPixelType=function(e){return Y.fromJSON(e)||e},t.prototype.writePixelType=function(e,t,r){(c.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[r]=Y.toJSON(e))},t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("fields")||t.hasOwnProperty("timeInfo")?10:9.3),r},t.prototype.applyFilter=function(e){var t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t},t.prototype.applyRenderer=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(l){switch(l.label){case 0:return n=e,this._isPicture()||!this.renderer||!this._symbolizer||this.pixelFilter?[3,5]:(i=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),o=this._rasterJobHandler.instance,a=this.bandIds,o?i?(this._symbolizer.bind(),[4,o.updateSymbolizer(this._symbolizer,t)]):[3,2]:[3,4]);case 1:l.sent(),this._cachedRendererJson=this.renderer.toJSON(),l.label=2;case 2:return[4,o.symbolize(r.__assign({bandIds:a},e),t)];case 3:return s=l.sent(),n={extent:e.extent,pixelBlock:s},[3,5];case 4:n={extent:e.extent,pixelBlock:this._symbolizer.symbolize(r.__assign({bandIds:a},e))},l.label=5;case 5:return[2,n]}}))}))},t.prototype.destroy=function(){this._shutdownJobHandler()},t.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++},t.prototype.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()},t.prototype.fetchImage=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==e||null==t||null==r)return d.reject(new s("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var o=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:n.signal}):null;return d.when(o).then((function(o){o&&(i.rasterInfo=o);var a={imageServiceParameters:i.getExportImageServiceParameters(e,t,r,n.timeExtent),imageProps:{extent:e,width:t,height:r,format:i.format},requestAsImageElement:n.requestAsImageElement&&!i.pixelFilter||!1,signal:n.signal};return i._requestArrayBuffer(a)}))},t.prototype.fetchKeyProperties=function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return a(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return e.data}))},t.prototype.fetchRasterAttributeTable=function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return this.version<10.1?d.reject(new s("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):a(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return C.fromJSON(e.data)}))},t.prototype.getCatalogItemRasterInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,l,u;return r.__generator(this,(function(p){switch(p.label){case 0:return i=a(this.parsedUrl.path+"/"+e+"/info",r.__assign({query:this._getQueryParams()},t)).then((function(e){return e.data})),o=a(this.parsedUrl.path+"/"+e+"/info/keyProperties",r.__assign({query:this._getQueryParams()},t)).then((function(e){return e.data})).catch((function(){})),[4,d.all([i,o])];case 1:return(s=p.sent())[0]?(l=n.Extent.fromJSON(s[0].extent),u=s[0].statistics?s[0].statistics.map((function(e){return{min:e[0],max:e[1],avg:e[2],stddev:e[3]}})):null,[2,new S({bandCount:s[0].bandCount,extent:l,spatialReference:l.sr,pixelSize:new n.Point({x:s[0].pixelSizeX,y:s[0].pixelSizeY,spatialReference:l.sr}),pixelType:s[0].pixelType.toLowerCase(),statistics:u,histograms:s[0].histograms,keyProperties:s[1]})]):[2,void 0]}}))}))},t.prototype.getCatalogItemICSInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,l,u,p,c,f,h,m,y,g,v,_,b,I,T,w,x,S,N,R,A,E,O,C,k,M,P,j;return r.__generator(this,(function(F){switch(F.label){case 0:return[4,a(this.parsedUrl.path+"/"+e+"/info/ics",r.__assign({query:this._getQueryParams()},t))];case 1:if(i=F.sent().data,!(o=i&&i.ics))return[2,void 0];s=null,F.label=2;case 2:return F.trys.push([2,4,,5]),[4,a(this.parsedUrl.path+"/"+e+"/info",r.__assign({query:this._getQueryParams()},t))];case 3:return l=F.sent(),s=l.data.extent,[3,5];case 4:return F.sent(),[3,5];case 5:if(!s||!s.spatialReference)return[2,{ics:o,icsToPixelTransform:null,icsExtent:null,northDirection:null}];for(u=this.version>=10.7?a(this.parsedUrl.path+"/"+e+"/info/icstopixel",r.__assign({query:this._getQueryParams()},t)).then((function(e){return e.data})).catch((function(){return{}})):{},p=s.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[s]}),inSR:p.wkid||p,outSR:"0:"+e},f=a(this.parsedUrl.path+"/project",r.__assign({query:this._getQueryParams(c)},t)).then((function(e){return e.data})).catch((function(){return{}})),h=5,m=(s.xmin+s.xmax)/2,y=(s.ymax-s.ymin)/(h+1),g=s.ymin+y,v=[],C=0;C<h;C++)v.push({x:m,y:g+y*C});return _={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:v}),inSR:p.wkid||p,outSR:"0:"+e},b=a(this.parsedUrl.path+"/project",r.__assign({query:this._getQueryParams(_)},t)).then((function(e){return e.data})).catch((function(){return{}})),[4,d.all([u,f,b])];case 6:if(I=F.sent(),null==(T=I[0].ipxf)&&(w=o.geodataXform&&o.geodataXform.xf_0)&&"topup"===w.name.toLowerCase()&&(T={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:w.coefficients,cellsizeRatio:0,type:"GeometricXform"}}),(x=n.Extent.fromJSON(I[1]&&I[1].geometries&&I[1].geometries[0]))&&(x.spatialReference=new n.SpatialReference({wkid:0,imageCoordinateSystem:o})),S=I[2].geometries?I[2].geometries.filter((function(e){return null!=e})):[],(N=S.length)<3)return[2,{ics:o,icsToPixelTransform:T,icsExtent:x,northDirection:null}];for(R=0,A=0,E=0,O=0,C=0;C<N;C++)R+=S[C].x,A+=S[C].y,E+=S[C].x*S[C].x,O+=S[C].x*S[C].y;return k=(N*O-R*A)/(N*E-R*R),M=0,P=S[h-1].x>S[0].x,j=S[h-1].y>S[0].y,k===1/0?M=j?90:270:0===k?M=P?0:180:k>0?M=P?180*Math.atan(k)/Math.PI:180*Math.atan(k)/Math.PI+180:k<0&&(M=j?180+180*Math.atan(k)/Math.PI:360+180*Math.atan(k)/Math.PI),[2,{ics:o,icsToPixelTransform:T,icsExtent:x,northDirection:M}]}}))}))},t.prototype.generateRasterInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:if((!e||"none"===e.functionName.toLowerCase())&&c.isSome(this.serviceRasterInfo))return[2,this.serviceRasterInfo];if(n=function(e){if(!e)return null;var t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi),r=null==t?void 0:t.map((function(e){return e.replace('"rasterFunction":"',"").replace('"',"")}));return r?r.join("/"):null}(e),this._functionRasterInfos[n])return[2,this._functionRasterInfos[n]];i=this._generateRasterInfo(e,t),this._functionRasterInfos[n]=i,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i];case 2:return[2,r.sent()];case 3:return r.sent(),this._functionRasterInfos[n]=null,[2,null];case 4:return[2]}}))}))},t.prototype.getExportImageServiceParameters=function(e,t,n,i){var o,a=(e=e.clone().shiftCentralMeridian()).spatialReference;if(a.imageCoordinateSystem){var s=a.imageCoordinateSystem,l=s.id,u=s.referenceServiceName;o=null!=l?u?this.parsedUrl.path.toLowerCase().indexOf("/"+u.toLowerCase()+"/")>-1?"0:"+l:JSON.stringify({icsid:l,icsns:u}):"0:"+l:JSON.stringify({ics:a.imageCoordinateSystem})}else o=a.wkid||JSON.stringify(a.toJSON());c.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var p=this.exportImageServiceParameters.toJSON(),d=p.bandIds,f=p.noData,h=p.mosaicRule,m=p.renderingRule;d instanceof Array&&d.length>0&&(p.bandIds=d.join(",")),f instanceof Array&&f.length>0&&(p.noData=f.join(","));var y=this.timeInfo;h&&h.multidimensionalDefinition&&i&&y&&y.startField&&(h.multidimensionalDefinition=h.multidimensionalDefinition.filter((function(e){return e.dimensionName!==y.startField}))),p.mosaicRule=h&&JSON.stringify(h),p.renderingRule=m&&JSON.stringify(m);var g={};if(i){var v=i.toJSON(),_=v.start,b=v.end;_&&b&&_===b?g.time=""+_:null==_&&null==b||(g.time=(null==_?"null":_)+","+(null==b?"null":b))}return r.__assign(r.__assign({bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:o,imageSR:o,size:t+","+n},p),g)},t.prototype.queryRasters=function(e){return this.queryTask.execute(e)},t.prototype.queryVisibleRasters=function(e,t){var r=this;if(!e)return d.reject(new s("imagery-layer: query-visible-rasters","missing query parameter"));var i=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1},o=i.pixelSize,a=i.returnDomainValues,l=i.returnTopmostRaster,u=i.showNoDataRecords,p=!1,c=null,f=null,h=this.rasterFunctionNamesIndex;if(e.outFields&&(p=e.outFields.some((function(e){return-1===e.toLowerCase().indexOf("raster.servicepixelvalue")})),this.version>=10.4)){var m=e.outFields.filter((function(e){return e.toLowerCase().indexOf("raster.servicepixelvalue")>-1&&e.length>"raster.servicepixelvalue".length})).map((function(e){var t=e.slice("raster.servicepixelvalue".length+1);return[r._updateRenderingRulesFunctionName(t,h),t]}));c=m.map((function(e){return new x({functionName:e[0]})})),f=m.map((function(e){return e[1]})),0===c.length?this.renderingRule?(c.push(this.renderingRule),f.push(this.renderingRule.functionName)):c=null:this.renderingRule&&!c.some((function(e){return e.functionName===r.renderingRule.functionName}))&&(c.push(this.renderingRule),f.push(this.renderingRule.functionName))}var y=!e.outSpatialReference||e.outSpatialReference.equals(this.spatialReference),g=this._getQueryParams({geometry:e.geometry,timeExtent:e.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:c,pixelSize:o,returnCatalogItems:p,returnGeometry:y,maxItemCount:l?1:null});delete g.f;var v=new k(g),_=new E({url:this.url}),b=this.generateRasterInfo(this.renderingRule);return d.create((function(t){b.then((function(){_.execute(v).then((function(i){var o=e.outFields;if(p&&!y&&i.catalogItems&&i.catalogItems.features&&i.catalogItems.features.length>0){var l=r.objectIdField||"ObjectId",c=i.catalogItems.features,d=c.map((function(e){return e.attributes&&e.attributes[l]})),h=new M({objectIds:d,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[l]});return r.queryRasters(h).then((function(s){s&&s.features&&s.features.length>0&&s.features.forEach((function(t){c.forEach((function(r){r.attributes[l]===t.attributes[l]&&(r.geometry=new n.Polygon(t.geometry),r.geometry.spatialReference=e.outSpatialReference)}))})),t(r._processVisibleRastersResponse(i,{returnDomainValues:a,templateRRFunctionNames:f,showNoDataRecords:u,templateFields:o}))})).catch((function(){throw new s("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry")}))}t(r._processVisibleRastersResponse(i,{returnDomainValues:a,templateRRFunctionNames:f,showNoDataRecords:u,templateFields:o}))})).catch((function(){throw new s("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}))}))}))},t.prototype._fetchService=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,l,u,p,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=this.sourceJSON)?[3,2]:[4,a(this.parsedUrl.path,{query:this._getQueryParams(),signal:e})];case 1:i=r.sent(),o=i.data,l=i.ssl,n=o,this.sourceJSON=n,l&&(this.url=this.url.replace(/^http:/i,"https:")),r.label=2;case 2:if((null===(t=n.capabilities)||void 0===t?void 0:t.toLowerCase().split(",").map((function(e){return e.trim()})).indexOf("tilesonly"))>-1)throw new s("imagery-layer:fetch-metadata","use ImageryTileLayer to open tiles-only image services");return this.read(n,{origin:"service",url:this.parsedUrl}),c.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo),u=c.isSome(this.serviceRasterInfo)?d.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:n,signal:e}).then((function(e){return f._set("serviceRasterInfo",e),e})),p=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:e}):null,[2,d.all([u,p]).then((function(e){e[1]?f._set("rasterInfo",e[1]):f._set("rasterInfo",e[0]),f._configDefaultRenderer(),f.watch("renderer",(function(){return f._configDefaultRenderer()})),f.watch("renderingRule",(function(e){(f.renderer||f._symbolizer||f.popupEnabled&&f.popupTemplate)&&f.generateRasterInfo(e).then((function(e){e&&(f.rasterInfo=e)}))}));var t=c.isSome(f.serviceRasterInfo)&&f.serviceRasterInfo.multidimensionalInfo;t&&f._updateMultidimensionalDefinition(t)}))]}}))}))},t.prototype._initJobHandler=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(r){switch(r.label){case 0:return null!=this._rasterJobHandler.connectionPromise?[2,this._rasterJobHandler.connectionPromise]:(e=new N,this._rasterJobHandler.connectionPromise=e.initialize().then((function(){t._rasterJobHandler.instance=e}),(function(){return null})),[4,this._rasterJobHandler.connectionPromise]);case 1:return r.sent(),[2]}}))}))},t.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0},t.prototype._isPicture=function(){return!this.format||this.format.indexOf("jpg")>-1||this.format.indexOf("png")>-1},t.prototype._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&this.rasterInfo.bandCount>=3){var e=I.getDefaultBandCombination(this.rasterInfo);!e||3===this.rasterInfo.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}this.renderer||(this.renderer=I.createDefaultRenderer(this.rasterInfo,this.bandIds)),this._symbolizer?(this._symbolizer.renderer=this.renderer,this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new A({renderer:this.renderer,rasterInfo:this.rasterInfo}),this._symbolizer.bind()||(this._symbolizer=null)}},t.prototype._clonePixelData=function(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:e.pixelBlock&&e.pixelBlock.clone()}},t.prototype._getQueryParams=function(e){var t=this.raster,n=this.viewId;return r.__assign({raster:t,viewId:n,f:"json"},e)},t.prototype._decodePixelBlock=function(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):R.decode(e,t,r)},t.prototype._fetchAuxiliaryRasterInfo=function(e){var t=e&&e.serviceInfo;if(!t)return d.reject(new s("imagery-layer:fetch-metadata","valid serviceInfo is required"));var r=e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,i=e.signal,o=!!(t.hasRasterAttributeTable&&this.version>=10.1)&&a(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:i}).then((function(e){return C.fromJSON(e.data)})).catch((function(){return null})),l=!!(t.hasColormap&&this.version>=10.1)&&a(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:this.version>=10.6?r:null}),signal:i}).then((function(e){return e.data&&e.data.colormap})),u=!!(t.hasHistograms&&this.version>=10.1)&&a(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:i}).then((function(e){return e.data&&e.data.histograms})),p=this.version>=10.3&&a(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:r}),signal:i}).then((function(e){return e.data})).catch((function(){})),c=!!(t.hasMultidimensions&&this.version>=10.3)&&a(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:i}).then((function(e){return e.data&&e.data.multidimensionalInfo}));return d.all([o,l,u,p,c]).then((function(e){var r=null;if(t.minValues&&t.minValues.length===t.bandCount){r=[];for(var i=0;i<t.minValues.length;i++)r.push({min:t.minValues[i],max:t.maxValues[i],avg:t.meanValues[i],stddev:t.stdvValues[i]})}var o=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),a=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),s=n.SpatialReference.fromJSON(t.spatialReference||t.extent.spatialReference);return new S({width:o,height:a,bandCount:t.bandCount,extent:n.Extent.fromJSON(t.extent),spatialReference:s,pixelSize:new n.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:s}),pixelType:t.pixelType.toLowerCase(),statistics:r,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||null,multidimensionalInfo:e[4]||null})}))},t.prototype._requestArrayBuffer=function(e){var t=this,n=e.imageProps,i=e.requestAsImageElement,o=e.signal;if(i&&!this.pixelFilter&&n.format&&n.format.indexOf("png")>-1)return a(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams(r.__assign({f:"image"},e.imageServiceParameters)),signal:o}).then((function(e){return{imageElement:e.data,params:n}}));var l=this._initJobHandler(),u=a(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams(r.__assign({f:"image"},e.imageServiceParameters)),signal:o});return d.all([u,l]).then((function(e){var i=e[0].data,a=n.format||"jpgpng",l=a;if("bsq"!==l&&"bip"!==l&&(l=R.getFormat(i)),!l)throw new s("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(i)));var u=a.indexOf("png")>-1&&("png"===l||"jpg"===l),p={signal:o};return u?R.decode(i,r.__assign({useCanvas:!0},n),p).then((function(e){return{pixelData:{pixelBlock:e,extent:n.extent},params:n}})):t._decodePixelBlock(i,{width:n.width,height:n.height,planes:null,pixelType:null,noDataValue:null,format:a},p).then((function(e){return{pixelData:{pixelBlock:e,extent:n.extent},params:n}}))}))},t.prototype._generateRasterInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(i){switch(i.label){case 0:return[4,a(this.parsedUrl.path,r.__assign({query:this._getQueryParams({renderingRule:e})},t))];case 1:return n=i.sent().data,[4,this._fetchAuxiliaryRasterInfo(r.__assign({serviceInfo:n,renderingRule:e},t))];case 2:return[2,i.sent()]}}))}))},t.prototype._isValidCustomizedMosaicRule=function(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())},t.prototype._updateMultidimensionalDefinition=function(e){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var t=e.variables[0].dimensions,r=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],o=i.extent,a=!0,s=[o[0]];i.hasRanges&&!0===i.hasRanges?(a=!1,s=[i.values[0]]):"stdz"===i.name.toLowerCase()&&Math.abs(o[1])<=Math.abs(o[0])&&(s=[o[1]]),r.push(new g({variableName:"",dimensionName:t[n].name,isSlice:a,values:s}))}if(r.length>0){this.mosaicRule=this.mosaicRule||new T;var l=this.mosaicRule.multidimensionalDefinition;(!l||l&&l.length<=0)&&(this.mosaicRule.multidimensionalDefinition=r)}}},t.prototype._formatAttributeValue=function(e,t){if("string"==typeof e){var r=this.popupTemplate&&this.popupTemplate.fieldInfos,n=this._getFieldInfo(r,t),i=n&&n.format;if(i){var o=void 0,a=void 0;return e.trim().indexOf(",")>-1?(a=(o=",")+" ",this._formatDelimitedString(e,o,a,i)):e.trim().indexOf(" ")>-1?(o=a=" ",this._formatDelimitedString(e,o,a,i)):this._formatNumberFromString(e,i)}}return e},t.prototype._getFieldInfo=function(e,t){if(e&&e.length&&t){var r=t.toLowerCase(),n=void 0;return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,"_")||(n=e,0))})),n}},t.prototype._formatDelimitedString=function(e,t,r,n){var i=this;return e&&t&&r&&n?e.trim().split(t).map((function(e){return i._formatNumberFromString(e,n)})).join(r):e},t.prototype._formatNumberFromString=function(e,t){if(!e||!t)return e;var r=Number(e);return isNaN(r)?e:t.format(r)},t.prototype._processVisibleRastersResponse=function(e,t){t=t||{};var r,n,o,a=e.value,s=t.templateRRFunctionNames,l=t.showNoDataRecords,u=t.returnDomainValues,p=t.templateFields,d=e.processedValues,f=e.catalogItems&&e.catalogItems.features,h=e.properties&&e.properties.Values&&e.properties.Values.map((function(e){return e.replace(/ /gi,", ")}))||[],m=this.objectIdField||"ObjectId",y="string"==typeof a&&a.toLowerCase().indexOf("nodata")>-1,g=[];if(a&&!f&&!y){var v={};v[m]=0,h=[a],f=[new i(this.fullExtent,null,v)]}if(!f)return[];this._updateResponseFieldNames(f,p);for(var _=0;_<f.length;_++){if(r=f[_],null!=a&&!y){if(n=h[_],o=this.renderingRule&&d&&d.length>0&&s&&s.length>0&&s.indexOf(this.renderingRule.functionName)>-1?d[s.indexOf(this.renderingRule.functionName)]:a,"nodata"===n.toLowerCase()&&!l)continue;r.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(n,"Raster.ItemPixelValue"),r.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(o,"Raster.ServicePixelValue"),this._updateFeatureWithMagDirValues(r,n);var b=this.fields&&this.fields.length>0,I=this.renderingRule&&c.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?b?n:a:o;this.renderingRule||(I=b?n:a),this._updateFeatureWithRasterAttributeTableValues(r,I)}if(r.sourceLayer=this,u&&this._updateFeatureWithDomainValues(r),s&&d&&s.length===d.length)for(var T=0;T<s.length;T++){var w="Raster.ServicePixelValue."+s[T];r.attributes[w]=this._formatAttributeValue(d[T],w)}g.push(f[_])}return g},t.prototype._updateFeatureWithRasterAttributeTableValues=function(e,t){var r=this,n=this.rasterInfo&&this.rasterInfo.attributeTable||c.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,i=n&&n.features;if(i){var o=n.fields,a=o.map((function(e){return e.name})).filter((function(e){return"value"===e.toLowerCase()})),s=a&&a[0];if(s){var l=i.filter((function(e){return e.attributes[s]===(null!=t?parseInt(t,10):null)}));l&&l[0]&&o.forEach((function(t){var n=r.rasterAttributeTableFieldPrefix+t.name;e.attributes[n]=r._formatAttributeValue(l[0].attributes[t.name],n)}))}}},t.prototype._updateFeatureWithMagDirValues=function(e,t){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var r=t.replace(" ",",").split(",").map((function(e){return parseFloat(e)})),i=r.map((function(e){return[e]})),o=r.map((function(e){return{minValue:e,maxValue:e,noDataValue:null}})),a=new w({height:1,width:1,pixelType:"f32",pixels:i,statistics:o});this.pixelFilter({pixelBlock:a,extent:new n.Extent(0,0,0,0,this.spatialReference)}),e.attributes["Raster.Magnitude"]=a.pixels[0][0],e.attributes["Raster.Direction"]=a.pixels[1][0]}},t.prototype._updateFeatureWithDomainValues=function(e){var t=this.fields&&this.fields.filter((function(e){return e.domain&&"coded-value"===e.domain.type}));null!=t&&t.forEach((function(t){var r=e.attributes[t.name];if(null!=r){var n=t.domain.codedValues.filter((function(e){return e.code===r}))[0];n&&(e.attributes[t.name]=n.name)}}))},t.prototype._updateResponseFieldNames=function(e,t){if(t&&!(t.length<1)){var r=this.fieldsIndex;r&&e.forEach((function(e){if(e&&e.attributes)for(var n=0,i=t;n<i.length;n++){var o=i[n];if(r.has(o)){var a=r.get(o).name;a!==o&&(e.attributes[o]=e.attributes[a],delete e.attributes[a])}}}))}},t.prototype._updateRenderingRulesFunctionName=function(e,t){if(e&&!(e.length<1)){if("Raw"===e)return e.replace("Raw","None");var r=e.toLowerCase().replace(/ /gi,"_");return t.has(r)?t.get(r):e}},t.prototype._isRFTJson=function(e){return e.name&&e.arguments&&e.function&&e.hasOwnProperty("functionType")},t.prototype._readCapabilities=function(e){var t=e.capabilities?e.capabilities.toLowerCase().split(",").map((function(e){return e.trim()})):["image","catalog"],r=e.currentVersion,n=e.advancedQueryCapabilities,i=e.maxRecordCount,o=t.indexOf("image")>-1,a="esriImageServiceDataTypeElevation"===e.serviceDataType,s=!!(e.spatialReference||e.extent&&e.extent.spatialReference);return{operations:{supportsComputeHistograms:o,supportsExportImage:o,supportsIdentify:o,supportsMeasure:t.indexOf("mensuration")>-1&&s,supportsDownload:t.indexOf("download")>-1,supportsQuery:t.indexOf("catalog")>-1&&e.fields&&e.fields.length>0,supportsGetSamples:r>=10.2&&o,supportsProject:r>=10.3&&o,supportsComputeStatisticsHistograms:r>=10.4&&o,supportsQueryBoundary:r>=10.6&&o,supportsCalculateVolume:r>=10.7&&a,supportsComputePixelLocation:r>=10.7&&t.indexOf("catalog")>-1},query:{supportsStatistics:!(!n||!n.supportsStatistics),supportsOrderBy:!(!n||!n.supportsOrderBy),supportsDistinct:!(!n||!n.supportsDistinct),supportsPagination:!(!n||!n.supportsPagination),supportsStandardizedQueriesOnly:!(!n||!n.useStandardizedQueries),maxRecordCount:i}}},r.__decorate([h.property()],t.prototype,"_functionRasterInfos",void 0),r.__decorate([h.property()],t.prototype,"_rasterJobHandler",void 0),r.__decorate([h.property()],t.prototype,"_symbolizer",void 0),r.__decorate([h.property()],t.prototype,"_defaultServiceMosaicRule",void 0),r.__decorate([h.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultServiceMosaicRule",null),r.__decorate([h.property()],t.prototype,"_cachedRendererJson",void 0),r.__decorate([h.property()],t.prototype,"rasterAttributeTableFieldPrefix",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:["rasterFunctionInfos"]})],t.prototype,"rasterFunctionNamesIndex",null),r.__decorate([h.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"queryTask",null),r.__decorate([h.property()],t.prototype,"adjustAspectRatio",void 0),r.__decorate([h.property({readOnly:!0}),h.aliasOf("serviceRasterInfo.bandCount")],t.prototype,"bandCount",void 0),r.__decorate([h.property({type:[m.Integer],json:{write:!0}})],t.prototype,"bandIds",void 0),r.__decorate([h.reader("bandIds")],t.prototype,"readBandIds",null),r.__decorate([h.property({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),r.__decorate([h.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),r.__decorate([h.property({type:Number})],t.prototype,"compressionQuality",void 0),r.__decorate([h.writer("compressionQuality")],t.prototype,"writeCompressionQuality",null),r.__decorate([h.property({type:Number})],t.prototype,"compressionTolerance",void 0),r.__decorate([h.writer("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),r.__decorate([h.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),r.__decorate([h.property({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),r.__decorate([h.property({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),r.__decorate([h.property()],t.prototype,"rasterInfo",void 0),r.__decorate([h.property({readOnly:!0,type:[_]})],t.prototype,"fields",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:["fields"]})],t.prototype,"fieldsIndex",null),r.__decorate([h.property({type:String,json:{write:!0}})],t.prototype,"format",null),r.__decorate([h.property({type:n.Extent})],t.prototype,"fullExtent",void 0),r.__decorate([h.property({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),r.__decorate([h.property({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),r.__decorate([h.property({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),r.__decorate([h.property({type:String,json:{read:{reader:j.read},write:{writer:j.write}}})],t.prototype,"interpolation",void 0),r.__decorate([h.property({type:T})],t.prototype,"mosaicRule",null),r.__decorate([h.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),r.__decorate([h.writer("mosaicRule")],t.prototype,"writeMosaicRule",null),r.__decorate([h.property({readOnly:!0}),h.aliasOf("serviceRasterInfo.multidimensionalInfo")],t.prototype,"multidimensionalInfo",void 0),r.__decorate([h.property()],t.prototype,"noData",void 0),r.__decorate([h.writer("noData")],t.prototype,"writeNoData",null),r.__decorate([h.property({type:String,json:{read:{reader:F.read},write:{writer:F.write}}})],t.prototype,"noDataInterpretation",void 0),r.__decorate([h.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),r.__decorate([h.reader("objectIdField")],t.prototype,"readObjectIdField",null),r.__decorate([h.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"parsedUrl",null),r.__decorate([h.property({readOnly:!0}),h.aliasOf("serviceRasterInfo.pixelSize.x")],t.prototype,"pixelSizeX",void 0),r.__decorate([h.property({readOnly:!0}),h.aliasOf("serviceRasterInfo.pixelSize.y")],t.prototype,"pixelSizeY",void 0),r.__decorate([h.property({type:Function})],t.prototype,"pixelFilter",void 0),r.__decorate([h.property()],t.prototype,"raster",void 0),r.__decorate([h.property()],t.prototype,"viewId",void 0),r.__decorate([h.property({types:o.rasterRendererTypes,json:{read:{source:"layerDefinition.drawingInfo.renderer"},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",void 0),r.__decorate([h.reader("renderer")],t.prototype,"readRenderer",null),r.__decorate([h.property(y.opacityDrawingInfo)],t.prototype,"opacity",void 0),r.__decorate([h.property({readOnly:!0}),h.aliasOf("serviceRasterInfo.attributeTable")],t.prototype,"rasterAttributeTable",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:["fields","rasterInfo","capabilities"]})],t.prototype,"rasterFields",null),r.__decorate([h.property({readOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),r.__decorate([h.property({type:x})],t.prototype,"renderingRule",null),r.__decorate([h.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRenderingRule",null),r.__decorate([h.writer("renderingRule")],t.prototype,"writeRenderingRule",null),r.__decorate([h.property()],t.prototype,"serviceDataType",void 0),r.__decorate([h.property({readOnly:!0,type:n.SpatialReference})],t.prototype,"spatialReference",void 0),r.__decorate([h.reader("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),r.__decorate([h.property()],t.prototype,"pixelType",void 0),r.__decorate([h.reader("pixelType")],t.prototype,"readPixelType",null),r.__decorate([h.writer("pixelType")],t.prototype,"writePixelType",null),r.__decorate([h.property({constructOnly:!0,type:S})],t.prototype,"serviceRasterInfo",void 0),r.__decorate([h.property()],t.prototype,"sourceJSON",void 0),r.__decorate([h.property(y.url)],t.prototype,"url",void 0),r.__decorate([h.property({readOnly:!0})],t.prototype,"version",void 0),r.__decorate([h.reader("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),r.__decorate([h.subclass("esri.layers.mixins.ArcGISImageService")],t)}(e)}}.apply(null,n))||(e.exports=i)},690:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(166),r(155),r(151),r(422),r(400)],void 0===(i=function(e,t,r,n,i,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=new n.default({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),u=new n.default({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=null,t.adjustAspectRatio=void 0,t.bandIds=void 0,t.compression=void 0,t.compressionQuality=void 0,t.compressionTolerance=.01,t.format=null,t.interpolation=null,t.noData=null,t.noDataInterpretation=void 0,t.pixelType=void 0,t.lercVersion=2,t}return r.__extends(t,e),t.prototype.writeAdjustAspectRatio=function(e,t,r){this.layer.version<10.3||(t[r]=e)},t.prototype.writeCompressionQuality=function(e,t,r){this.format&&this.format.toLowerCase().indexOf("jpg")>-1&&null!=e&&(t[r]=e)},t.prototype.writeCompressionTolerance=function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)},t.prototype.writeLercVersion=function(e,t,r){"lerc"===this.format&&this.layer.version>=10.5&&(t[r]=e)},Object.defineProperty(t.prototype,"version",{get:function(){var e=this.layer;return e.bandIds,e.format,e.compressionQuality,e.compressionTolerance,e.interpolation,e.noData,e.noDataInterpretation,e.mosaicRule,e.renderingRule,e.adjustAspectRatio,e.pixelFilter,e.renderer,e.definitionExpression,(this._get("version")||0)+1},set:function(e){this._set("version",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mosaicRule",{get:function(){var e=this.layer,t=e.mosaicRule,r=e.definitionExpression;return t?r&&r!==t.where&&((t=t.clone()).where=r):r&&(t=new s({where:r})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingRule",{get:function(){var e=this.layer,t=e.renderingRule,r=e.pixelFilter;return(!e.format||e.format.indexOf("jpg")>-1||e.format.indexOf("png")>-1)&&!r&&(t=this.combineRendererWithRenderingRule()),t},enumerable:!0,configurable:!0}),t.prototype.combineRendererWithRenderingRule=function(){var e=this.layer,t=e.rasterInfo,r=e.renderingRule,n=e.renderer;return n&&a.isSupportedRendererType(n)?a.combineRenderingRules(a.convertRendererToRenderingRule(n,{rasterAttributeTable:t.attributeTable,pixelType:t.pixelType,convertColorRampToColormap:e.version<10.6,dataType:t.dataType}),r):r},r.__decorate([o.property()],t.prototype,"layer",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"adjustAspectRatio",void 0),r.__decorate([o.writer("adjustAspectRatio")],t.prototype,"writeAdjustAspectRatio",null),r.__decorate([o.property({json:{write:!0}}),o.aliasOf("layer.bandIds")],t.prototype,"bandIds",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"compression",void 0),r.__decorate([o.property({json:{write:!0}}),o.aliasOf("layer.compressionQuality")],t.prototype,"compressionQuality",void 0),r.__decorate([o.writer("compressionQuality")],t.prototype,"writeCompressionQuality",null),r.__decorate([o.property({json:{write:!0}}),o.aliasOf("layer.compressionTolerance")],t.prototype,"compressionTolerance",void 0),r.__decorate([o.writer("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),r.__decorate([o.property({json:{write:!0}}),o.aliasOf("layer.format")],t.prototype,"format",void 0),r.__decorate([o.property({type:String,json:{read:{reader:l.read},write:{writer:l.write}}}),o.aliasOf("layer.interpolation")],t.prototype,"interpolation",void 0),r.__decorate([o.property({json:{write:!0}}),o.aliasOf("layer.noData")],t.prototype,"noData",void 0),r.__decorate([o.property({type:String,json:{read:{reader:u.read},write:{writer:u.write}}}),o.aliasOf("layer.noDataInterpretation")],t.prototype,"noDataInterpretation",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"pixelType",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"lercVersion",void 0),r.__decorate([o.writer("lercVersion")],t.prototype,"writeLercVersion",null),r.__decorate([o.property({type:Number,dependsOn:["layer.adjustAspectRatio","layer.bandIds","layer.format","layer.compressionQuality","layer.compressionTolerance","layer.definitionExpression","layer.interpolation","layer.noData","layer.noDataInterpretation","layer.mosaicRule","layer.renderingRule","layer.pixelFilter","layer.renderer","lercVersion","pixelType"]})],t.prototype,"version",null),r.__decorate([o.property({dependsOn:["layer.mosaicRule","layer.definitionExpression"],json:{write:!0}})],t.prototype,"mosaicRule",null),r.__decorate([o.property({dependsOn:["layer.renderingRule","layer.renderer","layer.rasterInfo","layer.format"],json:{write:!0}})],t.prototype,"renderingRule",null),r.__decorate([o.subclass("esri.layers.mixins.ExportImageServiceParameters")],t)}(i.JSONSupport);t.ExportImageServiceParameters=p}.apply(null,n))||(e.exports=i)},693:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(165),r(152),r(151),r(234),r(327),r(694)],void 0===(i=function(e,t,r,n,i,o,a,s,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.execute=function(e,t){var o=this,s=e.geometry?[e.geometry]:[];return a.normalizeCentralMeridian(s).then((function(a){var s=e.toJSON(),l=a&&a[0];i.isSome(l)&&(s.geometry=JSON.stringify(l.toJSON()));var u=o._encode(r.__assign(r.__assign({f:"json"},o.parsedUrl.query),s)),p=r.__assign(r.__assign({query:u},o.requestOptions),t);return n(o.parsedUrl.path+"/identify",p)})).then((function(e){return l.fromJSON(e.data)}))},r.__decorate([o.subclass("esri.tasks.ImageServiceIdentifyTask")],t)}(s)}.apply(null,n))||(e.exports=i)},694:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(155),r(151),r(202),r(187)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.catalogItemVisibilities=null,t.catalogItems=null,t.location=null,t.name=null,t.objectId=null,t.processedValues=null,t.properties=null,t.value=null,t}return r.__extends(t,e),r.__decorate([i.property({json:{write:!0}})],t.prototype,"catalogItemVisibilities",void 0),r.__decorate([i.property({type:a,json:{write:!0}})],t.prototype,"catalogItems",void 0),r.__decorate([i.property({type:o,json:{write:!0}})],t.prototype,"location",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,"objectId",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,"processedValues",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,"properties",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,"value",void 0),r.__decorate([i.subclass("esri.tasks.support.ImageServiceIdentifyResult")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},696:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(282),r(155),r(151),r(202),r(163),r(400),r(313)],void 0===(i=function(e,t,r,n,i,o,a,s,l,u){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geometry=null,t.renderingRules=null,t.pixelSize=null,t.returnGeometry=!0,t.returnCatalogItems=!0,t.returnPixelValues=!0,t.maxItemCount=null,t.timeExtent=null,t.raster=void 0,t.viewId=void 0,t}return r.__extends(t,e),t.prototype.writeGeometry=function(e,t,r){null!=e&&(t.geometryType=s.getJsonType(e),t[r]=JSON.stringify(e.toJSON()))},Object.defineProperty(t.prototype,"mosaicRule",{set:function(e){var t=e;t&&t.mosaicMethod&&(t=l.fromJSON(r.__assign(r.__assign({},t.toJSON()),{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)},enumerable:!0,configurable:!0}),t.prototype.writeMosaicRule=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},Object.defineProperty(t.prototype,"renderingRule",{set:function(e){var t=e;t&&t.rasterFunction&&(t=u.fromJSON(r.__assign(r.__assign({},t.toJSON()),{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)},enumerable:!0,configurable:!0}),t.prototype.writeRenderingRule=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},t.prototype.writeRenderingRules=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.map((function(e){return e.toJSON()}))))},t.prototype.writePixelSize=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},t.prototype.writeTimeExtent=function(e,t,r){if(null!=e){var n=e.start?e.start.getTime():null,i=e.end?e.end.getTime():null;t[r]=null!=n?null!=i?n+","+i:""+n:null}},r.__decorate([o.property({json:{write:!0}})],t.prototype,"geometry",void 0),r.__decorate([o.writer("geometry")],t.prototype,"writeGeometry",null),r.__decorate([o.property({type:l,json:{write:!0}})],t.prototype,"mosaicRule",null),r.__decorate([o.writer("mosaicRule")],t.prototype,"writeMosaicRule",null),r.__decorate([o.property({type:u,json:{write:!0}})],t.prototype,"renderingRule",null),r.__decorate([o.writer("renderingRule")],t.prototype,"writeRenderingRule",null),r.__decorate([o.property({type:[u],json:{write:!0}})],t.prototype,"renderingRules",void 0),r.__decorate([o.writer("renderingRules")],t.prototype,"writeRenderingRules",null),r.__decorate([o.property({type:a,json:{write:!0}})],t.prototype,"pixelSize",void 0),r.__decorate([o.writer("pixelSize")],t.prototype,"writePixelSize",null),r.__decorate([o.property({type:Boolean,json:{write:!0}})],t.prototype,"returnGeometry",void 0),r.__decorate([o.property({type:Boolean,json:{write:!0}})],t.prototype,"returnCatalogItems",void 0),r.__decorate([o.property({type:Boolean,json:{write:!0}})],t.prototype,"returnPixelValues",void 0),r.__decorate([o.property({type:Number,json:{write:!0}})],t.prototype,"maxItemCount",void 0),r.__decorate([o.property({type:n,json:{write:{target:"time"}}})],t.prototype,"timeExtent",void 0),r.__decorate([o.writer("timeExtent")],t.prototype,"writeTimeExtent",null),r.__decorate([o.property({json:{write:!0}})],t.prototype,"raster",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"viewId",void 0),r.__decorate([o.subclass("esri.tasks.support.ImageServiceIdentifyParameters")],t)}(i.JSONSupport)}.apply(null,n))||(e.exports=i)}}]);
//# sourceMappingURL=48.js.map