(function(){var e={"esri/tasks/support/FeatureSet":187,"esri/widgets/LayerList/support/layerListUtils":294,"esri/widgets/LayerList/ListItem":347,"esri/widgets/LayerList":455,"esri/widgets/LayerList/LayerListViewModel":457,"esri/support/actions/ActionSlider":458,"esri/widgets/LayerList/ListItemPanel":459,"esri/layers/GroupLayer":506},t=this||window,i=t.webpackJsonp=t.webpackJsonp||[];i.registerAbsMids?i.registerAbsMids(e):(i.absMidsWaiting=i.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[59,30,32,100,188],{181:function(e,t,i){"use strict";i.r(t);var r=i(10),n=i.n(r)()(!0);n.push([e.i,".esri-scroll-zoom-toggle{padding:0.7em 1.5em}.esri-scroll-zoom-toggle--inner-wrapper{display:flex;flex-direction:row;align-items:center;cursor:pointer}.esri-scroll-zoom-toggle--input-checkbox{margin-left:1em;margin-bottom:6px;cursor:pointer}\n","",{version:3,sources:["webpack://src/components/mapcomponents/ScrollZoom.scss"],names:[],mappings:"AAAA,yBACC,mBAAoB,CACpB,wCAGA,YAAa,CACb,kBAAmB,CACnB,kBAAmB,CACnB,cAAe,CACf,yCAGA,eAAgB,CAChB,iBAAkB,CAClB,cAAe",sourcesContent:[".esri-scroll-zoom-toggle {\n\tpadding: 0.7em 1.5em;\n}\n\n.esri-scroll-zoom-toggle--inner-wrapper {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n.esri-scroll-zoom-toggle--input-checkbox {\n\tmargin-left: 1em;\n\tmargin-bottom: 6px;\n\tcursor: pointer;\n}\n"],sourceRoot:""}]),t.default=n},187:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(159),i(174),i(166),i(155),i(152),i(151),i(170),i(163),i(194)],void 0===(n=function(e,t,i,r,n,o,a,s,l,c,d,p){var u=new o.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),y=function(e){function t(t){var i=e.call(this,t)||this;return i.displayFieldName=null,i.exceededTransferLimit=!1,i.features=[],i.fields=null,i.geometryType=null,i.hasM=!1,i.hasZ=!1,i.queryGeometry=null,i.spatialReference=null,i}return i.__extends(t,e),t.prototype.readFeatures=function(e,t){for(var i=c.fromJSON(t.spatialReference),r=[],o=0;o<e.length;o++){var a=e[o],l=n.fromJSON(a),d=a.geometry&&a.geometry.spatialReference;s.isSome(l.geometry)&&!d&&(l.geometry.spatialReference=i),r.push(l)}return r},t.prototype.writeGeometryType=function(e,t,i,r){if(e)u.write(e,t,i,r);else{var n=this.features;if(n)for(var o=0,a=n;o<a.length;o++){var l=a[o];if(l&&s.isSome(l.geometry))return void u.write(l.geometry.type,t,i,r)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var i=this.features;if(i)for(var r=0,n=i;r<n.length;r++){var o=n[r];o&&s.isSome(o.geometry)&&o.geometry.spatialReference&&(t.spatialReference=o.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var i=0;i<t.features.length;i++){var r=t.features[i];if(r.geometry){var n=e&&e[i];r.geometry=n&&n.toJSON()||r.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,i=t[0],r=t[1],n=e.translate,o=n[0],a=n[1],l=this.features,c=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/i)}),(function(e){return Math.round((a-e)/r)})),d=0,p=l.length;d<p;d++)c(s.unwrap(l[d].geometry))||(l.splice(d,1),d--,p--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this.geometryType,t=this.features,i=this.transform;if(!i)return this;for(var r=i.translate,n=r[0],o=r[1],a=i.scale,l=a[0],c=a[1],d=this._getHydrationFunction(e,(function(e){return e*l+n}),(function(e){return o-e*c})),p=0,u=t;p<u.length;p++){var y=u[p].geometry;s.isSome(y)&&d(y)}return this},t.prototype._quantizePoints=function(e,t,i){for(var r,n,o=[],a=0,s=e.length;a<s;a++){var l=e[a];if(a>0){var c=t(l[0]),d=i(l[1]);c===r&&d===n||(o.push([c-r,d-n]),r=c,n=d)}else r=t(l[0]),n=i(l[1]),o.push([r,n])}return o.length>0?o:null},t.prototype._getQuantizationFunction=function(e,t,i){var r=this;return"point"===e?function(e){return e.x=t(e.x),e.y=i(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=d.isPolygon(e)?e.rings:e.paths,o=[],a=0,s=n.length;a<s;a++){var l=n[a],c=r._quantizePoints(l,t,i);c&&o.push(c)}return o.length>0?(d.isPolygon(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var n;return(n=r._quantizePoints(e.points,t,i)).length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,i){return"point"===e?function(e){e.x=t(e.x),e.y=i(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var r,n,o=d.isPolygon(e)?e.rings:e.paths,a=0,s=o.length;a<s;a++)for(var l=o[a],c=0,p=l.length;c<p;c++){var u=l[c];c>0?(r+=u[0],n+=u[1]):(r=u[0],n=u[1]),u[0]=t(r),u[1]=i(n)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=i(e.ymin),e.xmax=t(e.xmax),e.ymax=i(e.ymax)}:"multipoint"===e?function(e){for(var r,n,o=e.points,a=0,s=o.length;a<s;a++){var l=o[a];a>0?(r+=l[0],n+=l[1]):(r=l[0],n=l[1]),l[0]=t(r),l[1]=i(n)}}:void 0},i.__decorate([l.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),i.__decorate([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),i.__decorate([l.property({type:[n],json:{write:!0}})],t.prototype,"features",void 0),i.__decorate([l.reader("features")],t.prototype,"readFeatures",null),i.__decorate([l.property({type:[p],json:{write:!0}})],t.prototype,"fields",void 0),i.__decorate([l.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:u.read}}})],t.prototype,"geometryType",void 0),i.__decorate([l.writer("geometryType")],t.prototype,"writeGeometryType",null),i.__decorate([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),i.__decorate([l.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),i.__decorate([l.property({types:r.geometryTypes,json:{read:d.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),i.__decorate([l.property({type:c,json:{write:!0}})],t.prototype,"spatialReference",void 0),i.__decorate([l.writer("spatialReference")],t.prototype,"writeSpatialReference",null),i.__decorate([l.property({json:{write:!0}})],t.prototype,"transform",void 0),i.__decorate([l.subclass("esri.tasks.support.FeatureSet")],t)}(a.JSONSupport);return y.prototype.toJSON.isDefaultToJSON=!0,y||(y={}),y}.apply(null,r))||(e.exports=n)},212:function(e,t,i){var r=i(99),n=i(181);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},a=r(n,o);if(!n.locals||e.hot.invalidate){var s=n.locals;e.hot.accept(181,(function(){"string"==typeof(n=(n=i(181)).__esModule?n.default:n)&&(n=[[e.i,n,""]]),function(e,t,i){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!i||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(i&&"default"===r||e[r]))return!1;return!0}(s,n.locals)?(s=n.locals,a(n)):e.hot.invalidate()}))}e.hot.dispose((function(){a()})),e.exports=n.locals||{}},213:function(e,t,i){"use strict";var r=i(2),n=i.n(r),o=i(3),a=i(108),s=i.n(a),l=i(6),c=i(5),d=i(284),p=i.n(d),u=i(275),y=i.n(u),h=i(266),f=i.n(h),v=i(287),m=i.n(v),g=i(278),_=i.n(g),b=i(157),w=i(188),I=i.n(w),x=i(151),L=i(183);i(212);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S,O,A,M=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),E=function(e,t,i,r){var n,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"===("undefined"==typeof Reflect?"undefined":C(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,i,a):n(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},k="esri-widget esri-scroll-zoom-toggle",P="esri-scroll-zoom-toggle--inner-wrapper",T="esri-scroll-zoom-toggle--input-checkbox",N=function(e){function t(t){var i=e.call(this,t)||this;return i.enabled=!1,i._toggleZoomOnScroll=function(){i.enabled=!i.enabled,i.enabled?(i.view.navigation.mouseWheelZoomEnabled=!0,i.view.navigation.browserTouchPanEnabled=!0):(i.view.navigation.mouseWheelZoomEnabled=!1,i.view.navigation.browserTouchPanEnabled=!1),console.log(i)},i}return M(t,e),t.prototype.render=function(){return Object(L.tsx)("div",{class:k},Object(L.tsx)("div",{class:P,onclick:this._toggleZoomOnScroll},Object(L.tsx)("div",null,"Enable Scroll Zoom"),Object(L.tsx)("input",{type:"checkbox",class:T,checked:this.enabled})))},E([Object(x.property)(),Object(L.renderable)()],t.prototype,"enabled",void 0),t=E([Object(x.subclass)("esri.widgets.ScrollZoom")],t)}(I.a),j=function(){return(j=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},V=function(e){var t=e.metadata,i=e.sources,o=e.customFeatures,a=e.customFeaturesPerPage,s=e.customMapDOM,l=e.pageRefs,d=e.currentPage,u=e.mapState,h=u.basemap,v=u.layers,g=u.position,w=u.customBehavior,I=Object(r.useRef)(null),x=Object(r.useState)(null),L=x[0],C=x[1],S=Object(r.useState)(!0),O=S[0],A=S[1],M=Object(r.useState)(null),E=M[0],k=M[1];return Object(r.useEffect)((function(){var e=new y.a({basemap:h||null,layers:v}),r=j(j({container:I.current,map:e},g),{navigation:{mouseWheelZoomEnabled:!1,browserTouchPanEnabled:!1}}),a=t.sceneview?new m.a(r):new f.a(r);(a.on("click",(function(e){console.log("view",a),console.log("extent",a.extent),console.log("mappoint",e.mapPoint)})),C({map:e,view:a}),t.fullWidthMap&&!t.sceneview)&&(document.querySelector("#"+t.name+" .esri-ui-top-left").style.left="calc(30% - 10px)");if(t.fullWidthMap&&t.sceneview){var s=document.querySelector("#"+t.name+' div[class^="SideCar"]');s.style.left="40px",s.style.width="500px",s.style.transition="all 0.5s";var l=new _.a({view:a,expandIconClass:"esri-icon-question",expandTooltip:"Information",expanded:!0});a.ui.add([{component:l,position:"top-left",index:0}]),l.container.addEventListener("click",(function(){l.expanded?(s.style.left="40px",s.style.opacity="1",s.style.pointerEvents="auto",s.style.transition="all 0.5s"):(s.style.left="35px",s.style.opacity="0",s.style.pointerEvents="none",s.style.transition="none")}));var d=new N({view:a});a.ui.add(d,"top-right")}document.createElement("div").innerHTML="Data sources here";var u=new _.a({view:a,expandIconClass:"clipboard-icon",expandTooltip:"Data Sources",collapseTooltip:"Close",content:p.a.renderToStaticMarkup(n.a.createElement(c.a,{sources:i,theme:t.theme}))});a.ui.add(u,"bottom-right"),t.disableSpinnerAfterInitialLoad?b.whenTrueOnce(a,"updating",(function(){A(!0)})):b.whenTrue(a,"updating",(function(){A(!0)})),b.whenFalse(a,"updating",(function(){A(!1)})),o&&o({map:e,view:a,layers:v})}),[]),Object(r.useEffect)((function(){L&&(L.map.layers=v)}),[v]),Object(r.useEffect)((function(){L&&(L.map.basemap=h)}),[h,L]),Object(r.useEffect)((function(){L&&g&&L.view.goTo({target:g.center,zoom:g.zoom},{duration:1e3})}),[g]),Object(r.useEffect)((function(){if(L)if(w){var e=L.map,t=L.view;E&&E();var i=w({map:e,view:t});k((function(){return i}))}else E&&E()}),[w,L]),Object(r.useEffect)((function(){if(L&&a){var e=L.view,t=L.map,i=a({map:t,view:e,layers:v,pageRefs:l,currentPage:d});if(i)return i}}),[L,d,a]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"arcgis-map "+t.name,ref:I}),s&&L&&s(L),O&&n.a.createElement(c.c,null))},R=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},F=o.b.section.withConfig({displayName:"ChapterTemplate__Wrapper",componentId:"sc-1cxnsi8-0"})(O||(O=R(["\n\twidth: 100%;\n\theight: ",";\n\tmin-height: 500px;\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: ",";\n\t/* scroll-snap-stop: always;\n\tscroll-snap-align: start; */\n"],["\n\twidth: 100%;\n\theight: ",";\n\tmin-height: 500px;\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: row;\n\tbackground-color: ",";\n\t/* scroll-snap-stop: always;\n\tscroll-snap-align: start; */\n"])),(function(e){return e.height||100*e.screensTall+"vh"||"auto"}),(function(e){return"light"===e.maptheme?"":"#242424"})),W=o.b.div.withConfig({displayName:"ChapterTemplate__Trigger",componentId:"sc-1cxnsi8-1"})(A||(A=R(["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 3px;\n\twidth: 3px;\n\tpointer-events: none;\n"],["\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\theight: 3px;\n\twidth: 3px;\n\tpointer-events: none;\n"])));t.a=function(e){e.customMap;var t=e.data,i=t.metadata,o=t.sources,a=t.customFeatures,d=t.customFeaturesPerPage,p=t.customMapDOM,u=t.customChapterDOM,y=t.pages,h=Object(r.useState)(0),f=h[0],v=h[1],m=Object(r.useContext)(l.a).dispatch,g={};return Object(r.useMemo)((function(){return n.a.createElement(F,{maptheme:i.theme,id:i.name,screensTall:y.length>1?y.length:1},n.a.createElement(c.i,{floating:i.fullWidthMap},y.map((function(e,t){return n.a.createElement(c.d,{floating:i.fullWidthMap,ref:function(e){return g[t]=e},key:i.name+"-page-"+t},n.a.createElement(c.e,{theme:i.theme,floating:i.fullWidthMap},n.a.createElement(c.g,null,e.title),n.a.createElement(c.f,{floating:i.fullWidthMap},e.content)),n.a.createElement(s.a,{onChange:function(e){e&&(m({type:"SET_NAV",payload:i.name}),v(t))}},(function(e){e.isVisible;return n.a.createElement(W,null)})))}))),n.a.createElement(s.a,{partialVisibility:!0},(function(e){var t=e.isVisible;return n.a.createElement(c.b,{fullWidth:i.fullWidthMap,className:"arcgis-map-"+i.theme},t&&n.a.createElement(V,{mapState:y[f].mapState,customFeatures:a,customFeaturesPerPage:d,customMapDOM:p,metadata:i,sources:o,pageRefs:g,currentPage:f}))})),u&&u)}),[f])}},2301:function(e,t,i){"use strict";i.r(t);var r=i(2),n=i.n(r),o=i(5),a=i(222),s=i.n(a),l=i(325),c=i.n(l),d=i(891),p=i.n(d),u=i(506),y=i.n(u),h=new c.a({url:"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer",listMode:"hide"}),f=new s.a({name:"Borders and Labels",url:"https://services6.arcgis.com/swIsfiMN39u9wKrT/ArcGIS/rest/services/Italy_COVID19_WFL1/FeatureServer/0",outFields:["*"],renderer:{type:"simple",symbol:{type:"simple-fill",outline:{color:[0,0,0,.3],width:"0.25px"},color:[0,0,0,0],label:"Province"}},popupTemplate:{title:"{NAME_1}",content:'\n          <div class="covid-popup">\n             <div class="case-group">\n            <p>Total Cases: <b>{Total_Cases}</b></p>\n            <p>Confirmed Deaths: <b>{Confirmed_Deaths}</b></p>\n            <p>Cases as % of Population: <b>{Infections_Population}</b></p>\n             </div>\n          </div>',fieldInfos:[{fieldName:"Confirmed_Deaths",format:{digitSeparator:!0,places:0}},{fieldName:"Total_Cases ",format:{digitSeparator:!0,places:0}}]},listMode:"hide"}),v=new s.a({name:"Total Population",url:"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/COVID19_MAP_of_Italy_WFL1/FeatureServer/3",outFields:["*"],renderer:new p.a({referenceDotValue:1e3,outline:null,legendOptions:{unit:"people"},attributes:[{field:"TotR",color:"lightgrey",label:"Total Population"}]}),visible:!1}),m=new s.a({name:"Cases as % of Total Population",url:"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/COVID19_MAP_of_Italy_WFL1/FeatureServer/3",outFields:["*"],renderer:new p.a({referenceDotValue:null,outline:null,legendOptions:{unit:"% of popuplation * 100"},attributes:[{valueExpression:" $feature.TotC / $feature.TotR * 10000",color:"orange",label:"Cases as % of Population"}]}),visible:!1}),g=new s.a({name:"Total Cases",url:"https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/COVID19_MAP_of_Italy_WFL1/FeatureServer/3",outFields:["*"],renderer:new p.a({referenceDotValue:10,outline:null,legendOptions:{unit:"people"},attributes:[{valueExpression:"$feature.TotC",color:"red",label:"Total Cases"}]})}),_=new y.a({title:"Covid in Italy",visible:!0,visibilityMode:"exclusive",layers:[v,m,g]}),b=i(455),w=i.n(b),I=i(300),x=i.n(I),L={metadata:{name:"covid_italy",theme:"dark",fullWidthMap:!1},sources:[{name:"COVID Map of Italy",url:"https://www.arcgis.com/home/item.html?id=9aae48881351444a8d25d65a667b8f20"},{name:"Jons Hopkins COVID Dashboard",url:"https://coronavirus.jhu.edu/map.html"}],customFeatures:function(e){var t=e.view,i=new w.a({view:t,statusIndicatorsVisible:!1,listItemCreatedFunction:function(e){(e.item.title="Covid in Italy")&&(e.item.open=!0),e.item.title=e.item.layer.name}});t.ui.add(i,"top-right");var r=new x.a({view:t,layerInfos:[{layer:g,title:"Total Cases"},{layer:m,title:"Cases as % of Population"},{layer:v,title:"Total Population"}]});t.ui.add(r,"top-right")},pages:[{title:"COVID in Italy",content:n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"Italy was the"," ",n.a.createElement(o.h,{theme:"dark",link:"https://www.unionleader.com/news/health/coronavirus-cases-surge-outside-china-italy-is-hardest-hit-in-europe/article_85f9684c-e80c-5923-9994-b4761d470c37.html",linkTitle:'"Coronavirus cases surge outside China; Italy is hardest-hit in Europe", Crossley, G., New Hampshire Union Leader, February 24, 2020, Retrieved November 16, 2020'},"first western country")," ","to come down with a serious case of Coronavirus. Before Italy, most of the world outside of China did not yet consider COVID19 a serious threat. We watched as Italy's"," ",n.a.createElement(o.h,{theme:"dark",link:"https://www.advisory.com/daily-briefing/2020/03/19/italian-hospitals",linkTitle:'"How coronavirus overwhelmed one of Italy\'s premier hospitals", advisory.com, March 19, 2020, Retrieved November 17, 2020'},"hospitals became overwhelmed")," ","with patients in March. New York City quickly"," ",n.a.createElement(o.h,{theme:"dark",link:"https://www.newscientist.com/article/2239247-new-york-citys-coronavirus-outbreak-is-already-overwhelming-hospitals/",linkTitle:'"New York City’s coronavirus outbreak is already overwhelming hospitals", Arnold C., NewScientist, March 31, 2020, Retrieved November 17, 2020'},"followed"),", along with the rest of the world. Although it originated in China, it was Italy that led the rest of the world in the plunge into the COVID pandemic."),n.a.createElement("p",null,n.a.createElement("em",{className:"action"},"Click the map")," for regional Coronavirus details.")),mapState:{position:{center:[15,42],zoom:6},layers:[h,f,_]}}]},C=i(213);t.default=function(){return n.a.createElement(C.a,{data:L})}},294:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function i(e){if(e)return null!=e.listMode?e.listMode:void 0}function r(e){if(e)return null!=e.minScale?e.minScale:void 0}function n(e){if(e)return null!=e.maxScale?e.maxScale:void 0}function o(e){if(e&&"hide-children"!==e.listMode&&"wmts"!==e.type)return"group"===e.type?"layers":"sublayers"}function a(e,t){e&&e.sort((function(e,i){var r=t.indexOf(e.uid),n=t.indexOf(i.uid);return r>n?-1:r<n?1:0}))}t.findLayerListMode=i,t.findLayerMinScale=r,t.findLayerMaxScale=n,t.findLayerVisibilityMode=function(e){if(!e)return"inherited";var t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";var i=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof i?i?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"},t.getNormalizedChildLayerProperty=o,t.canSortSublayers=function(e){var t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;var i=t.get("capabilities.exportMap.supportsSublayersChanges");return"boolean"!=typeof i||i},t.canDisplayLayer=function(e){return"hide"!==i(e)},t.isLayerOutsideScaleRange=function(e,t){if(!e||isNaN(t))return!1;var i=r(e),o=n(e),a=!isNaN(i)&&i>0&&t>=i,s=!isNaN(o)&&o>0&&t<=o;return a||s},t.sortLayersToIds=a,t.sortChildLayersToIds=function(e,t){var i=null==e?void 0:e.layer;if(i){var r=o(i);r&&a(i.get(r),t)}},t.getItemLayers=function(e){var t=null==e?void 0:e.layer;return t&&"group"===t.type?t.layers:null},t.findSelectedItem=function(e,t){var i,r=null===(i=e.layer)||void 0===i?void 0:i.uid;return r&&t.find((function(e){var t;return(null===(t=e.layer)||void 0===t?void 0:t.uid)===r}))}}.apply(null,r))||(e.exports=n)},347:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(158),i(169),i(236),i(292),i(157),i(151),i(438),i(337),i(480),i(458),i(520),i(459),i(294)],void 0===(n=function(e,t,i,r,n,o,a,s,l,c,d,p,u,y,h,f){var v=n.ofType({key:"type",defaultKeyValue:"button",base:d,typeMap:{button:p,toggle:y,slider:u}}),m=n.ofType(v);return function(e){function t(t){var i=e.call(this,t)||this;return i.actionsSections=new m,i.actionsOpen=!1,i.children=new(n.ofType(r)),i.childrenSortable=!0,i.error=null,i.layer=null,i.layerView=null,i.open=!1,i.panel=null,i.parent=null,i.sortable=!0,i.view=null,i.visible=null,i}var r;return i.__extends(t,e),r=t,t.prototype.initialize=function(){var e=this;this.handles.add([s.init(this,"layer",(function(t){return e._watchLayerProperties(t)})),s.init(this,"view",(function(t){return e._updateChildren(t)})),s.init(this,"panel",(function(t){return e._setListItemOnPanel(t)})),s.init(this,["layer","view"],(function(){return e._getLayerView()}))])},t.prototype.destroy=function(){this.view=null},t.prototype.castPanel=function(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new h(e):null},Object.defineProperty(t.prototype,"title",{get:function(){var e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){var e=this.layerView;return e?e.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleAtCurrentScale",{get:function(){return!f.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibilityMode",{get:function(){return f.findLayerVisibilityMode(this.layer)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new r({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})},t.prototype._setListItemOnPanel=function(e){e&&(e.listItem=this)},t.prototype._updateChildren=function(e){var t=this.children;t&&t.forEach((function(t){return t.view=e}))},t.prototype._addChildren=function(e){var t=this;if(this.handles.remove("child-list-mode"),this.children.removeAll(),e){e.forEach((function(i){t.handles.add(s.watch(i,"listMode",(function(){return t._addChildren(e)})),"child-list-mode")}));var i=[];e.filter((function(e){return"hide"!==f.findLayerListMode(e)})).forEach((function(e){if(f.canDisplayLayer(e)){var n=new r({layer:e,parent:t,view:t.view});i.unshift(n)}})),this.children.addMany(i)}},t.prototype._watchSublayerChanges=function(e){var t=this;e&&this.handles.add(e.on("change",(function(){t._addChildren(e)})),"layer")},t.prototype._initializeChildLayers=function(e){this._addChildren(e),this._watchSublayerChanges(e)},t.prototype._watchLayerProperties=function(e){var t=this;if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),e))if(this.handles.add(s.watch(e,"listMode",(function(){return t._watchLayerProperties(e)})),"layer"),"hide-children"!==f.findLayerListMode(e)){var i=f.getNormalizedChildLayerProperty(e);i&&this.handles.add(s.init(e,i,(function(){e.hasOwnProperty(i)&&t._initializeChildLayers(e[i])})),"layer")}else this.children.removeAll()},t.prototype._getLayerView=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,r,n;return i.__generator(this,(function(i){switch(i.label){case 0:if(t=(e=this).layer,r=e.view,!t||!r)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.whenLayerView(t)];case 2:return(n=i.sent()).layer!==this.layer?[2]:(this._set("layerView",n),[3,4]);case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},t.prototype._isLayerUpdating=function(e){return!(e instanceof c)&&e&&"loading"===e.loadStatus},i.__decorate([l.property({type:m})],t.prototype,"actionsSections",void 0),i.__decorate([l.property()],t.prototype,"actionsOpen",void 0),i.__decorate([l.property({type:n})],t.prototype,"children",void 0),i.__decorate([l.property()],t.prototype,"childrenSortable",void 0),i.__decorate([l.aliasOf("layer.loadError?")],t.prototype,"error",void 0),i.__decorate([l.property()],t.prototype,"layer",void 0),i.__decorate([l.property({readOnly:!0})],t.prototype,"layerView",void 0),i.__decorate([l.property()],t.prototype,"open",void 0),i.__decorate([l.property({type:h})],t.prototype,"panel",void 0),i.__decorate([l.cast("panel")],t.prototype,"castPanel",null),i.__decorate([l.property()],t.prototype,"parent",void 0),i.__decorate([l.property()],t.prototype,"sortable",void 0),i.__decorate([l.property({dependsOn:["layer.layer?.loaded","layer.title"]})],t.prototype,"title",null),i.__decorate([l.property({dependsOn:["layer.loadStatus?","layerView.updating"],readOnly:!0})],t.prototype,"updating",null),i.__decorate([l.property({value:null})],t.prototype,"view",void 0),i.__decorate([l.aliasOf("layer.visible")],t.prototype,"visible",void 0),i.__decorate([l.property({dependsOn:["layer.minScale?","layer.maxScale?","view.scale"],readOnly:!0})],t.prototype,"visibleAtCurrentScale",null),i.__decorate([l.property({dependsOn:["layer.visibilityMode?","layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],readOnly:!0})],t.prototype,"visibilityMode",null),r=i.__decorate([l.subclass("esri.widgets.LayerList.ListItem")],t)}(a.IdentifiableMixin(o.HandleOwnerMixin(r)))}.apply(null,r))||(e.exports=n)},455:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(169),i(335),i(270),i(167),i(164),i(156),i(157),i(151),i(456),i(188),i(457),i(347),i(294),i(183)],void 0===(n=function(e,t,i,r,n,o,a,s,l,c,d,p,u,y,h,f,v){function m(e,t,i){e.splice(i,0,e.splice(t,1)[0])}var g=r.ofType(h),_="esri-layer-list__list",b="esri-layer-list__list--independent",w="esri-layer-list__item",I="esri-layer-list__item-actions-menu-item",x="esri-layer-list__item-actions-menu-item--active",L="esri-layer-list__item-action-image",C="esri-layer-list__item-label",S="esri-layer-list__item-toggle",O="esri-icon-default-action",A="exclusive",M="inherited",E=l.getLogger("esri.widgets.LayerList"),k={statusIndicators:!0};return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._handles=new a,n._sortableNodes=new Map,n._sortableMap=new Map,n._focusSortUid=null,n._newUI=s("esri-layerlist-new-ui"),n.visibleItems=null,n.iconClass="esri-icon-layers",n.label=void 0,n.listItemCreatedFunction=null,n.messages=null,n.messagesCommon=null,n.multipleSelectionEnabled=!1,n.operationalItems=null,n.selectionEnabled=!1,n.selectedItems=new g,n.view=null,n.viewModel=new y,n.visibleElements=i.__assign({},k),n._onSortableSort=function(e){var t=e.to,i=e.from,r=e.item,o=e.newIndex;i&&t&&(i===t?n._sortLayers(n._sortableMap.get(i.dataset.group)):n._moveLayerFromChildList({to:t,from:i,item:r,newIndex:o}))},n._sortableCanPut=function(e,t,i){var r,n,o=e.el.dataset.group,a=t.el.dataset.group,s=e.el["data-item"],l=i["data-item"],c=null===(r=null==l?void 0:l.layer)||void 0===r?void 0:r.type,d=null===(n=null==s?void 0:s.layer)||void 0===n?void 0:n.type;return o&&a&&c&&!("group"===d&&"group"===c)},n._sortableCanPull=function(e,t,i){var r,n=e.el.dataset.group,o=t.el.dataset.group,a=i["data-item"],s=null===(r=null==a?void 0:a.layer)||void 0===r?void 0:r.type;return n&&o&&!!s},n._onSortableEnd=function(e){var t=e.oldIndex,i=e.from,r=e.to,n=e.item;i!==r&&i.insertBefore(n,i.children[t])},n}return i.__extends(t,e),t.prototype.initialize=function(){var e=this,t=this.operationalItems;this._setVisibleItems(t),this.own(c.on(this,"operationalItems","change",(function(){return e._itemsChanged(t)})),c.init(this,"selectionEnabled",(function(){return e._toggleAllSorting()})))},t.prototype.destroy=function(){this._destroySortables(),this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"statusIndicatorsVisible",{set:function(e){n.deprecatedProperty(E,"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"}),this.visibleElements=i.__assign(i.__assign({},this.visibleElements),{statusIndicators:e})},enumerable:!0,configurable:!0}),t.prototype.castVisibleElements=function(e){return i.__assign(i.__assign({},k),e)},t.prototype.triggerAction=function(e,t){this.viewModel.triggerAction(e,t)},t.prototype.render=function(){var e,t,i=this.visibleItems,r=this._newUI,n=null===(t=this.viewModel)||void 0===t?void 0:t.state,o=((e={})["esri-layer-list--new-ui"]=r,e["esri-hidden"]="loading"===n,e["esri-disabled"]="disabled"===n,e);return v.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",o)},(null==i?void 0:i.length)?this.renderItems():this.renderNoItems())},t.prototype.renderNoItems=function(){return v.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)},t.prototype.renderItems=function(){var e=this,t=this.visibleItems,i=this.selectionEnabled,r=this.messages;return v.tsx("ul",{"aria-label":r.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes(_,"esri-layer-list__list--root",b)},null==t?void 0:t.map((function(t){return e.renderItem(t,null)})).toArray())},t.prototype.renderActionsMenuIcon=function(e,t){var i,r=this.messagesCommon,n=((i={})[x]=e.actionsOpen,i),o=e.actionsOpen?r.close:r.open;return v.tsx("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(I,n),tabindex:"0",role:"button","aria-controls":t,"aria-label":o,title:o},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))},t.prototype.renderActionsMenu=function(e,t,i,r){var n=e.panel,o=n&&n.visible?this.renderPanelButton(n):null,a=1===i&&this._getSingleActionButton(t),s=a?this.renderAction({item:e,action:a,singleAction:!0}):null,l=!a&&i?this.renderActionsMenuIcon(e,r):null;return l||o||a?v.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},o,s,l):null},t.prototype.renderChildList=function(e,t){var i,r,n=this,o=this.selectionEnabled,a=e.visibilityMode,s=e.children,l=!!e.error,c=!!s.length&&!l,d=!c&&o&&"group"===(null===(r=e.layer)||void 0===r?void 0:r.type),p=A,u=M,y=((i={})["esri-layer-list__list--exclusive"]=a===p,i["esri-layer-list__list--inherited"]=a===u,i[b]=a!==u&&a!==p,i);return c||d?v.tsx("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(_,y),"aria-expanded":e.open?"true":"false",role:o?"listbox":a===p?"radiogroup":"group",hidden:!e.open&&!d||null},null==s?void 0:s.map((function(t){return n.renderItem(t,e)})).toArray()):null},t.prototype.renderChildrenToggle=function(e,t){var i,r=this.messagesCommon,n=e.children,o=!!e.error,a=!!n.length&&!o,s=((i={})["esri-layer-list__child-toggle--open"]=e.open,i),l=e.open?r.collapse:r.expand;return a?v.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",s),tabindex:"0",role:"button","aria-controls":t,"aria-label":l,title:l},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null},t.prototype.renderError=function(e){return e.error?v.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},v.tsx("span",null,this.messages.layerError)):null},t.prototype.renderItemContent=function(e,t,i){var r=this.id+"_"+e.uid,n=r+"_actions",o=r+"__list",a=e.panel,s=this._filterActions(e.actionsSections),l=this._countActions(s);return[v.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(e,o),this.renderLabel(e,t,i),this.renderActionsMenu(e,s,l,n)),this.renderError(e),l?this.renderActionsSections(e,s,n):null,a&&a.open?a.render():null,this.renderChildList(e,o)]},t.prototype.renderItem=function(e,t){var r,n,o,a=this,s=a._newUI,l=a.id,c=a.selectionEnabled,d=a.selectedItems,p=a.visibleElements,u=e.children,y=l+"_"+e.uid+"__title",h=!!e.error,m=!!u.length&&!h,g=((r={})["esri-layer-list__item--has-children"]=m,r["esri-layer-list__item--error"]=!!h,r["esri-layer-list__item--updating"]=e.updating&&!t&&p.statusIndicators,r["esri-layer-list__item--invisible"]=s&&!e.visible,r["esri-layer-list__item--invisible-at-scale"]=!e.visibleAtCurrentScale,r["esri-layer-list__item--selectable"]=c,r);if(c){var _=((n={})["data-layer-uid"]=null===(o=e.layer)||void 0===o?void 0:o.uid,n["data-sort-filter"]=(!e.sortable).toString(),n);return v.tsx("li",i.__assign({key:"item-with-selection-"+e.uid,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(w,g),"aria-labelledby":y,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:"root",tabIndex:0,"aria-selected":f.findSelectedItem(e,d)?"true":"false",role:"option"},_),this.renderItemContent(e,t,y))}return v.tsx("li",{key:"item-no-selection-"+e.uid,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(w,g),"aria-labelledby":y},this.renderItemContent(e,t,y))},t.prototype.renderItemTitle=function(e,t){var i=this.messages,r=e.title||i.untitledLayer,n=e.visibleAtCurrentScale?r:r+" ("+i.layerInvisibleAtScale+")";return v.tsx("span",{key:"layer-title-container",id:t,title:n,"aria-label":n,class:"esri-layer-list__item-title"},r)},t.prototype.renderItemToggleIcon=function(e,t){var i,r=this._newUI,n=A,o=t&&t.visibilityMode,a=((i={})["esri-layer-list__item-toggle-icon"]=r,i["esri-layer-list__item-toggle-icon"]=r&&o!==n,i["esri-layer-list__item-radio-icon"]=r&&o===n,i["esri-icon-radio-checked"]=o===n&&e.visible,i["esri-icon-radio-unchecked"]=o===n&&!e.visible,i["esri-icon-visible"]=o!==n&&e.visible,i["esri-icon-non-visible"]=o!==n&&!e.visible,i);return v.tsx("span",{key:"item-toggle-icon",class:this.classes(a),"aria-hidden":"true"})},t.prototype.renderItemToggle=function(e,t,i){var r=this.selectionEnabled,n=t&&t.visibilityMode,o="exclusive"===n?"radio":"switch";return r?v.tsx("span",{key:"item-toggle-selection-enabled",class:S,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":n,tabIndex:0,"aria-checked":e.visible?"true":"false",role:o,"aria-labelledby":i},this.renderItemToggleIcon(e,t)):v.tsx("span",{key:"item-toggle",class:S},this.renderItemToggleIcon(e,t))},t.prototype.renderItemError=function(e){return e.error?v.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null},t.prototype.renderLabel=function(e,t,i){var r=this.selectionEnabled,n=this._newUI,o=null==t?void 0:t.visibilityMode,a="exclusive"===o?"radio":"switch",s=[this.renderItemToggle(e,t,i),this.renderItemTitle(e,i)];n&&s.reverse();var l=r?v.tsx("div",{key:"item-label-no-selection-"+e.uid,class:C},s):v.tsx("div",{key:"item-label-with-selection-"+e.uid,class:C,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":o,tabIndex:0,"aria-checked":e.visible?"true":"false",role:a,"aria-labelledby":i},s);return"inherited"===o||e.error?v.tsx("div",{key:"item-label-container-"+e.uid,class:C},this.renderItemError(e),this.renderItemTitle(e,i)):l},t.prototype.renderPanelButton=function(e){var t,i,r=e.className,n=e.open,o=e.title,a=e.image||r?r:O,s=this._getIconImageStyles(e),l=((t={})[x]=n,t),c=((i={})[L]=!!s["background-image"],i);return a&&(c[a]=!!a),v.tsx("div",{key:e,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(I,l),role:"button",tabindex:"0",title:o,"aria-label":o},v.tsx("span",{class:this.classes(c),styles:s}))},t.prototype.renderActionsSections=function(e,t,i){var r=this,n=t.toArray().map((function(t){return v.tsx("ul",{key:t,class:"esri-layer-list__item-actions-list"},r.renderActionSection(e,t))}));return v.tsx("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:i,class:"esri-layer-list__item-actions",hidden:!e.actionsOpen||null},n)},t.prototype.renderActionSection=function(e,t){var i=this;return(t&&t.toArray()).map((function(t){return i.renderAction({item:e,action:t})}))},t.prototype.renderActionIcon=function(e){var t,i=e.active,r=e.className,n=this._getIconImageStyles(e),o="button"!==e.type||e.image||r?r:O,a=((t={})[L]=!i&&!!n["background-image"],t["esri-icon-loading-indicator"]=i,t["esri-rotating"]=i,t);return o&&!i&&(a[o]=!0),v.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",a),styles:n})},t.prototype.renderActionTitle=function(e,t){return t?null:v.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},e)},t.prototype.renderAction=function(e){var t,i=e.item,r=e.action,n=e.singleAction,o=r.active,a=r.disabled,s=r.title,l=((t={})[I]=n&&"button"===r.type,t["esri-layer-list__item-action"]=o||!n&&"toggle"!==r.type,t["esri-layer-list__action-toggle"]=!o&&"toggle"===r.type,t["esri-layer-list__action-toggle--on"]=!o&&"toggle"===r.type&&r.value,t["esri-disabled-element"]=a,t),c=[this.renderActionIcon(r),this.renderActionTitle(s,n)];return n?v.tsx("div",{bind:this,"data-item":i,"data-action":r,role:"button",key:r,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",title:s,"aria-label":s},c):v.tsx("li",{bind:this,"data-item":i,"data-action":r,key:r,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",role:"button",title:s,"aria-label":s},c)},t.prototype._sortNodeRemoved=function(e){var t=this._sortableMap,i=e.dataset.group,r=t.get(i);r&&r.destroy(),t.delete(i)},t.prototype._destroySortables=function(){var e=this._sortableMap,t=this._sortableNodes;e.forEach((function(e){return e&&e.destroy()})),e.clear(),t.clear()},t.prototype._moveLayerFromChildList=function(e){var t=e.to,i=e.from,r=e.item,n=e.newIndex,o=r["data-item"],a=t["data-item"],s=i["data-item"];this.viewModel.moveListItem(o,s,a,n)},t.prototype._sortLayers=function(e){var t,i;if(e){var r=e.el["data-item"],n=e.toArray();r?f.sortChildLayersToIds(r,n):f.sortLayersToIds(null===(i=null===(t=this.view)||void 0===t?void 0:t.map)||void 0===i?void 0:i.layers,n)}},t.prototype._toggleSorting=function(e,t){var i=this._sortableMap,r=this.selectionEnabled,n=i.get(t),o=e["data-item"],a=("root"===t||o.childrenSortable&&f.canSortSublayers(o))&&r;if(n)n.option("disabled",!a);else if(a){var s=p.create(e,{dataIdAttr:"data-layer-uid",group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter="true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:"esri-layer-list--chosen"});i.set(t,s)}},t.prototype._toggleAllSorting=function(){var e=this;this._sortableNodes.forEach((function(t,i){return e._toggleSorting(t,i)}))},t.prototype._sortNodeCreated=function(e){var t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))},t.prototype._setVisibleItems=function(e){var t=this;this.visibleItems=null==e?void 0:e.filter((function(e){return t.errorsVisible||!e.error}))},t.prototype._getSingleActionButton=function(e){return e.reduce((function(e){return e})).filter((function(e){return e&&"button"===e.type})).getItemAt(0)},t.prototype._focusListItem=function(e){var t,i=this._focusSortUid;e&&i&&(null===(t=e["data-item"].layer)||void 0===t?void 0:t.uid)===i&&(e.focus(),this._focusSortUid=null)},t.prototype._watchActionSectionChanges=function(e,t){var i=this,r="action-section"+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),r),e.forEach((function(e){return i._renderOnActionChanges(e,t)}))},t.prototype._renderOnActionChanges=function(e,t){var i=this,r="actions"+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add([c.init(e,["className","image","id","title","visible"],(function(){return i.scheduleRender()}))],r):this._handles.add([c.init(e,["className","id","title","visible","value","displayValueEnabled","max","min","step"],(function(){return i.scheduleRender()}))],r):this._handles.add([c.init(e,["className","image","id","title","visible","value"],(function(){return i.scheduleRender()}))],r)},t.prototype._renderOnItemChanges=function(e){var t=this,i=e.uid,r="items"+i;this._handles.add([c.init(e,["actionsOpen","visible","open","updating","title","visibleAtCurrentScale","error","visibilityMode","panel","panel.title","panel.content","panel.className","sortable","childrenSortable"],(function(){return t.scheduleRender()})),e.actionsSections.on("change",(function(){return t.scheduleRender()})),e.children.on("change",(function(){return t.scheduleRender()}))],r),e.children.forEach((function(e){return t._renderOnItemChanges(e)})),e.actionsSections.forEach((function(e){return t._watchActionSectionChanges(e,i)}))},t.prototype._itemsChanged=function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnItemChanges(e)})),this._setVisibleItems(e),this.scheduleRender()},t.prototype._filterActions=function(e){return e.map((function(e){return e.filter((function(e){return e.visible}))}))},t.prototype._countActions=function(e){return e.reduce((function(e,t){return e+t.length}),0)},t.prototype._getIconImageStyles=function(e){var t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?'url("'+t+'")':null}},t.prototype._selectionKeydown=function(e){var t,i,r,n,a=o.eventKey(e);if(-1!==["ArrowDown","ArrowUp"].indexOf(a)){e.stopPropagation();var s=e.currentTarget,l=s["data-item"],c=this._sortableMap,d=this.selectedItems,p=s.dataset.group,u=c.get(p);if(u){var y=f.findSelectedItem(l,d),h=u.toArray(),v=e.target,g=h.indexOf(v.dataset.layerUid);if(-1!==g){if("ArrowDown"===a){if((_=g+1)>=h.length)return;y?(m(h,g,_),u.sort(h),this._sortLayers(u),this._focusSortUid=null===(t=l.layer)||void 0===t?void 0:t.uid):(this._focusSortUid=null===(i=l.layer)||void 0===i?void 0:i.uid,this.scheduleRender())}if("ArrowUp"===a){var _;if((_=g-1)<=-1)return;y?(m(h,g,_),u.sort(h),this._sortLayers(u),this._focusSortUid=null===(r=l.layer)||void 0===r?void 0:r.uid):(this._focusSortUid=null===(n=l.layer)||void 0===n?void 0:n.uid,this.scheduleRender())}}}}else this._toggleSelection(e)},t.prototype._toggleActionsOpen=function(e){var t=e.currentTarget["data-item"],i=!t.actionsOpen;i&&this.operationalItems.forEach((function(e){return function e(t){var i=t.actionsOpen,r=t.children;i&&(t.actionsOpen=!1),r.forEach((function(t){return e(t)}))}(e)})),t.actionsOpen=i,e.stopPropagation()},t.prototype._triggerPanel=function(e){var t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()},t.prototype._triggerAction=function(e){var t=e.currentTarget,i=t["data-action"],r=t["data-item"];"toggle"===i.type&&(i.value=!i.value),this.triggerAction(i,r),e.stopPropagation()},t.prototype._toggleVisibility=function(e){var t=e.currentTarget,i=t.getAttribute("data-parent-visibility"),r=t["data-item"];i===A&&r.visible||(r.visible=!r.visible),e.stopPropagation()},t.prototype._toggleChildrenClick=function(e){var t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()},t.prototype._toggleSelection=function(e){e.stopPropagation();var t=this.multipleSelectionEnabled,i=this.selectedItems,r=t&&(e.metaKey||e.ctrlKey),n=e.currentTarget["data-item"],o=f.findSelectedItem(n,i),a=i.length;if(!r)return!a||o&&1===a?void(o?i.remove(o):i.add(n)):(i.removeAll(),void i.add(n));o?i.remove(o):i.add(n)},i.__decorate([d.property()],t.prototype,"visibleItems",void 0),i.__decorate([d.property()],t.prototype,"iconClass",void 0),i.__decorate([d.property(),v.renderable()],t.prototype,"errorsVisible",void 0),i.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),i.__decorate([d.aliasOf("viewModel.listItemCreatedFunction"),v.renderable()],t.prototype,"listItemCreatedFunction",void 0),i.__decorate([d.property(),v.renderable(),v.messageBundle("esri/widgets/LayerList/t9n/LayerList")],t.prototype,"messages",void 0),i.__decorate([d.property(),v.renderable(),v.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0),i.__decorate([d.property()],t.prototype,"multipleSelectionEnabled",void 0),i.__decorate([d.aliasOf("viewModel.operationalItems"),v.renderable()],t.prototype,"operationalItems",void 0),i.__decorate([d.property(),v.renderable()],t.prototype,"selectionEnabled",void 0),i.__decorate([d.property(),v.renderable()],t.prototype,"selectedItems",void 0),i.__decorate([d.property(),v.renderable()],t.prototype,"statusIndicatorsVisible",null),i.__decorate([d.aliasOf("viewModel.view"),v.renderable()],t.prototype,"view",void 0),i.__decorate([v.vmEvent("trigger-action"),d.property({type:y}),v.renderable("viewModel.state")],t.prototype,"viewModel",void 0),i.__decorate([d.property(),v.renderable()],t.prototype,"visibleElements",void 0),i.__decorate([d.cast("visibleElements")],t.prototype,"castVisibleElements",null),i.__decorate([d.aliasOf("viewModel.triggerAction")],t.prototype,"triggerAction",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleActionsOpen",null),i.__decorate([v.accessibleHandler()],t.prototype,"_triggerPanel",null),i.__decorate([v.accessibleHandler()],t.prototype,"_triggerAction",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleVisibility",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleChildrenClick",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleSelection",null),i.__decorate([d.subclass("esri.widgets.LayerList")],t)}(u)}.apply(null,r))||(e.exports=n)},457:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(169),i(190),i(167),i(157),i(151),i(347),i(294)],void 0===(n=function(e,t,i,r,n,o,a,s,l,c){var d="view-layers",p="map-layers",u="layer-views",y="layer-list-mode",h=r.ofType(l);return function(e){function t(t){var i=e.call(this,t)||this;return i._handles=new o,i.listItemCreatedFunction=null,i.operationalItems=new h,i.view=null,i}return i.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(a.init(this,["view","view.ready"],(function(){return e._viewHandles()})),"view")},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()},Object.defineProperty(t.prototype,"state",{get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"},enumerable:!0,configurable:!0}),t.prototype.triggerAction=function(e,t){e&&this.emit("trigger-action",{action:e,item:t})},t.prototype.moveListItem=function(e,t,i,r){var n,o,a=null==e?void 0:e.layer;if(a){var s=null===(o=null===(n=this.view)||void 0===n?void 0:n.map)||void 0===o?void 0:o.layers,l=t?c.getItemLayers(t):s,d=i?c.getItemLayers(i):s;if(l&&d){var p=this.operationalItems,u=(null==t?void 0:t.children)||p,y=(null==i?void 0:i.children)||p,h=d.length-r;e.parent=i||null,u.includes(e)&&u.remove(e),l.includes(a)&&l.remove(a),y.includes(e)||y.add(e,h),d.includes(a)||d.add(a,h)}}},t.prototype._createLayerViewHandles=function(e){var t=this,i=this._handles;i.remove(u),this._compileList(),e&&i.add(e.on("change",(function(){return t._compileList()})),u)},t.prototype._createMapLayerHandles=function(e){var t=this,i=this._handles;i.remove(p),this._compileList(),e&&i.add(e.on("change",(function(){return t._compileList()})),p)},t.prototype._watchItemProperties=function(e){var t=this;this._handles.add([e.children.on("change",(function(){t._modifyListItemChildren(e.children)}))],"children-change-"+e.uid)},t.prototype._modifyListItemChildren=function(e){var t=this;e.forEach((function(e){return t._modifyListItem(e)}))},t.prototype._modifyListItem=function(e){if("function"==typeof this.listItemCreatedFunction){var t={item:e};this.listItemCreatedFunction.call(null,t)}this._modifyListItemChildren(e.children)},t.prototype._createListItem=function(e){var t=this.view,i=new l({layer:e,view:t});return this._watchItemProperties(i),i},t.prototype._removeAllItems=function(){var e=this._handles,t=this.operationalItems;t.forEach((function(t){e.remove("children-change-"+t.uid)})),t.removeAll()},t.prototype._getViewableLayers=function(e){if(e)return e.filter((function(e){return"hide"!==c.findLayerListMode(e)}))},t.prototype._watchLayersListMode=function(e){var t=this,i=this._handles;i.remove(y),e&&e.forEach((function(e){i.add(a.watch(e,"listMode",(function(){return t._compileList()})),y)}))},t.prototype._compileList=function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);var t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._modifyOrRemoveItems(t),this._sortItems(t)):this._removeAllItems()},t.prototype._createNewItems=function(e){var t=this,i=this.operationalItems;e.forEach((function(e){i.find((function(t){return t.layer===e}))||i.add(t._createListItem(e))}))},t.prototype._modifyOrRemoveItems=function(e){var t=this,i=this._handles,r=this.operationalItems;r.forEach((function(n){n&&(e&&e.find((function(e){return n.layer===e}))?t._modifyListItem(n):(i.remove("children-change-"+n.uid),r.remove(n)))}))},t.prototype._sortItems=function(e){this.operationalItems.sort((function(t,i){var r=e.indexOf(t.layer),n=e.indexOf(i.layer);return r>n?-1:r<n?1:0}))},t.prototype._viewHandles=function(){var e=this,t=this._handles,i=this.view;t.remove([p,u,d]),this._compileList(),i&&i.ready&&t.add([a.init(this,"view.map.layers",(function(t){return e._createMapLayerHandles(t)})),a.init(this,"view.layerViews",(function(t){return e._createLayerViewHandles(t)})),a.init(this,"listItemCreatedFunction",(function(){return e._compileList()}))],d)},i.__decorate([s.property()],t.prototype,"listItemCreatedFunction",void 0),i.__decorate([s.property({type:h})],t.prototype,"operationalItems",void 0),i.__decorate([s.property({dependsOn:["view.ready"],readOnly:!0})],t.prototype,"state",null),i.__decorate([s.property()],t.prototype,"view",void 0),i.__decorate([s.subclass("esri.widgets.LayerList.LayerListViewModel")],t)}(n.EventedAccessor)}.apply(null,r))||(e.exports=n)},458:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(151),i(337)],void 0===(n=function(e,t,i,r,n){return function(e){function t(t){var i=e.call(this,t)||this;return i.displayValueEnabled=!1,i.max=1,i.min=0,i.step=.1,i.type="slider",i.value=null,i}var n;return i.__extends(t,e),n=t,t.prototype.clone=function(){return new n({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})},i.__decorate([r.property()],t.prototype,"displayValueEnabled",void 0),i.__decorate([r.property()],t.prototype,"max",void 0),i.__decorate([r.property()],t.prototype,"min",void 0),i.__decorate([r.property()],t.prototype,"step",void 0),i.__decorate([r.property()],t.prototype,"value",void 0),n=i.__decorate([r.subclass("esri.support.Action.ActionSlider")],t)}(n)}.apply(null,r))||(e.exports=n)},459:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(167),i(292),i(157),i(151),i(188),i(183),i(161)],void 0===(n=function(e,t,r,n,o,a,s,l,c){var d="esri-layer-list-panel__content";return function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._legend=null,r._handles=new n,r.content=null,r.image=null,r.listItem=null,r.open=!1,r.visible=!0,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this.own([a.init(this,"content",(function(t){return e._createLegend(t)}))])},t.prototype.destroy=function(){var e=this._legend;e&&e.destroy(),this._legend=null},Object.defineProperty(t.prototype,"className",{get:function(){var e=this.image,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""},set:function(e){void 0!==e?this._override("className",e):this._clearOverride("className")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){var e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")},enumerable:!0,configurable:!0}),t.prototype.render=function(){return c.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())},t.prototype._renderContent=function(e){var t=this._legend,i=this.listItem;return e?"legend"===e?i&&i.view&&i.layer&&t?c.tsx("div",{class:this.classes(d,"esri-layer-list-panel__content--legend"),key:t},t.render()):null:"string"==typeof e?c.tsx("div",{class:this.classes(d,"esri-layer-list-panel__content--string"),key:e,innerHTML:e}):c.isWidget(e)?c.tsx("div",{class:this.classes(d,"esri-layer-list-panel__content--widget"),key:e},e.render()):e instanceof HTMLElement?c.tsx("div",{class:this.classes(d,"esri-layer-list-panel__content--html-element"),key:e,bind:e,afterCreate:this._attachToNode}):null:null},t.prototype._renderContents=function(){var e=this,t=this.content;return Array.isArray(t)?t.map((function(t){return e._renderContent(t)})):this._renderContent(t)},t.prototype._getLegendOptions=function(e){if(e){var t=e.layer,i=e.view;if(t&&i)return{view:i,layerInfos:[{layer:t,title:""}]}}},t.prototype._createLegend=function(e){var t=this;this._hasLegend(e)&&!this._legend&&new Promise((function(e,t){i.e(6).then(function(){var t=[i(300)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})).then((function(e){var i=t,r=i._handles,n=i.listItem,o=new e(t._getLegendOptions(n));t._legend=o,t.notifyChange("className"),t.notifyChange("title");var s=a.init(t,["listItem.view","listItem.layer"],(function(){return t._updateLegend(o)}));r.add(s,"legends"),t.scheduleRender()}))},t.prototype._hasLegend=function(e){return"legend"===e||!!Array.isArray(e)&&e.some((function(e){return"legend"===e}))},t.prototype._attachToNode=function(e){e.appendChild(this)},t.prototype._updateLegend=function(e){var t=this.listItem;if(t){var i=t.layer,r=t.view;e.view=r,e.layerInfos=[{layer:i,title:null}],this.scheduleRender()}},t.prototype._getWidget=function(e){return"legend"===e?this._legend:c.isWidget(e)?e:null},t.prototype._getFirstWidget=function(){var e=this,t=this.content;if(Array.isArray(t)){var i=null;return t.some((function(t){var r=e._getWidget(t);return r&&(i=r),!!r})),i}return this._getWidget(t)},r.__decorate([s.property({dependsOn:["content","image"]})],t.prototype,"className",null),r.__decorate([s.property(),c.renderable()],t.prototype,"content",void 0),r.__decorate([s.property()],t.prototype,"image",void 0),r.__decorate([s.property()],t.prototype,"listItem",void 0),r.__decorate([s.property({dependsOn:["content"]})],t.prototype,"title",null),r.__decorate([s.property(),c.renderable()],t.prototype,"open",void 0),r.__decorate([s.property()],t.prototype,"visible",void 0),r.__decorate([s.subclass("esri.widgets.LayerList.ListItemPanel")],t)}(o.IdentifiableMixin(l))}.apply(null,r))||(e.exports=n)},506:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(489),i(152),i(225),i(153),i(151),i(322),i(208),i(244),i(240),i(908),i(906),i(161)],void 0===(n=function(e,t,i,r,n,o,a,s,l,c,d,p,u,y){return function(e){function t(t){var i=e.call(this,t)||this;return i._visibilityHandles={},i.fullExtent=void 0,i.operationalLayerType="GroupLayer",i.spatialReference=void 0,i.type="group",i._visibilityWatcher=i._visibilityWatcher.bind(i),i}return i.__extends(t,e),t.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)},t.prototype._writeLayers=function(e,t,i,r){var o=[];if(!e)return o;e.forEach((function(e){var t=y.getLayerJSON(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);n.isSome(t)&&t.layerType&&o.push(t)})),t.layers=o},Object.defineProperty(t.prototype,"portalItem",{set:function(e){this._set("portalItem",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibilityMode",{set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)},enumerable:!0,configurable:!0}),t.prototype.load=function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),a.resolve(this)},t.prototype.loadAll=function(){var e=this;return r.loadAll(this,(function(t){t(e.layers)}))},t.prototype.layerAdded=function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)},t.prototype.layerRemoved=function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)},t.prototype._turnOffOtherLayers=function(e){this.layers.forEach((function(t){t!==e&&(t.visible=!1)}))},t.prototype._enforceVisibility=function(e,t){if(l.getProperties(this).initialized){var i=this.layers,r=i.find((function(e){return e.visible}));switch(e){case"exclusive":i.length&&!r&&((r=i.getItemAt(0)).visible=!0),this._turnOffOtherLayers(r);break;case"inherited":i.forEach((function(e){e.visible=t}))}}},t.prototype._visibleWatcher=function(e){"inherited"===this.visibilityMode&&this.layers.forEach((function(t){t.visible=e}))},t.prototype._visibilityWatcher=function(e,t,i,r){var n=r;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(n):this._isAnyLayerVisible()||(n.visible=!0);break;case"inherited":n.visible=this.visible}},t.prototype._isAnyLayerVisible=function(){return this.layers.some((function(e){return e.visible}))},i.__decorate([s.property()],t.prototype,"fullExtent",void 0),i.__decorate([s.property({json:{read:!1,write:{ignoreOrigin:!0}}})],t.prototype,"layers",void 0),i.__decorate([s.writer("layers")],t.prototype,"_writeLayers",null),i.__decorate([s.property({type:["GroupLayer"]})],t.prototype,"operationalLayerType",void 0),i.__decorate([s.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"portalItem",null),i.__decorate([s.property()],t.prototype,"spatialReference",void 0),i.__decorate([s.property({json:{read:!1},readOnly:!0,value:"group"})],t.prototype,"type",void 0),i.__decorate([s.property({type:String,value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"visibilityMode",null),i.__decorate([s.subclass("esri.layers.GroupLayer")],t)}(d.OperationalLayer(p.PortalLayer(u.LayersMixin(o.MultiOriginJSONMixin(c)))))}.apply(null,r))||(e.exports=n)}}]);
//# sourceMappingURL=59.js.map