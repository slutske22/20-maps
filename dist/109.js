(function(){var e={"esri/geometry/support/normalizeUtils":234,"esri/tasks/geometry/cut":279,"esri/tasks/geometry/simplify":280,"esri/layers/graphics/editingSupport":2022},t=this||window,a=t.webpackJsonp=t.webpackJsonp||[];a.registerAbsMids?a.registerAbsMids(e):(a.absMidsWaiting=a.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{2022:function(e,t,a){var r,n;r=[a.dj.c(e.i),t,a(117),a(174),a(169),a(154),a(118),a(153),a(172),a(234)],void 0===(n=function(e,t,a,r,n,i,s,o,u,l){function d(e,t,r){return a.__awaiter(this,void 0,void 0,(function(){var n,s;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,e.load()];case 1:if(a.sent(),!function(e){return e&&null!=e.applyEdits}(n=e.source))return[2,o.reject(new i(e.type+"-layer:no-editing-support","Layer source does not support applyEdits capability",{layer:e}))];if(!e.editingEnabled)throw new i(e.type+"-layer:editing-disabled","Editing is disabled for layer",{layer:e});return[4,p(e,t,r)];case 2:return(s=a.sent()).addFeatures.length||s.updateFeatures.length||s.deleteFeatures.length||s.addAttachments.length||s.updateAttachments.length||s.deleteAttachments.length?[2,n.applyEdits(s,r)]:[2,{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}]}}))}))}function p(e,t,r){return a.__awaiter(this,void 0,void 0,(function(){var s,o,u,l;return a.__generator(this,(function(d){if(s=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),!t||!s&&!o)throw new i(e.type+"-layer:missing-parameters","'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!e.capabilities.data.isVersioned&&r&&r.gdbVersion)throw new i(e.type+"-layer:invalid-parameter","'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!e.capabilities.editing.supportsRollbackOnFailure&&r&&r.rollbackOnFailureEnabled)throw new i(e.type+"-layer:invalid-parameter","This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");if(!e.capabilities.editing.supportsGlobalId&&r&&r.globalIdUsed)throw new i(e.type+"-layer:invalid-parameter","This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!e.capabilities.editing.supportsGlobalId&&o)throw new i(e.type+"-layer:invalid-parameter","'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((!r||!r.globalIdUsed)&&o)throw new i(e.type+"-layer:invalid-parameter","When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");return(u=a.__assign({},t)).addFeatures=t&&n.isCollection(t.addFeatures)?t.addFeatures.toArray():u.addFeatures||[],u.updateFeatures=t&&n.isCollection(t.updateFeatures)?t.updateFeatures.toArray():u.updateFeatures||[],u.deleteFeatures=t&&n.isCollection(t.deleteFeatures)?t.deleteFeatures.toArray():u.deleteFeatures||[],u.addAttachments=u.addAttachments||[],u.updateAttachments=u.updateAttachments||[],u.deleteAttachments=u.deleteAttachments||[],u.addFeatures=u.addFeatures.map(g),u.updateFeatures=u.updateFeatures.map(g),l=r&&r.globalIdUsed,u.addFeatures.forEach((function(t){return c(t,e,l)})),u.updateFeatures.forEach((function(t){return c(t,e,l)})),u.deleteFeatures.forEach((function(t){return c(t,e,l)})),u.addAttachments.forEach((function(t){return h(t,e)})),u.updateAttachments.forEach((function(t){return h(t,e)})),[2,f(u)]}))}))}function c(e,t,a){if(a){if("attributes"in e&&!e.attributes[t.globalIdField])throw new i(t.type+"-layer:invalid-parameter","Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in e)&&!e.globalId)throw new i(t.type+"-layer:invalid-parameter","'globalId' of the feature should be passed when 'globalIdUsed' is true")}}function h(e,t){var a=e.feature,r=e.attachment;if(!a||"attributes"in a&&!a.attributes[t.globalIdField])throw new i(t.type+"-layer:invalid-parameter","Attachment should have reference to a feature with 'globalId'");if(!("attributes"in a)&&!a.globalId)throw new i(t.type+"-layer:invalid-parameter","Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new i(t.type+"-layer:invalid-parameter","Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new i(t.type+"-layer:invalid-parameter","Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name||r.name))throw new i(t.type+"-layer:invalid-parameter","'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities.editing.supportsUploadWithItemId&&r.uploadId)throw new i(t.type+"-layer:invalid-parameter","This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){var n=u.dataComponents(r.data);if(n&&!n.isBase64)throw new i(t.type+"-layer:invalid-parameter","Attachment 'data' should be a Blob, File or Base64 encoded string")}}function f(e){return a.__awaiter(this,void 0,void 0,(function(){var t,r,n,i,s,o;return a.__generator(this,(function(a){switch(a.label){case 0:return t=e.addFeatures,r=e.updateFeatures,n=t.concat(r).map((function(e){return e.geometry})),[4,l.normalizeCentralMeridian(n)];case 1:return i=a.sent(),s=t.length,o=r.length,i.slice(0,s).forEach((function(t,a){e.addFeatures[a].geometry=t})),i.slice(s,s+o).forEach((function(t,a){e.updateFeatures[a].geometry=t})),[2,e]}}))}))}function g(e){var t=new r;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}Object.defineProperty(t,"__esModule",{value:!0}),t.isEditableLayer=function(e){return!0===e.get("capabilities.operations.supportsEditing")},t.applyEdits=function(e,t,r){return a.__awaiter(this,void 0,void 0,(function(){var n,i,u,l,p,c,h;return a.__generator(this,(function(a){switch(a.label){case 0:u={edits:t,result:o.create((function(e,t){n=e,i=t}))},e.emit("apply-edits",u),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d(e,t,r)];case 2:return l=a.sent(),((c={addedFeatures:(p=function(e){return e.filter((function(e){return!e.error})).map(s.clone)})(l.addFeatureResults),updatedFeatures:p(l.updateFeatureResults),deletedFeatures:p(l.deleteFeatureResults),addedAttachments:p(l.addAttachmentResults),updatedAttachments:p(l.updateAttachmentResults),deletedAttachments:p(l.deleteAttachmentResults)}).addedFeatures.length||c.updatedFeatures.length||c.deletedFeatures.length||c.addedAttachments.length||c.updatedAttachments.length||c.deletedAttachments.length)&&e.emit("edits",c),n(c),[2,l];case 3:throw h=a.sent(),i(h),h;case 4:return[2]}}))}))}}.apply(null,r))||(e.exports=n)},234:function(e,t,a){var r,n;r=[a.dj.c(e.i),t,a(117),a(100),a(154),a(156),a(152),a(153),a(232),a(259),a(170),a(178),a(197),a(279),a(280)],void 0===(n=function(e,t,a,r,n,i,s,o,u,l,d,p,c,h,f){Object.defineProperty(t,"__esModule",{value:!0});var g=i.getLogger("esri.geometry.support.normalizeUtils"),m={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new l({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:d.WebMercator}),minus180Line:new l({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:d.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new l({paths:[[[180,-180],[180,180]]],spatialReference:d.WGS84}),minus180Line:new l({paths:[[[-180,-180],[-180,180]]],spatialReference:d.WGS84})}};function y(e){return"polygon"===e.type}function v(e){return y(e)?e.rings:e.paths}function b(e,t){return Math.ceil((e-t)/(2*t))}function w(e,t){for(var a=0,r=v(e);a<r.length;a++)for(var n=0,i=r[a];n<i.length;n++)i[n][0]+=t;return e}function _(e){for(var t=[],a=0,r=0,n=0;n<e.length;n++){for(var i=e[n],s=null,o=0;o<i.length;o++)s=i[o],t.push(s),0===o?r=a=s[0]:(a=Math.min(a,s[0]),r=Math.max(r,s[0]));s&&t.push([(a+r)/2,0])}return t}function F(e,t){if(!(e instanceof l||e instanceof u)){var a="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(a),new n(a)}for(var r=[],i=0,s=v(e);i<s.length;i++){var o=s[i],d=[];r.push(d),d.push([o[0][0],o[0][1]]);for(var p=0;p<o.length-1;p++){var c=o[p][0],h=o[p][1],f=o[p+1][0],m=o[p+1][1],b=Math.sqrt((f-c)*(f-c)+(m-h)*(m-h)),w=(m-h)/b,_=(f-c)/b,F=b/t;if(F>1){for(var A=1;A<=F-1;A++){var x=A*t,I=_*x+c,R=w*x+h;d.push([I,R])}var M=(b+Math.floor(F-1)*t)/2,E=_*M+c,O=w*M+h;d.push([E,O])}d.push([f,m])}}return y(e)?new u({rings:r,spatialReference:e.spatialReference}):new l({paths:r,spatialReference:e.spatialReference})}function A(e,t,a){if(t){var r=F(e,1e6);e=c.webMercatorToGeographic(r,!0)}return a&&(e=w(e,a)),e}function x(e,t,a){var r;if(Array.isArray(e))if((r=e[0])>t){var n=b(r,t);e[0]=r+n*(-2*t)}else r<a&&(n=b(r,a),e[0]=r+n*(-2*a));else(r=e.x)>t?(n=b(r,t),e=e.clone().offset(n*(-2*t),0)):r<a&&(n=b(r,a),e=e.clone().offset(n*(-2*a),0));return e}t.straightLineDensify=F,t.normalizeCentralMeridian=function e(t,n,i){return a.__awaiter(this,void 0,void 0,(function(){var d,g,y,_,F,I,R,M,E,O,S,J,T,k,j,W,U,L,N,G,P,q,z,X,C,B,V,D,H,K,Q,Y,Z,$,ee,te,ae;return a.__generator(this,(function(a){switch(a.label){case 0:if(!Array.isArray(t))return[2,e([t],n)];for(d=n?n.url:r.geometryServiceUrl,O=0,S=[],J=[],T=0,k=t;T<k.length;T++)j=k[T],s.isNone(j)?J.push(j):(g||(g=j.spatialReference,y=p.getInfo(g),_=g.isWebMercator,F=m[R=_?102100:4326].maxX,I=m[R].minX,M=m[R].plus180Line,E=m[R].minus180Line),y?"mesh"===j.type?J.push(j):"point"===j.type?J.push(x(j.clone(),F,I)):"multipoint"===j.type?((W=j.clone()).points=W.points.map((function(e){return x(e,F,I)})),J.push(W)):"extent"===j.type?(L=j.clone(),U=L._normalize(!1,!1,y),J.push(U.rings?new u(U):U)):j.extent?(L=j.extent,N=b(L.xmin,I),P=0==(G=N*(2*F))?j.clone():w(j.clone(),G),L.offset(G,0),L.intersects(M)&&L.xmax!==F?(O=L.xmax>O?L.xmax:O,P=A(P,_),S.push(P),J.push("cut")):L.intersects(E)&&L.xmin!==I?(O=L.xmax*(2*F)>O?L.xmax*(2*F):O,P=A(P,_,360),S.push(P),J.push("cut")):J.push(P)):J.push(j.clone()):J.push(j));for(q=b(O,F),z=-90,X=q,C=new l;q>0;)B=360*q-180,C.addPath([[B,z],[B,-1*z]]),z*=-1,q--;return S.length>0&&X>0?[4,h.cut(d,S,C,i)]:[3,3];case 1:for(V=a.sent(),D=function(e,t){for(var a=-1,r=function(r){for(var n=t.cutIndexes[r],i=t.geometries[r],s=v(i),o=function(e){var t=s[e];t.some((function(a){if(a[0]<180)return!0;for(var r=0,n=0;n<t.length;n++){var s=t[n][0];r=s>r?s:r}for(var o=-360*b(r=Number(r.toFixed(9)),180),u=0;u<t.length;u++){var l=i.getPoint(e,u);i.setPoint(e,u,l.clone().offset(o,0))}return!0}))},u=0;u<s.length;u++)o(u);if(n===a){if("polygon"===e[0].type)for(var l=0,d=v(i);l<d.length;l++){var p=d[l];e[n]=e[n].addRing(p)}else if(function(e){return"polyline"===e[0].type}(e))for(var c=0,h=v(i);c<h.length;c++){var f=h[c];e[n]=e[n].addPath(f)}}else a=n,e[n]=i},n=0;n<t.cutIndexes.length;n++)r(n);return e}(S,V),H=[],K=[],ee=0;ee<J.length;ee++)"cut"!==(te=J[ee])?K.push(te):(ae=D.shift(),Q=t[ee],s.isSome(Q)&&"polygon"===Q.type&&Q.rings&&Q.rings.length>1&&ae.rings.length>=Q.rings.length?(H.push(ae),K.push("simplify")):K.push(_?c.geographicToWebMercator(ae):ae));return H.length?[4,f.simplify(d,H,i)]:[2,K];case 2:for(Y=a.sent(),Z=[],ee=0;ee<K.length;ee++)"simplify"!==(te=K[ee])?Z.push(te):Z.push(_?c.geographicToWebMercator(Y.shift()):Y.shift());return[2,Z];case 3:for($=[],ee=0;ee<J.length;ee++)"cut"!==(te=J[ee])?$.push(te):(ae=S.shift(),$.push(!0===_?c.geographicToWebMercator(ae):ae));return[2,o.resolve($)]}}))}))},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var a=e.extent;if(!a)return null;var r=e.spatialReference&&p.getInfo(e.spatialReference);if(!r)return a;var n,i=r.valid,s=i[0],o=i[1],u=2*o,l=a.width,d=a.xmin,c=a.xmax;if(d=(t=[c,d])[0],c=t[1],"extent"===e.type||0===l||l<=o||l>u||d<s||c>o)return a;switch(e.type){case"polygon":if(!(e.rings.length>1))return a;n=_(e.rings);break;case"polyline":if(!(e.paths.length>1))return a;n=_(e.paths);break;case"multipoint":n=e.points}for(var h=a.clone(),f=0;f<n.length;f++){var g=n[f][0];g<0?(g+=o,c=Math.max(g,c)):(g-=o,d=Math.min(g,d))}return h.xmin=d,h.xmax=c,h.width<l?(h.xmin-=o,h.xmax-=o,h):a},t.normalizeMapX=function(e,t){var a=p.getInfo(t);if(a){var r=a.valid,n=r[0],i=r[1],s=i-n;if(e<n)for(;e<n;)e+=s;if(e>i)for(;e>i;)e-=s}return e}}.apply(null,r))||(e.exports=n)},279:function(e,t,a){var r,n;r=[a.dj.c(e.i),t,a(117),a(159),a(165),a(172),a(163)],void 0===(n=function(e,t,a,r,n,i,s){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,o,u){return a.__awaiter(this,void 0,void 0,(function(){var l,d,p,c,h,f,g;return a.__generator(this,(function(m){switch(m.label){case 0:return l="string"==typeof e?i.urlToObject(e):e,d=t[0].spatialReference,p=a.__assign(a.__assign({},u),{query:a.__assign(a.__assign({},l.query),{f:"json",sr:JSON.stringify(d),target:JSON.stringify({geometryType:s.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(o)})}),[4,n(l.path+"/cut",p)];case 1:return c=m.sent(),h=c.data,f=h.cutIndexes,g=h.geometries,[2,{cutIndexes:f,geometries:(void 0===g?[]:g).map((function(e){return r.fromJSON(e).set(d)}))}]}}))}))}}.apply(null,r))||(e.exports=n)},280:function(e,t,a){var r,n;r=[a.dj.c(e.i),t,a(117),a(165),a(172),a(163)],void 0===(n=function(e,t,a,r,n,i){function s(e){return{geometryType:i.getJsonType(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function o(e,t,a){var r=i.getGeometryType(t);return e.map((function(e){var t=r.fromJSON(e);return t.spatialReference=a,t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,u){return a.__awaiter(this,void 0,void 0,(function(){var l,d,p,c;return a.__generator(this,(function(h){switch(h.label){case 0:return l="string"==typeof e?n.urlToObject(e):e,d=t[0].spatialReference,p=i.getJsonType(t[0]),c=a.__assign(a.__assign({},u),{query:a.__assign(a.__assign({},l.query),{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d),geometries:JSON.stringify(s(t))})}),[4,r(l.path+"/simplify",c)];case 1:return[2,o(h.sent().data,p,d)]}}))}))}}.apply(null,r))||(e.exports=n)}}]);
//# sourceMappingURL=109.js.map