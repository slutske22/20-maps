(function(){var e={"esri/geometry/support/normalizeUtils":234,"esri/tasks/operations/zscale":248,"esri/core/pbf":268,"esri/tasks/geometry/cut":279,"esri/tasks/geometry/simplify":280,"esri/tasks/operations/urlUtils":314,"esri/tasks/operations/pbfQueryUtils":328,"esri/tasks/operations/pbfFeatureServiceParser":329,"esri/tasks/operations/pbfDehydratedFeatureSet":330,"esri/tasks/operations/pbfOptimizedFeatureSet":331,"esri/tasks/operations/query":348},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{234:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(100),r(154),r(156),r(152),r(153),r(232),r(259),r(170),r(178),r(197),r(279),r(280)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,f,h,d){Object.defineProperty(t,"__esModule",{value:!0});var g=o.getLogger("esri.geometry.support.normalizeUtils"),y={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new p({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:l.WebMercator}),minus180Line:new p({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:l.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new p({paths:[[[180,-180],[180,180]]],spatialReference:l.WGS84}),minus180Line:new p({paths:[[[-180,-180],[-180,180]]],spatialReference:l.WGS84})}};function v(e){return"polygon"===e.type}function m(e){return v(e)?e.rings:e.paths}function _(e,t){return Math.ceil((e-t)/(2*t))}function b(e,t){for(var r=0,n=m(e);r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++)o[i][0]+=t;return e}function k(e){for(var t=[],r=0,n=0,i=0;i<e.length;i++){for(var o=e[i],a=null,s=0;s<o.length;s++)a=o[s],t.push(a),0===s?n=r=a[0]:(r=Math.min(r,a[0]),n=Math.max(n,a[0]));a&&t.push([(r+n)/2,0])}return t}function w(e,t){if(!(e instanceof p||e instanceof u)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw g.error(r),new i(r)}for(var n=[],o=0,a=m(e);o<a.length;o++){var s=a[o],l=[];n.push(l),l.push([s[0][0],s[0][1]]);for(var c=0;c<s.length-1;c++){var f=s[c][0],h=s[c][1],d=s[c+1][0],y=s[c+1][1],_=Math.sqrt((d-f)*(d-f)+(y-h)*(y-h)),b=(y-h)/_,k=(d-f)/_,w=_/t;if(w>1){for(var x=1;x<=w-1;x++){var S=x*t,F=k*S+f,T=b*S+h;l.push([F,T])}var M=(_+Math.floor(w-1)*t)/2,P=k*M+f,R=b*M+h;l.push([P,R])}l.push([d,y])}}return v(e)?new u({rings:n,spatialReference:e.spatialReference}):new p({paths:n,spatialReference:e.spatialReference})}function x(e,t,r){if(t){var n=w(e,1e6);e=f.webMercatorToGeographic(n,!0)}return r&&(e=b(e,r)),e}function S(e,t,r){var n;if(Array.isArray(e))if((n=e[0])>t){var i=_(n,t);e[0]=n+i*(-2*t)}else n<r&&(i=_(n,r),e[0]=n+i*(-2*r));else(n=e.x)>t?(i=_(n,t),e=e.clone().offset(i*(-2*t),0)):n<r&&(i=_(n,r),e=e.clone().offset(i*(-2*r),0));return e}t.straightLineDensify=w,t.normalizeCentralMeridian=function e(t,i,o){return r.__awaiter(this,void 0,void 0,(function(){var l,g,v,k,w,F,T,M,P,R,I,C,q,O,j,L,V,G,A,E,U,B,D,N,J,Z,z,W,Q,X,Y,H,K,$,ee,te,re;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Array.isArray(t))return[2,e([t],i)];for(l=i?i.url:n.geometryServiceUrl,R=0,I=[],C=[],q=0,O=t;q<O.length;q++)j=O[q],a.isNone(j)?C.push(j):(g||(g=j.spatialReference,v=c.getInfo(g),k=g.isWebMercator,w=y[T=k?102100:4326].maxX,F=y[T].minX,M=y[T].plus180Line,P=y[T].minus180Line),v?"mesh"===j.type?C.push(j):"point"===j.type?C.push(S(j.clone(),w,F)):"multipoint"===j.type?((L=j.clone()).points=L.points.map((function(e){return S(e,w,F)})),C.push(L)):"extent"===j.type?(G=j.clone(),V=G._normalize(!1,!1,v),C.push(V.rings?new u(V):V)):j.extent?(G=j.extent,A=_(G.xmin,F),U=0==(E=A*(2*w))?j.clone():b(j.clone(),E),G.offset(E,0),G.intersects(M)&&G.xmax!==w?(R=G.xmax>R?G.xmax:R,U=x(U,k),I.push(U),C.push("cut")):G.intersects(P)&&G.xmin!==F?(R=G.xmax*(2*w)>R?G.xmax*(2*w):R,U=x(U,k,360),I.push(U),C.push("cut")):C.push(U)):C.push(j.clone()):C.push(j));for(B=_(R,w),D=-90,N=B,J=new p;B>0;)Z=360*B-180,J.addPath([[Z,D],[Z,-1*D]]),D*=-1,B--;return I.length>0&&N>0?[4,h.cut(l,I,J,o)]:[3,3];case 1:for(z=r.sent(),W=function(e,t){for(var r=-1,n=function(n){for(var i=t.cutIndexes[n],o=t.geometries[n],a=m(o),s=function(e){var t=a[e];t.some((function(r){if(r[0]<180)return!0;for(var n=0,i=0;i<t.length;i++){var a=t[i][0];n=a>n?a:n}for(var s=-360*_(n=Number(n.toFixed(9)),180),u=0;u<t.length;u++){var p=o.getPoint(e,u);o.setPoint(e,u,p.clone().offset(s,0))}return!0}))},u=0;u<a.length;u++)s(u);if(i===r){if("polygon"===e[0].type)for(var p=0,l=m(o);p<l.length;p++){var c=l[p];e[i]=e[i].addRing(c)}else if(function(e){return"polyline"===e[0].type}(e))for(var f=0,h=m(o);f<h.length;f++){var d=h[f];e[i]=e[i].addPath(d)}}else r=i,e[i]=o},i=0;i<t.cutIndexes.length;i++)n(i);return e}(I,z),Q=[],X=[],ee=0;ee<C.length;ee++)"cut"!==(te=C[ee])?X.push(te):(re=W.shift(),Y=t[ee],a.isSome(Y)&&"polygon"===Y.type&&Y.rings&&Y.rings.length>1&&re.rings.length>=Y.rings.length?(Q.push(re),X.push("simplify")):X.push(k?f.geographicToWebMercator(re):re));return Q.length?[4,d.simplify(l,Q,o)]:[2,X];case 2:for(H=r.sent(),K=[],ee=0;ee<X.length;ee++)"simplify"!==(te=X[ee])?K.push(te):K.push(k?f.geographicToWebMercator(H.shift()):H.shift());return[2,K];case 3:for($=[],ee=0;ee<C.length;ee++)"cut"!==(te=C[ee])?$.push(te):(re=I.shift(),$.push(!0===k?f.geographicToWebMercator(re):re));return[2,s.resolve($)]}}))}))},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&c.getInfo(e.spatialReference);if(!n)return r;var i,o=n.valid,a=o[0],s=o[1],u=2*s,p=r.width,l=r.xmin,f=r.xmax;if(l=(t=[f,l])[0],f=t[1],"extent"===e.type||0===p||p<=s||p>u||l<a||f>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;i=k(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;i=k(e.paths);break;case"multipoint":i=e.points}for(var h=r.clone(),d=0;d<i.length;d++){var g=i[d][0];g<0?(g+=s,f=Math.max(g,f)):(g-=s,l=Math.min(g,l))}return h.xmin=l,h.xmax=f,h.width<p?(h.xmin-=s,h.xmax-=s,h):r},t.normalizeMapX=function(e,t){var r=c.getInfo(t);if(r){var n=r.valid,i=n[0],o=n[1],a=o-i;if(e<i)for(;e<i;)e+=a;if(e>o)for(;e>o;)e-=a}return e}}.apply(null,n))||(e.exports=i)},248:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(200),r(178)],void 0===(i=function(e,t,r,n){function i(e,t,i){if(!t||!i||i.vcsWkid||n.equals(t,i))return null;var o=r.getMetersPerVerticalUnitForSR(t)/r.getMetersPerVerticalUnitForSR(i);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return r=o,void((t=e)&&null!=t.z&&(t.z*=r));var t,r};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e)for(var r=0,n=e.paths;r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++){var a=o[i];a.length>2&&(a[2]*=t)}}(e,o)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e)for(var r=0,n=e.rings;r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++){var a=o[i];a.length>2&&(a[2]*=t)}}(e,o)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e)for(var r=0,n=e.points;r<n.length;r++){var i=n[r];i.length>2&&(i[2]*=t)}}(e,o)};default:return null}}function o(e,t,r){if(null==e.hasM||e.hasZ)for(var n=0,i=t;n<i.length;n++)for(var o=0,a=i[n];o<a.length;o++){var s=a[o];s.length>2&&(s[2]*=r)}}function a(e,t,r){if(e)for(var n=0,i=e;n<i.length;n++)s(i[n].geometry,t,r)}function s(e,t,i){if(e&&e.spatialReference&&!n.equals(e.spatialReference,t)){var a=r.getMetersPerVerticalUnitForSR(e.spatialReference)/i;if(1!==a)if("x"in e)null!=e.z&&(e.z*=a);else if("rings"in e)o(e,e.rings,a);else if("paths"in e)o(e,e.paths,a);else if("points"in e&&(null==e.hasM||e.hasZ))for(var s=0,u=e.points;s<u.length;s++){var p=u[s];p.length>2&&(p[2]*=a)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getGeometryZScaler=i,t.applyFeatureSetZUnitScaling=function(e,t,r){if(r&&r.features&&r.hasZ){var n=i(r.geometryType,t,e.outSpatialReference);if(n)for(var o=0,a=r.features;o<a.length;o++)n(a[o].geometry)}},t.unapplyEditsZUnitScaling=function(e,t,n){if((e||t)&&n){var i=r.getMetersPerVerticalUnitForSR(n);a(e,n,i),a(t,n,i)}}}.apply(null,n))||(e.exports=i)},268:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(164),r(230)],void 0===(i=function(e,t,r,n){var i=r("esri-text-decoder")?new TextDecoder("utf-8"):null,o=r("safari")||r("ios")?6:r("ff")?12:32;return function(){function e(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=e?e.byteLength:0),this._tag=0,this._dataType=99,this.init(e,t,r,n)}return e.prototype.init=function(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n},e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.processMessageWithArgs=function(e,t,r,n){var i=this.getMessage(),o=e(i,t,r,n);return i.release(),o},e.prototype.processMessage=function(e){var t=this.getMessage(),r=e(t);return t.release(),r},e.prototype.getMessage=function(){var t=this._getLength(),r=e.pool.acquire();return r.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r},e.prototype.release=function(){e.pool.release(this)},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,n=0;if(this._end-r>=10)do{if(n|=127&(e=t[r++]),0==(128&e))break;if(n|=(127&(e=t[r++]))<<7,0==(128&e))break;if(n|=(127&(e=t[r++]))<<14,0==(128&e))break;if(n|=(127&(e=t[r++]))<<21,0==(128&e))break;if(n+=268435456*(127&(e=t[r++])),0==(128&e))break;if(n+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(n+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(n+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(n+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(n+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var i=1;r!==this._end&&0!=(128&(e=t[r]));)++r,n+=(127&e)*i,i*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=e*i}return this._pos=r,n},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){if((r=Math.min(this._end,r))-t>o&&i){var n=e.subarray(t,r);return i.decode(n)}for(var a="",s="",u=t;u<r;++u){var p=e[u];128&p?s+="%"+p.toString(16):(a+=decodeURIComponent(s)+String.fromCharCode(p),s="")}return s.length&&(a+=decodeURIComponent(s)),a},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e.pool=new n(e,null,(function(e){e._data=null,e._dataView=null})),e}()}.apply(null,n))||(e.exports=i)},279:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(159),r(165),r(172),r(163)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,s,u){return r.__awaiter(this,void 0,void 0,(function(){var p,l,c,f,h,d,g;return r.__generator(this,(function(y){switch(y.label){case 0:return p="string"==typeof e?o.urlToObject(e):e,l=t[0].spatialReference,c=r.__assign(r.__assign({},u),{query:r.__assign(r.__assign({},p.query),{f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:a.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(s)})}),[4,i(p.path+"/cut",c)];case 1:return f=y.sent(),h=f.data,d=h.cutIndexes,g=h.geometries,[2,{cutIndexes:d,geometries:(void 0===g?[]:g).map((function(e){return n.fromJSON(e).set(l)}))}]}}))}))}}.apply(null,n))||(e.exports=i)},280:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(165),r(172),r(163)],void 0===(i=function(e,t,r,n,i,o){function a(e){return{geometryType:o.getJsonType(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function s(e,t,r){var n=o.getGeometryType(t);return e.map((function(e){var t=n.fromJSON(e);return t.spatialReference=r,t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,u){return r.__awaiter(this,void 0,void 0,(function(){var p,l,c,f;return r.__generator(this,(function(h){switch(h.label){case 0:return p="string"==typeof e?i.urlToObject(e):e,l=t[0].spatialReference,c=o.getJsonType(t[0]),f=r.__assign(r.__assign({},u),{query:r.__assign(r.__assign({},p.query),{f:"json",sr:l.wkid?l.wkid:JSON.stringify(l),geometries:JSON.stringify(a(t))})}),[4,n(p.path+"/simplify",f)];case 1:return[2,s(h.sent().data,c,l)]}}))}))}}.apply(null,n))||(e.exports=i)},314:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var n in t)if("declaredClass"!==n){var i=t[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){r[n]=[];for(var o=0;o<i.length;o++)r[n][o]=e(i[o])}else"object"==typeof i?i.toJSON&&(r[n]=JSON.stringify(i)):r[n]=i}return r}}.apply(null,n))||(e.exports=i)},328:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(329)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var n=r.parseFeatureQuery(e,t).queryResult.featureResult;if(n&&n.features&&n.features.length&&n.objectIdFieldName)for(var i=n.objectIdFieldName,o=0,a=n.features;o<a.length;o++){var s=a[o];s.attributes&&(s.objectId=s.attributes[i])}return n}}.apply(null,n))||(e.exports=i)},329:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(154),r(156),r(268),r(330),r(331)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=n.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),u=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],p=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],l=["upperLeft","lowerLeft"];function c(e){return e>=u.length?null:u[e]}function f(e){return e>=l.length?null:l[e]}function h(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function d(e,t,r){for(var n=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),o=e.pos()+i,a=0;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),0,a++);break;case 1:case 2:default:e.skip()}return n}function g(e,t,r){for(var n=t.createGeometry(r),i=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var o=e.getUInt32(),a=e.pos()+o,s=0;e.pos()<a;)t.addLength(n,e.getUInt32(),s++);break;case 3:for(var u=e.getUInt32(),p=(a=e.pos()+u,0),l=0;e.pos()<a;)t.addCoordinate(n,e.getSInt64(),l,p),++p===i&&(l++,p=0);break;case 1:default:e.skip()}return n}function y(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function v(e){for(var t,r={type:c(0)};e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.type=c(e.getEnum());break;case 3:r.alias=e.getString();break;case 4:r.sqlType=(t=e.getEnum())>=p.length?null:p[t];break;case 5:case 6:default:e.skip()}return r}function m(e,t,r,n){for(var i=t.createFeature(r),o=0;e.next();)switch(e.tag()){case 1:var a=n[o++].name;i.attributes[a]=e.processMessage(y);break;case 2:i.geometry=e.processMessageWithArgs(g,t,r);break;case 4:i.centroid=e.processMessageWithArgs(d,t,r);break;default:e.skip()}return i}function _(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function b(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function k(e){for(var t={originPosition:f(0)};e.next();)switch(e.tag()){case 1:t.originPosition=f(e.getEnum());break;case 2:t.scale=e.processMessage(_);break;case 3:t.translate=e.processMessage(b);break;default:e.skip()}return t}function w(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function x(e,t){for(var r=t.createSpatialReference();e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return r}function S(e,t){var r=t.createFeatureResult();r.geometryType=h(t,0);for(var n=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(w);break;case 7:r.geometryType=h(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(x,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(k);break;case 9:var i=e.getBool();r.exceededTransferLimit=i;break;case 13:t.addField(r,e.processMessage(v));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(m,t,r,r.fields));break;case 2:case 6:default:e.skip()}return t.finishFeatureResult(r),r}function F(e,t){for(var r={};e.next();)switch(e.tag()){case 1:r.featureResult=e.processMessageWithArgs(S,t);break;default:e.skip()}return r}t.parseFeatureQuery=function(e,t){var n=function(e){return e&&"dehydrated"===e.type?new o.Context(e):new a.Context(e)}(t);try{for(var u=new i(new Uint8Array(e),new DataView(e)),p={};u.next();)switch(u.tag()){case 2:p.queryResult=u.processMessageWithArgs(F,n);break;default:u.skip()}return p}catch(e){var l=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return s.error(l),{queryResult:{featureResult:n.createFeatureResult()}}}}}.apply(null,n))||(e.exports=i)},330:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(174),r(177),r(170),r(207),r(194),r(248)],void 0===(i=function(e,t,r,n,i,o,a,s){function u(e,t){return t}function p(e,t,r,n){switch(r){case 0:return h(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?h:d)(e,t+n,1)}}function l(e,t,r,n){switch(r){case 0:return h(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?h:d)(e,t+n,1);case 2:return h(e,t,2)}}function c(e,t,r,n){switch(r){case 0:return h(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?h:d)(e,t+n,1);case 2:return h(e,t,3)}}function f(e,t,r,n){switch(r){case 0:return h(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?h:d)(e,t+n,1);case 2:return h(e,t,2);case 3:return h(e,t,3)}}function h(e,t,r){var n=e.translate,i=e.scale;return n[r]+t*i[r]}function d(e,t,r){var n=e.translate,i=e.scale;return n[r]-t*i[r]}Object.defineProperty(t,"__esModule",{value:!0});var g=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=u,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return e.prototype.createFeatureResult=function(){return new o.DehydratedFeatureSetClass},e.prototype.finishFeatureResult=function(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=s.getGeometryZScaler(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(var r=0,n=e.features;r<n.length;r++)t(n[r].geometry)}},e.prototype.createSpatialReference=function(){return new i},e.prototype.addField=function(e,t){e.fields.push(a.fromJSON(t));var r=e.fields.map((function(e){return e.name}));this.AttributesConstructor=function(){for(var e=0,t=r;e<t.length;e++)this[t[e]]=null}},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(var n in t.attributes){var i=t.attributes[n];"string"==typeof i&&i.length>r&&(t.attributes[n]="")}e.features.push(t)},e.prototype.prepareFeatures=function(e){var t=this;switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=function(e,r,n,i){return t.addCoordinatePoint(e,r,i)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"polygon":this.addCoordinate=function(e,r,n,i){return t.addCoordinatePolygon(e,r,i)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"polyline":this.addCoordinate=function(e,r,n,i){return t.addCoordinatePolyline(e,r,i)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"multipoint":this.addCoordinate=function(e,r,n,i){return t.addCoordinateMultipoint(e,r,i)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:n.neverReached(e.geometryType)}},e.prototype.createFeature=function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,new o.DehydratedFeatureClass(r.generateUID(),null,new this.AttributesConstructor)},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},e.prototype.addCoordinatePoint=function(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)},e.prototype.addCoordinatePolygon=function(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var n=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r){if(null===this.coordinateBuffer){var n=this.lengths.reduce((function(e,t){return e+t}),0);this.coordinateBuffer=new Float64Array(n*this.vertexDimension)}0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var i=this.transformPathLikeValue(t,r),o=e[e.length-1];0===r&&o.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=i},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?f:t?l:r?c:p},e}();t.Context=g}.apply(null,n))||(e.exports=i)},331:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(200),r(178),r(274),r(304),r(224)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new o.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!n.equals(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var t=r.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference)/r.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==t)for(var i=0,o=e.features;i<o.length;i++){var a=o[i];if(a.geometry&&a.geometry.coords)for(var s=a.geometry.coords,u=2;u<s.length;u+=3)s[u]*=t}}},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new i.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new a.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new a.default},e}();t.Context=s}.apply(null,n))||(e.exports=i)},348:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(117),r(165),r(152),r(153),r(172),r(163),r(234),r(304),r(328),r(314),r(248),r(161)],void 0===(i=function(e,t,r,n,i,o,a,s,u,p,l,c,f){function h(e,t){var r=e.geometry,n=e.toJSON(),i=n;if(r&&(i.geometry=JSON.stringify(r),i.geometryType=s.getJsonType(r),i.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete i.outFields:-1!==n.outFields.indexOf("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?i.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.source&&(i.layer=JSON.stringify({source:n.source}),delete n.source),n.timeExtent){var o=n.timeExtent,a=o.start,u=o.end;null==a&&null==u||(i.time=a===u?a:(null==a?"null":a)+","+(null==u?"null":u)),delete n.timeExtent}return i}function d(e,t,o,s,p){void 0===s&&(s={});var l="string"==typeof e?a.urlToObject(e):e,f=t.geometry?[t.geometry]:[];return s.responseType="pbf"===o?"array-buffer":"json",u.normalizeCentralMeridian(f,null,s).then((function(e){var a=e&&e[0];i.isSome(a)&&((t=t.clone()).geometry=a);var u=c.mapParameters(r.__assign(r.__assign(r.__assign(r.__assign({},l.query),{f:o}),p),h(t,p)));return n(l.path+"/query",r.__assign(r.__assign({},s),{query:u}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.queryToQueryStringParameters=h,t.executeQuery=function(e,t,n,i){var o;return r.__awaiter(this,void 0,void 0,(function(){var a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(null===(o=t.timeExtent)||void 0===o?void 0:o.isEmpty)?(s={data:{features:[]}},[3,3]):[3,1];case 1:return[4,d(e,t,"json",i)];case 2:s=r.sent(),r.label=3;case 3:return a=s,f.applyFeatureSetZUnitScaling(t,n,a.data),[2,a]}}))}))},t.executeQueryPBF=function(e,t,r,n){var i;return(null===(i=t.timeExtent)||void 0===i?void 0:i.isEmpty)?o.resolve({data:new p.default}):d(e,t,"pbf",n).then((function(e){var t,n;return t=l.parsePBFFeatureQuery(e.data,r),(n=e).data=t,n}))},t.executeQueryForIds=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?o.resolve({data:{objectIds:[]}}):d(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?o.resolve({data:{count:0}}):d(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?o.resolve({data:{count:0,extent:null}}):d(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error("Layer does not support extent calculation.");if(t.hasOwnProperty("count"))throw new Error("Layer does not support extent calculation.");return e}))},t.runQuery=d}.apply(null,n))||(e.exports=i)}}]);
//# sourceMappingURL=62.js.map