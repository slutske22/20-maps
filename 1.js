(function(){var e={"esri/layers/FeatureLayer":222,"esri/tasks/operations/zscale":248,"esri/TimeInterval":350,"esri/renderers/support/styleUtils":387,"esri/layers/mixins/TemporalLayer":410,"esri/layers/support/TimeInfo":484,"esri/layers/support/TimeReference":525,"esri/layers/support/FeatureReduction":526,"esri/tasks/support/AttachmentQuery":527,"esri/form/elements/inputs/Input":580,"esri/layers/support/fieldProperties":583,"esri/tasks/support/RelationshipQuery":584,"esri/form/elements/Element":634,"esri/layers/support/FeatureReductionSelection":635,"esri/layers/support/FeatureReductionCluster":787,"esri/layers/support/labelingInfo":789,"esri/layers/support/AggregateField":897,"esri/layers/support/OutStatistic":898,"esri/layers/support/featureReductionUtils":900,"esri/form/support/elements":1138,"esri/form/elements/inputs/TextInput":1139,"esri/form/FormTemplate":1488,"esri/form/ExpressionInfo":1489,"esri/form/elements/AttachmentElement":1490,"esri/form/elements/inputs/AttachmentInput":1491,"esri/form/elements/FieldElement":1492,"esri/form/elements/support/inputs":1493,"esri/form/elements/inputs/BarcodeScannerInput":1494,"esri/form/elements/inputs/ComboBoxInput":1495,"esri/form/elements/inputs/DateTimePickerInput":1496,"esri/form/elements/inputs/RadioButtonsInput":1497,"esri/form/elements/inputs/TextAreaInput":1498,"esri/form/elements/inputs/TextBoxInput":1499,"esri/form/elements/GroupElement":1500,"esri/form/elements/RelationshipElement":1501,"esri/layers/graphics/sources/MemorySource":1502,"esri/layers/support/FeatureIndex":1513,"esri/layers/support/Relationship":1515},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[1,128],{1138:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(179),r(1490),r(634),r(1492),r(1500),r(1501)],void 0===(i=function(e,t,r,o,i,n,a,s){Object.defineProperty(t,"__esModule",{value:!0});var p={base:i.Element,key:"type",typeMap:{attachment:o,field:n,group:a,relationship:s}},l={base:p.base,key:p.key,typeMap:{attachment:p.typeMap.attachment,field:p.typeMap.field,relationship:p.typeMap.relationship}};t.fromJSON=function(e,t){if(void 0===t&&(t=!0),!e)return null;var r=t?p.typeMap:l.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return r[e.type].fromJSON(e)}))},t.toJSON=function(e,t){if(void 0===t&&(t=!0),!e)return null;var r=t?p.typeMap:l.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return e.toJSON()}))},t.ensureType=function(e,t){return void 0===t&&(t=!0),e?e.map((function(e){return r.ensureOneOfType(t?p:l,e)})):null}}.apply(null,o))||(e.exports=i)},1139:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(580)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.maxLength=null,r.minLength=null,r.type=null,r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({maxLength:this.maxLength,minLength:this.minLength,type:this.type})},r.__decorate([o.property({type:Number,json:{write:!0}})],t.prototype,"maxLength",void 0),r.__decorate([o.property({type:Number,json:{write:!0}})],t.prototype,"minLength",void 0),r.__decorate([o.property()],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.inputs.support.TextInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1488:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(118),r(151),r(760),r(1489),r(1138)],void 0===(i=function(e,t,r,o,i,n,a,s,p){return function(e){function t(t){var r=e.call(this,t)||this;return r.description=null,r.elements=null,r.expressionInfos=null,r.title=null,r}var o;return r.__extends(t,e),o=t,t.prototype.castElements=function(e){return p.ensureType(e)},t.prototype.readElements=function(e,t){return p.fromJSON(t.formElements)},t.prototype.writeElements=function(e,t){t.formElements=p.toJSON(e)},t.prototype.clone=function(){return new o({description:this.description,expressionInfos:i.clone(this.expressionInfos),elements:i.clone(this.elements),title:this.title})},r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),r.__decorate([n.property({json:{write:!0}})],t.prototype,"elements",void 0),r.__decorate([n.cast("elements")],t.prototype,"castElements",null),r.__decorate([a.reader("elements",["formElements"])],t.prototype,"readElements",null),r.__decorate([n.writer("elements")],t.prototype,"writeElements",null),r.__decorate([n.property({type:[s],json:{write:!0}})],t.prototype,"expressionInfos",void 0),r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),o=r.__decorate([n.subclass("esri.form.FormTemplate")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},1489:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.expression=null,r.name=null,r.returnType="boolean",r.title=null,r}var o;return r.__extends(t,e),o=t,t.prototype.clone=function(){return new o({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})},r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"expression",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([i.property({type:["boolean"],json:{write:!0}})],t.prototype,"returnType",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),o=r.__decorate([i.subclass("esri.form.ExpressionInfo")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},1490:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(634),r(1491)],void 0===(i=function(e,t,r,o,i,n){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentKeyword=null,r.editable=!0,r.input=null,r.type="attachment",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})},r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"attachmentKeyword",void 0),r.__decorate([o.property({type:Boolean,json:{default:!0,write:!0}})],t.prototype,"editable",void 0),r.__decorate([o.property({type:n,json:{read:{source:"inputType"},write:{target:"inputType"}}})],t.prototype,"input",void 0),r.__decorate([o.property({type:["attachment"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.AttachmentElement")],t)}(i.Element)}.apply(null,o))||(e.exports=i)},1491:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}var o;return r.__extends(t,e),o=t,t.prototype.clone=function(){return new o({type:this.type})},r.__decorate([i.property({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],t.prototype,"type",void 0),o=r.__decorate([i.subclass("esri.form.elements.inputs.AttachmentInput")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},1492:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(634),r(1493),r(622)],void 0===(i=function(e,t,r,o,i,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.domain=null,r.editable=!0,r.fieldName=null,r.hint=null,r.input=null,r.requiredExpression=null,r.type="field",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})},r.__decorate([o.property({types:a.types,json:{read:{reader:a.fromJSON},write:!0}})],t.prototype,"domain",void 0),r.__decorate([o.property({type:Boolean,json:{default:!0,write:!0}})],t.prototype,"editable",void 0),r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"fieldName",void 0),r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"hint",void 0),r.__decorate([o.property({types:n.types,json:{read:{source:"inputType"},write:{target:"inputType"}}})],t.prototype,"input",void 0),r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"requiredExpression",void 0),r.__decorate([o.property({type:String,json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.FieldElement")],t)}(i.Element)}.apply(null,o))||(e.exports=i)},1493:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(1494),r(1495),r(1496),r(580),r(1497),r(1498),r(1499)],void 0===(i=function(e,t,r,o,i,n,a,s,p){Object.defineProperty(t,"__esModule",{value:!0}),t.types={base:n,key:"type",typeMap:{"barcode-scanner":r,"combo-box":o,"datetime-picker":i,"radio-buttons":a,"text-area":s,"text-box":p}}}.apply(null,o))||(e.exports=i)},1494:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(580)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="barcode-scanner",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([o.property({type:["barcode-scanner"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.inputs.BarcodeScannerInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1495:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(580)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="combo-box",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([o.property({type:["combo-box"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.inputs.ComboBoxInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1496:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(580)],void 0===(i=function(e,t,r,o,i){function n(e){return null!=e?new Date(e):null}function a(e){return e?e.getTime():null}return function(e){function t(t){var r=e.call(this,t)||this;return r.includeTime=null,r.max=null,r.min=null,r.type="datetime-picker",r}var i;return r.__extends(t,e),i=t,t.prototype.readMax=function(e,t){return n(t.max)},t.prototype.writeMax=function(e,t){t.max=a(e)},t.prototype.readMin=function(e,t){return n(t.min)},t.prototype.writeMin=function(e,t){t.min=a(e)},t.prototype.clone=function(){return new i({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})},r.__decorate([o.property({type:Boolean,json:{write:!0}})],t.prototype,"includeTime",void 0),r.__decorate([o.property({type:Date,json:{type:Number,write:!0}})],t.prototype,"max",void 0),r.__decorate([o.reader("max")],t.prototype,"readMax",null),r.__decorate([o.writer("max")],t.prototype,"writeMax",null),r.__decorate([o.property({type:Date,json:{type:Number,write:!0}})],t.prototype,"min",void 0),r.__decorate([o.reader("min")],t.prototype,"readMin",null),r.__decorate([o.writer("min")],t.prototype,"writeMin",null),r.__decorate([o.property({type:["datetime-picker"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.inputs.DateTimePickerInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1497:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(580)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="radio-buttons",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([o.property({type:["radio-buttons"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.form.elements.inputs.RadioButtonsInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1498:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(1139)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="text-area",r}return r.__extends(t,e),r.__decorate([o.property({type:["text-area"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),r.__decorate([o.subclass("esri.form.elements.inputs.TextAreaInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1499:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(1139)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="text-box",r}return r.__extends(t,e),r.__decorate([o.property({type:["text-box"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),r.__decorate([o.subclass("esri.form.elements.inputs.TextBoxInput")],t)}(i)}.apply(null,o))||(e.exports=i)},1500:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(118),r(151),r(573),r(1096),r(634),r(1138)],void 0===(i=function(e,t,r,o,i,n,a,s,p){return function(e){function t(t){var r=e.call(this,t)||this;return r.elements=null,r.initialState="expanded",r.type="group",r}var s;return r.__extends(t,e),s=t,t.prototype.castElements=function(e){return p.ensureType(e,!1)},t.prototype.readElements=function(e,t){return p.fromJSON(t.formElements,!1)},t.prototype.writeElements=function(e,t){t.formElements=p.toJSON(e,!1)},t.prototype.clone=function(){return new s({description:this.description,elements:o.clone(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})},r.__decorate([i.property({json:{write:!0}})],t.prototype,"elements",void 0),r.__decorate([n.cast("elements")],t.prototype,"castElements",null),r.__decorate([i.reader("elements",["formElements"])],t.prototype,"readElements",null),r.__decorate([a.writer("elements")],t.prototype,"writeElements",null),r.__decorate([i.property({type:["collapsed","expanded"],json:{default:"expanded",write:!0}})],t.prototype,"initialState",void 0),r.__decorate([i.property({type:String,json:{read:!1,write:!0}})],t.prototype,"type",void 0),s=r.__decorate([i.subclass("esri.form.elements.GroupElement")],t)}(s.Element)}.apply(null,o))||(e.exports=i)},1501:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(118),r(151),r(634),r(1113)],void 0===(i=function(e,t,r,o,i,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.displayCount=null,r.displayType="list",r.editable=!0,r.orderByFields=null,r.relationshipId=null,r.type="relationship",r}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:o.clone(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})},r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"displayCount",void 0),r.__decorate([i.property({type:["list"],json:{write:!0}})],t.prototype,"displayType",void 0),r.__decorate([i.property({type:Boolean,json:{default:!0,write:!0}})],t.prototype,"editable",void 0),r.__decorate([i.property({type:[a],json:{write:!0}})],t.prototype,"orderByFields",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"relationshipId",void 0),r.__decorate([i.property({type:["relationship"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),n=r.__decorate([i.subclass("esri.form.elements.RelationshipElement")],t)}(n.Element)}.apply(null,o))||(e.exports=i)},1502:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(159),r(174),r(169),r(154),r(164),r(323),r(156),r(152),r(303),r(153),r(305),r(151),r(179),r(248),r(187)],void 0===(i=function(e,t,r,o,i,n,a,s,p,l,u,d,c,y,f,h,m,_){Object.defineProperty(t,"__esModule",{value:!0});var v=0,b=l.getLogger("esri.layers.graphics.sources.MemorySource"),g=function(e){function t(t){var r=e.call(this,t)||this;return r._idToClientGraphic=null,r.type="memory",r}return r.__extends(t,e),t.prototype.load=function(e){var t=u.isSome(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),c.resolve(this)},Object.defineProperty(t.prototype,"workerGeometryType",{get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null},enumerable:!0,configurable:!0}),t.prototype.applyEdits=function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))},t.prototype.openPorts=function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))},t.prototype.queryFeatures=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var o,i,n,a,s,p,l,u;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.load(t)];case 1:return r.sent(),[4,this._connection.invoke("queryFeatures",e?e.toJSON():null,t)];case 2:if(o=r.sent(),m.applyFeatureSetZUnitScaling(e,this.layer.spatialReference,o),i=_.fromJSON(o),!this._requiresClientGraphicMapping())return[2,i];for(n=this.layer.objectIdField,a=0,s=i.features;a<s.length;a++)p=s[a],l=p.attributes[n],(u=this._idToClientGraphic.get(l))&&(p.geometry=u.geometry);return i.geometryType=this.layer.geometryType,[2,i]}}))}))},t.prototype.queryFeaturesJSON=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var o;return r.__generator(this,(function(r){switch(r.label){case 0:return this._requiresClientGraphicMapping()?[2,c.reject(new a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)"))]:[4,this.load(t)];case 1:return r.sent(),[4,this._connection.invoke("queryFeatures",e?e.toJSON():null,t)];case 2:return o=r.sent(),m.applyFeatureSetZUnitScaling(e,this.layer.spatialReference,o),[2,o]}}))}))},t.prototype.queryFeatureCount=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then((function(){return r._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)}))},t.prototype.queryObjectIds=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then((function(){return r._connection.invoke("queryObjectIds",e?e.toJSON():null,t)}))},t.prototype.queryExtent=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then((function(){return r._connection.invoke("queryExtent",e?e.toJSON():null,t)})).then((function(e){return{count:e.count,extent:o.Extent.fromJSON(e.extent)}}))},t.prototype._applyEdits=function(e){var t=this;if(!this._connection)throw new a("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,o=null,i=[],n=[],s=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null};if(e.addFeatures&&(o=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(var p=0,l=e.deleteFeatures;p<l.length;p++)null!=(y=s(f=l[p]))&&i.push(y);var u=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(var d=0,c=e.updateFeatures;d<c.length;d++){var y,f=c[d];n.push(this._serializeFeature(f)),u&&null!=(y=s(f))&&u.set(y,f)}return m.unapplyEditsZUnitScaling(o?o.features:null,n,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:o?o.features:[],updates:n,deletes:i}).then((function(e){var r=e.fullExtent,i=e.featureEditResults;if(t.fullExtent=r,o&&o.finish(i.uidToObjectId),t._idToClientGraphic){if(u)for(var n=0,a=i.updateResults;n<a.length;n++){var s=a[n];if(s.success){var p=u.get(s.objectId);null!=p&&t._addIdToClientGraphic(p)}}for(var l=0,d=i.deleteResults;l<d.length;l++){var c=d[l];c.success&&t._idToClientGraphic.delete(c.objectId)}}return t._createEditsResult(i)}))},t.prototype._createEditsResult=function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}},t.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},t.prototype._prepareAddFeatures=function(e){for(var t=new Map,r=new Array(e.length),o=null,i=0;i<e.length;i++){var n=e[i],a=this._serializeFeature(n);!o&&u.isSome(n.geometry)&&(o=n.geometry.type),r[i]=a,t.set(""+a.uid,n)}var s=this;return{features:r,inferredGeometryType:o,finish:function(e){var r=s.sourceJSON.objectIdField;for(var o in e){var i=e[o],n=t.get(o);n&&(n.attributes||(n.attributes={}),-1===i?delete n.attributes[r]:n.attributes[r]=i,s._addIdToClientGraphic(n))}}}},t.prototype._addIdToClientGraphic=function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}},t.prototype._requiresClientGraphicMapping=function(){var e=this.layer.geometryType||this.sourceJSON.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)},t.prototype._geometryRequiresClientGraphicMapping=function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)},t.prototype._geometryTypeRequiresClientGraphicMapping=function(e){return"mesh"===e||"multipatch"===e||"extent"===e},t.prototype._serializeFeature=function(e){var t=e.attributes,r=this._geometryForSerialization(e),o=(v++).toString();return r?{uid:o,geometry:r.toJSON(),attributes:t}:{uid:o,attributes:t}},t.prototype._geometryForSerialization=function(e){var t=e.geometry;return u.isNone(t)?null:this._geometryRequiresClientGraphicMapping(t)?o.Polygon.fromExtent(t.extent):t},t.prototype._startWorker=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n,a,p,l,u,d,c,f,h,m,_,v,g,w;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this,[4,y.open("MemorySourceWorker",{strategy:s("esri-workers-for-memory-layers")?"dedicated":"local",signal:e})];case 1:return t._connection=r.sent(),i=this.layer,n=i.fields,a=i.spatialReference,p=i.objectIdField,l=i.hasM,u=i.hasZ,d=i.timeInfo,c="defaults"===this.layer.originOf("spatialReference"),f=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){b.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),h={features:f.features,fields:n&&n.map((function(e){return e.toJSON()})),geometryType:o.typeKebabDictionary.toJSON(this.workerGeometryType),hasM:l,hasZ:u,objectIdField:p,spatialReference:c?null:a&&a.toJSON(),timeInfo:d?d.toJSON():null},[4,this._connection.invoke("load",h,{signal:e})];case 2:for(m=r.sent(),_=0,v=m.warnings;_<v.length;_++)g=v[_],b.warn(g.message,{layer:this.layer,warning:g});return m.featureErrors.length&&b.warn("Encountered "+m.featureErrors.length+" validation errors while loading features",m.featureErrors),w=m.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(f.inferredGeometryType)&&(w.geometryType=o.typeKebabDictionary.toJSON(f.inferredGeometryType)),this.sourceJSON=w,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),f.finish(m.assignedObjectIds),[2]}}))}))},r.__decorate([f.shared({Type:i,ensureType:h.ensureType(i)})],t.prototype,"itemType",void 0),r.__decorate([f.property()],t.prototype,"type",void 0),r.__decorate([f.property({constructOnly:!0})],t.prototype,"layer",void 0),r.__decorate([f.property({readOnly:!0,dependsOn:["layer.geometryType"]})],t.prototype,"workerGeometryType",null),r.__decorate([f.property()],t.prototype,"sourceJSON",void 0),r.__decorate([f.subclass("esri.layers.graphics.sources.MemorySource")],t)}(p.LoadableMixin(d.EsriPromiseMixin(n)));t.MemorySource=g,t.default=g}.apply(null,o))||(e.exports=i)},1513:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t){return e.call(this,t)||this}var o;return r.__extends(t,e),o=t,t.prototype.clone=function(){var e=this,t=e.name,r=e.fields,i=e.isAscending,n=e.isUnique,a=e.description;return new o({name:t,fields:r,isAscending:i,isUnique:n,description:a})},r.__decorate([i.property({constructOnly:!0})],t.prototype,"name",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"fields",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"isAscending",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"isUnique",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"description",void 0),o=r.__decorate([i.subclass("esri.layers.support.FeatureIndex")],t)}(o.JSONSupport);t.FeatureIndex=n,t.default=n}.apply(null,o))||(e.exports=i)},1515:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(166),r(155),r(151)],void 0===(i=function(e,t,r,o,i,n){var a=new o.default({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),s=new o.default({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cardinality=null,r.composite=null,r.id=null,r.keyField=null,r.keyFieldInRelationshipTable=null,r.name=null,r.relatedTableId=null,r.relationshipTableId=null,r.role=null,r}return r.__extends(t,e),r.__decorate([n.property({json:{read:a.read,write:a.write}})],t.prototype,"cardinality",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"composite",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"id",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"keyField",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"keyFieldInRelationshipTable",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"name",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"relatedTableId",void 0),r.__decorate([n.property({json:{read:!0,write:!0}})],t.prototype,"relationshipTableId",void 0),r.__decorate([n.property({json:{read:s.read,write:s.write}})],t.prototype,"role",void 0),r.__decorate([n.subclass("esri.layers.support.Relationship")],t)}(i.JSONSupport)}.apply(null,o))||(e.exports=i)},222:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(297),r(481),r(165),r(239),r(169),r(154),r(167),r(164),r(166),r(156),r(152),r(225),r(119),r(153),r(172),r(151),r(1488),r(184),r(436),r(170),r(208),r(1502),r(339),r(244),r(240),r(298),r(265),r(410),r(324),r(233),r(1513),r(526),r(787),r(635),r(900),r(1140),r(901),r(583),r(255),r(191),r(437),r(789),r(790),r(1515),r(484),r(316),r(387),r(411),r(354),r(527),r(187),r(199),r(584),r(161)],void 0===(i=function(e,t,o,i,n,a,s,p,l,u,d,c,y,f,h,m,_,v,b,g,w,S,x,I,j,F,T,O,E,M,R,D,P,C,A,N,q,G,L,J,k,U,V,Q,z,B,Z,W,K,H,$,X,Y,ee,te,re){var oe=d("featurelayer-advanced-symbols")?"?returnAdvancedSymbols=true":"",ie=new c.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ne={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ae="FeatureLayer",se=y.getLogger("esri.layers.FeatureLayer");function pe(e){return e&&e instanceof p}function le(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function ue(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var de=k.defineFieldProperties();return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.apply(this,t)||this;return o._handles=new u,o.capabilities=null,o.copyright=null,o.displayField=null,o.definitionExpression=null,o.dynamicDataSource=null,o.editFieldsInfo=null,o.editingEnabled=!0,o.editingInfo=null,o.elevationInfo=null,o.featureReduction=null,o.fields=null,o.formTemplate=null,o.fullExtent=null,o.gdbVersion=null,o.geometryProperties=null,o.geometryType=null,o.hasM=void 0,o.hasZ=void 0,o.heightModelInfo=null,o.historicMoment=null,o.isTable=!1,o.labelsVisible=!0,o.labelingInfo=null,o.layerId=void 0,o.legendEnabled=!0,o.minScale=0,o.maxScale=0,o.globalIdField=null,o.objectIdField=null,o.outFields=null,o.path=null,o.popupEnabled=!0,o.popupTemplate=null,o.relationships=null,o.sourceJSON=null,o.returnM=void 0,o.returnZ=void 0,o.screenSizePerspectiveEnabled=!0,o.serviceDefinitionExpression=null,o.spatialReference=x.WGS84,o.templates=null,o.timeInfo=null,o.title=null,o.sublayerTitleMode="item-title",o.trackIdField=null,o.type="feature",o.typeIdField=null,o.types=null,o.indexes=new(p.ofType(C.FeatureIndex)),o.userIsAdmin=!1,o.version=void 0,o.visible=!0,o}return o.__extends(t,e),t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?o.__assign({url:e},t):e},t.prototype.load=function(e){var t=this,r=f.isSome(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((function(e){return e})).then((function(){return o.__awaiter(t,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(o){switch(o.label){case 0:return this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)?[4,this._fetchFirstLayerId(r)]:[3,2];case 1:null!=(e=o.sent())&&(this.layerId=e),o.label=2;case 2:if(!this.url&&!this._hasMemorySource())throw new l("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return t=this._initLayerProperties,[4,this.createGraphicsSource(r)];case 3:return[2,t.apply(this,[o.sent()])]}}))}))}));return this.addResolvingPromise(i),_.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))},t.prototype.readCapabilities=function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}},Object.defineProperty(t.prototype,"createQueryVersion",{get:function(){return this.definitionExpression,this.timeExtent,this.timeOffset,this.geometryType,this.gdbVersion,this.historicMoment,this.returnZ,this.capabilities,this.returnM,(this._get("createQueryVersion")||0)+1},enumerable:!0,configurable:!0}),t.prototype.readEditingEnabled=function(e,t){return!t.layerDefinition||"Query"!==t.layerDefinition.capabilities},t.prototype.writeEditingEnabled=function(e,t){e||m.setDeepValue("layerDefinition.capabilities","Query",t)},t.prototype.readEditingInfo=function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null},t.prototype.readFeatureReduction=function(e,t){return G.read(e,t)},t.prototype.writeWebSceneFeatureReduction=function(e,t,r,o){G.writeTarget(e,t,"layerDefinition.featureReduction",o)},Object.defineProperty(t.prototype,"fieldsIndex",{get:function(){return new U(this.fields||[])},enumerable:!0,configurable:!0}),t.prototype.readIsTable=function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type},Object.defineProperty(t.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.effectiveMinScale||e||0},t.prototype.readMaxScale=function(e,t){return t.effectiveMaxScale||e||0},t.prototype.readGlobalIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(var r=0,o=t.fields;r<o.length;r++){var i=o[r];if("esriFieldTypeGlobalID"===i.type)return i.name}},t.prototype.readObjectIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(var r=0,o=t.fields;r<o.length;r++){var i=o[r];if("esriFieldTypeOID"===i.type)return i.name}},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this.url?v.urlToObject(this.url):null;if(null!=e)if(null!=this.layerId)e.path=v.join(e.path,this.layerId.toString())+oe;else if(null!=this.dynamicDataSource){var t={source:B.sourceToJSON(this.dynamicDataSource)};e.query={layer:JSON.stringify(t)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){V.fixRendererFields(e,this.fields),this._set("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var o,i,a=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(a)(o=K.read(a,t,r)||void 0)||se.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r});else if(t.defaultSymbol)X.read(t.defaultSymbol,t,r),t.types&&t.types.length?(o=new n.UniqueValueRenderer({defaultSymbol:i,field:t.typeIdField}),t.types.forEach((function(e){a.addUniqueValueInfo(e.id,X.read(e.symbol,e,r))}))):o=new n.SimpleRenderer({symbol:i});else if("Table"!==t.type){switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":i=new s.SimpleMarkerSymbol;break;case"esriGeometryPolyline":i=new s.SimpleLineSymbol;break;case"esriGeometryPolygon":i=new s.SimpleFillSymbol}o=i&&new n.SimpleRenderer({symbol:i})}return o},t.prototype.writeRenderer=function(e,t,r,o){K.writeTarget(e,t,r,o)},t.prototype.writeWebSceneRenderer=function(e,t,r,o){K.writeTarget(e,t,"layerDefinition.drawingInfo.renderer",o)},Object.defineProperty(t.prototype,"source",{set:function(e){var t=this._get("source");t!==e&&(pe(t)&&this._resetMemorySource(t),pe(e)&&this._initMemorySource(e),this._set("source",e))},enumerable:!0,configurable:!0}),t.prototype.castSource=function(e){return e?Array.isArray(e)||e instanceof p?new j.default({layer:this,items:e}):e:null},t.prototype.readSource=function(e,t){var r=ee.fromJSON(t.featureSet);return new j.default({layer:this,items:r&&r.features||[]})},t.prototype.readServiceDefinitionExpression=function(e,t){return t.definitionQuery||t.definitionExpression},t.prototype.readTemplates=function(e,t){var r=t.editFieldsInfo,o=r&&r.creatorField,i=r&&r.editorField;return e=e&&e.map((function(e){return L.fromJSON(e)})),this._fixTemplates(e,o),this._fixTemplates(e,i),e},t.prototype.readTitle=function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,o=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var i=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?D.titleFromUrlAndName(this.url,r):r;var n=r||this.url&&D.parse(this.url).title;if(!n)return;return"item-title-and-service-name"===this.sublayerTitleMode&&i&&i!==n&&(n=i+" - "+n),D.cleanTitle(n)}if("item-title"===this.sublayerTitleMode&&o)return o},t.prototype.readTitleFromWebMap=function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name},t.prototype.readTypeIdField=function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r){var o=V.getField(t.fields,r);o&&(r=o.name)}return r},t.prototype.readTypes=function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var o=t.editFieldsInfo,i=o&&o.creatorField,n=o&&o.editorField;return e&&e.map((function(e){return e=J.fromJSON(e),r._fixTemplates(e.templates,i),r._fixTemplates(e.templates,n),e}))},Object.defineProperty(t.prototype,"url",{set:function(e){var t=D.sanitizeUrlWithLayerId(this,e,se);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t,r,o){D.writeUrlWithLayerId(this,e,null,t,o)},t.prototype.readVersion=function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3},t.prototype.readVisible=function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0},t.prototype.addAttachment=function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new l(ae,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))},t.prototype.updateAttachment=function(e,t,r){var o=this;return this.load().then((function(){return o._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in o.source))throw new l(ae,"Layer source does not support updateAttachment capability");return o.source.updateAttachment(e,t,r)}))},t.prototype.applyEdits=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(e,t){r.e(109).then(function(){var t=[r(2022)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,o.sent().applyEdits(this,e,t)]}}))}))},t.prototype.on=function(t,r){return e.prototype.on.call(this,t,r)},t.prototype.createPopupTemplate=function(e){return $.createPopupTemplate(this,e)},t.prototype.createGraphicsSource=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,i;return o.__generator(this,(function(o){switch(o.label){case 0:return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),[2,this.source.load({signal:e})]):[4,new Promise((function(e,t){Promise.all([r.e(9),r.e(130)]).then(function(){var t=[r(2023)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return t=o.sent(),_.throwIfAborted(e),[4,new t.default({layer:this}).load({signal:e})];case 2:return i=o.sent(),this.emit("graphics-source-create",{graphicsSource:i}),[2,i]}}))}))},t.prototype.createQuery=function(){var e=new te,t=this.get("capabilities.data");e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,o=this.timeExtent;return e.timeExtent=null!=r&&null!=o?o.offset(-r.value,r.unit):o||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new l(ae,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))},t.prototype.getFeatureType=function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var o=e.attributes?e.attributes[t]:void 0;if(null==o)return null;var i=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===o.toString()&&(i=e),!!i)})),i},t.prototype.getFieldDomain=function(e,t){var r=t&&t.feature,o=this.getFeatureType(r);if(o){var i=o.domains&&o.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)},t.prototype.getField=function(e){return this.fieldsIndex.get(e)},t.prototype.queryAttachments=function(e,t){var r=this;return e=Y.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new l(ae,"this layer doesn't support attachments");var t=e.attachmentTypes,o=e.objectIds,i=e.globalIds,n=e.num,a=e.size,s=e.start,p=e.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var u=o&&o.length>1,d=t&&t.length,c=i&&i.length,y=a&&a.length;if(u||d||c||y||n||s||p)throw new l(ae,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(o&&o.length||p))throw new l(ae,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new l(ae,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(te.from(e)||r.createQuery(),t)})).then((function(e){if(e&&e.features)for(var t=0,o=e.features;t<o.length;t++){var i=o[t];i.layer=i.sourceLayer=r}return e}))},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(te.from(e)||r.createQuery(),t);throw new l(ae,"Layer source does not support queryObjectIds capability")}))},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(te.from(e)||r.createQuery(),t);throw new l(ae,"Layer source does not support queryFeatureCount capability")}))},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(te.from(e)||r.createQuery(),t);throw new l(ae,"Layer source does not support queryExtent capability")}))},t.prototype.queryRelatedFeatures=function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(re.from(e),t);throw new l(ae,"Layer source does not support queryRelatedFeatures capability")}))},t.prototype.read=function(t,r){var o=t.featureCollection;if(o){var i=o.layers;i&&1===i.length&&(e.prototype.read.call(this,i[0],r),null!=o.showLegend&&e.prototype.read.call(this,{showLegend:o.showLegend},r))}e.prototype.read.call(this,t,r),r&&"service"===r.origin&&this.revert(["objectIdField","fields","timeInfo"],"service")},t.prototype.write=function(t,r){return r&&("web-scene"===r.origin||"web-map"===r.origin)&&r.messages&&this.isTable?(r.messages.push(new l("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes and web maps",{layer:this})),null):e.prototype.write.call(this,t,r)},t.prototype._checkAttachmentSupport=function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:_.reject(new l(ae,"feature is missing the identifying attribute "+r)):_.reject(new l(ae,"'attributes' are required on a feature to query attachments")):_.reject(new l(ae,"A feature is required to add/delete/update attachments")):_.reject(new l(ae,"this layer doesn't support attachments"))},t.prototype._getLayerDomain=function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null},t.prototype._fetchFirstLayerId=function(e){return a(this.url,{query:{f:"json"},responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))},t.prototype._initLayerProperties=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),V.fixRendererFields(this.renderer,this.fields),V.fixTimeInfoFields(this.timeInfo,this.fields),[2,H.loadStyleRenderer(this,{origin:"service"})]}))}))},t.prototype._verifyFields=function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")},t.prototype._fixTemplates=function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))},t.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new l("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new l("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")},t.prototype._initMemorySource=function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")},t.prototype._resetMemorySource=function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")},t.prototype._hasMemorySource=function(){return!(this.url||!this.source)},t.prototype._readAttachmentCapabilities=function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=ne[e.name];r&&(t[r]=!!e.isEnabled)})),t},t.prototype._readDataCapabilities=function(e){return{isVersioned:le(e,"isDataVersioned",!1),supportsAttachment:le(e,"hasAttachments",!1),supportsM:le(e,"hasM",!1),supportsZ:le(e,"hasZ",!1)}},t.prototype._readMetadataCapabilities=function(e){return{supportsAdvancedFieldProperties:le(e,"supportsFieldDescriptionProperty",!1)}},t.prototype._readOperationsCapabilities=function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],o=-1!==r.indexOf("editing"),i=o&&-1!==r.indexOf("create"),n=o&&-1!==r.indexOf("delete"),a=o&&-1!==r.indexOf("update");return o&&!(i||n||a)&&(i=n=a=!0),{supportsCalculate:le(t,"supportsCalculate",!1),supportsTruncate:le(t,"supportsTruncate",!1),supportsValidateSql:le(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:n,supportsEditing:o,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:le(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:le(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==r.indexOf("sync"),supportsUpdate:a,supportsExceedsLimitStatistics:le(t,"supportsExceedsLimitStatistics",!1)}},t.prototype._readQueryCapabilities=function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,o=e.archivingInfo,i=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:le(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:le(t,"supportsPercentileStatistics",!1),supportsCentroid:le(t,"supportsReturningGeometryCentroid",!1),supportsDistance:le(t,"supportsQueryWithDistance",!1),supportsDistinct:le(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:le(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:le(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:le(t,"supportsHavingClause",!1),supportsOrderBy:le(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:le(t,"supportsPagination",!1),supportsQuantization:le(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:le(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:le(e,"supportsReturningQueryGeometry",!1),supportsResultType:le(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:le(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:le(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:le(e,"useStandardizedQueries",!1),supportsQueryByOthers:le(r,"allowOthersToQuery",!0),supportsHistoricMoment:le(o,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:i.has("pbf"),supportsDisjointSpatialRelationship:le(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:le(t,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:ue(e,"maxRecordCountFactor",void 0),maxRecordCount:ue(e,"maxRecordCount",void 0),standardMaxRecordCount:ue(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:ue(e,"tileMaxRecordCount",void 0)}},t.prototype._readQueryRelatedCapabilities=function(e){var t=e.advancedQueryCapabilities,r=le(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:le(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}},t.prototype._readEditingCapabilities=function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:le(e,"allowGeometryUpdates",!0),supportsGlobalId:le(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:le(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:le(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:le(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:le(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:le(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:le(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:le(t,"allowOthersToUpdate",!0)}},o.__decorate([b.property({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),o.__decorate([b.reader("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],t.prototype,"readCapabilities",null),o.__decorate([b.property({readOnly:!0,dependsOn:["definitionExpression","timeExtent","timeOffset","geometryType","gdbVersion","historicMoment","returnZ","capabilities","returnM"]})],t.prototype,"createQueryVersion",null),o.__decorate([b.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),o.__decorate([b.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),o.__decorate([b.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),o.__decorate([b.property({readOnly:!0,json:{read:X.read}})],t.prototype,"defaultSymbol",void 0),o.__decorate([b.property()],t.prototype,"dynamicDataSource",void 0),o.__decorate([b.property({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),o.__decorate([b.property({type:Boolean})],t.prototype,"editingEnabled",void 0),o.__decorate([b.reader(["portal-item","web-map","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],t.prototype,"readEditingEnabled",null),o.__decorate([b.writer(["portal-item","web-map","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],t.prototype,"writeEditingEnabled",null),o.__decorate([b.property({readOnly:!0})],t.prototype,"editingInfo",void 0),o.__decorate([b.reader("editingInfo")],t.prototype,"readEditingInfo",null),o.__decorate([b.property(P.elevationInfo)],t.prototype,"elevationInfo",void 0),o.__decorate([b.property({types:{key:"type",base:A.default,typeMap:{selection:q,cluster:N}},json:{write:{target:"layerDefinition.featureReduction"}}})],t.prototype,"featureReduction",void 0),o.__decorate([b.reader("featureReduction",["layerDefinition.featureReduction"])],t.prototype,"readFeatureReduction",null),o.__decorate([b.writer("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:G.webSceneFeatureReductionTypes}})],t.prototype,"writeWebSceneFeatureReduction",null),o.__decorate([b.property(o.__assign(o.__assign({},de.fields),{json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}}))],t.prototype,"fields",void 0),o.__decorate([b.property({readOnly:!0,dependsOn:["fields"]})],t.prototype,"fieldsIndex",null),o.__decorate([b.property({type:g,json:{read:{source:"formInfo"},write:{target:"formInfo"}}})],t.prototype,"formTemplate",void 0),o.__decorate([b.property({type:w,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0),o.__decorate([b.property()],t.prototype,"gdbVersion",void 0),o.__decorate([b.property({readOnly:!0})],t.prototype,"geometryProperties",void 0),o.__decorate([b.property({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ie.read}},read:{source:"layerDefinition.geometryType",reader:ie.read}}})],t.prototype,"geometryType",void 0),o.__decorate([b.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],t.prototype,"hasM",void 0),o.__decorate([b.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],t.prototype,"hasZ",void 0),o.__decorate([b.property({readOnly:!0,type:S})],t.prototype,"heightModelInfo",void 0),o.__decorate([b.property({type:Date})],t.prototype,"historicMoment",void 0),o.__decorate([b.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),o.__decorate([b.property({readOnly:!0})],t.prototype,"isTable",void 0),o.__decorate([b.reader("service","isTable",["type"]),b.reader("isTable",["layerDefinition.type"])],t.prototype,"readIsTable",null),o.__decorate([b.property({dependsOn:["loaded","url","source"],readOnly:!0})],t.prototype,"hasService",null),o.__decorate([b.property(P.labelsVisible)],t.prototype,"labelsVisible",void 0),o.__decorate([b.property({type:[Q],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:z.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:z.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),o.__decorate([b.property(P.opacityDrawingInfo)],t.prototype,"opacity",void 0),o.__decorate([b.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],t.prototype,"layerId",void 0),o.__decorate([b.property(P.legendEnabled)],t.prototype,"legendEnabled",void 0),o.__decorate([b.property({type:["show","hide"]})],t.prototype,"listMode",void 0),o.__decorate([b.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],t.prototype,"minScale",void 0),o.__decorate([b.reader("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),o.__decorate([b.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],t.prototype,"maxScale",void 0),o.__decorate([b.reader("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),o.__decorate([b.property({type:String})],t.prototype,"globalIdField",void 0),o.__decorate([b.reader("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),b.reader("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),o.__decorate([b.property({type:String})],t.prototype,"objectIdField",void 0),o.__decorate([b.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),b.reader("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),o.__decorate([b.property({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],t.prototype,"operationalLayerType",void 0),o.__decorate([b.property(de.outFields)],t.prototype,"outFields",void 0),o.__decorate([b.property({readOnly:!0,dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),o.__decorate([b.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),o.__decorate([b.property(P.popupEnabled)],t.prototype,"popupEnabled",void 0),o.__decorate([b.property({type:i,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),o.__decorate([b.property({readOnly:!0,dependsOn:["fields","title"]})],t.prototype,"defaultPopupTemplate",null),o.__decorate([b.property({type:[Z],readOnly:!0})],t.prototype,"relationships",void 0),o.__decorate([b.property({types:n.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),o.__decorate([b.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),b.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],t.prototype,"readRenderer",null),o.__decorate([b.writer("renderer")],t.prototype,"writeRenderer",null),o.__decorate([b.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:n.webSceneRendererTypes}})],t.prototype,"writeWebSceneRenderer",null),o.__decorate([b.property()],t.prototype,"sourceJSON",void 0),o.__decorate([b.property({type:Boolean})],t.prototype,"returnM",void 0),o.__decorate([b.property({type:Boolean})],t.prototype,"returnZ",void 0),o.__decorate([b.property(P.screenSizePerspectiveEnabled)],t.prototype,"screenSizePerspectiveEnabled",void 0),o.__decorate([b.property()],t.prototype,"source",null),o.__decorate([b.cast("source")],t.prototype,"castSource",null),o.__decorate([b.reader("portal-item","source",["featureSet"]),b.reader("web-map","source",["featureSet"])],t.prototype,"readSource",null),o.__decorate([b.property({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),o.__decorate([b.reader("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),o.__decorate([b.property({type:x,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],t.prototype,"spatialReference",void 0),o.__decorate([b.property({type:[L]})],t.prototype,"templates",void 0),o.__decorate([b.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],t.prototype,"readTemplates",null),o.__decorate([b.property({type:W})],t.prototype,"timeInfo",void 0),o.__decorate([b.property()],t.prototype,"title",void 0),o.__decorate([b.reader("service","title",["name"]),b.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],t.prototype,"readTitle",null),o.__decorate([b.reader("web-map","title",["layerDefinition.name","title"])],t.prototype,"readTitleFromWebMap",null),o.__decorate([b.property({type:String})],t.prototype,"sublayerTitleMode",void 0),o.__decorate([b.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),o.__decorate([b.property({json:{read:!1}})],t.prototype,"type",void 0),o.__decorate([b.property({type:String})],t.prototype,"typeIdField",void 0),o.__decorate([b.reader("service","typeIdField"),b.reader("typeIdField",["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null),o.__decorate([b.property({type:[J]})],t.prototype,"types",void 0),o.__decorate([b.reader("service","types",["types"]),b.reader("types",["layerDefinition.types"])],t.prototype,"readTypes",null),o.__decorate([b.property({type:p.ofType(C.FeatureIndex),readOnly:!0})],t.prototype,"indexes",void 0),o.__decorate([b.property(P.url)],t.prototype,"url",null),o.__decorate([b.writer("url")],t.prototype,"writeUrl",null),o.__decorate([b.property({readOnly:!0})],t.prototype,"userIsAdmin",void 0),o.__decorate([b.property({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),o.__decorate([b.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),o.__decorate([b.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],t.prototype,"visible",void 0),o.__decorate([b.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],t.prototype,"readVisible",null),o.__decorate([b.subclass("esri.layers.FeatureLayer")],t)}(R.TemporalLayer(M.ScaleRangeLayer(E.RefreshableLayer(F.ArcGISService(T.OperationalLayer(O.PortalLayer(h.MultiOriginJSONMixin(I))))))))}.apply(null,o))||(e.exports=i)},248:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(200),r(178)],void 0===(i=function(e,t,r,o){function i(e,t,i){if(!t||!i||i.vcsWkid||o.equals(t,i))return null;var n=r.getMetersPerVerticalUnitForSR(t)/r.getMetersPerVerticalUnitForSR(i);if(1===n)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return r=n,void((t=e)&&null!=t.z&&(t.z*=r));var t,r};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e)for(var r=0,o=e.paths;r<o.length;r++)for(var i=0,n=o[r];i<n.length;i++){var a=n[i];a.length>2&&(a[2]*=t)}}(e,n)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e)for(var r=0,o=e.rings;r<o.length;r++)for(var i=0,n=o[r];i<n.length;i++){var a=n[i];a.length>2&&(a[2]*=t)}}(e,n)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e)for(var r=0,o=e.points;r<o.length;r++){var i=o[r];i.length>2&&(i[2]*=t)}}(e,n)};default:return null}}function n(e,t,r){if(null==e.hasM||e.hasZ)for(var o=0,i=t;o<i.length;o++)for(var n=0,a=i[o];n<a.length;n++){var s=a[n];s.length>2&&(s[2]*=r)}}function a(e,t,r){if(e)for(var o=0,i=e;o<i.length;o++)s(i[o].geometry,t,r)}function s(e,t,i){if(e&&e.spatialReference&&!o.equals(e.spatialReference,t)){var a=r.getMetersPerVerticalUnitForSR(e.spatialReference)/i;if(1!==a)if("x"in e)null!=e.z&&(e.z*=a);else if("rings"in e)n(e,e.rings,a);else if("paths"in e)n(e,e.paths,a);else if("points"in e&&(null==e.hasM||e.hasZ))for(var s=0,p=e.points;s<p.length;s++){var l=p[s];l.length>2&&(l[2]*=a)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getGeometryZScaler=i,t.applyFeatureSetZUnitScaling=function(e,t,r){if(r&&r.features&&r.hasZ){var o=i(r.geometryType,t,e.outSpatialReference);if(o)for(var n=0,a=r.features;n<a.length;n++)o(a[n].geometry)}},t.unapplyEditsZUnitScaling=function(e,t,o){if((e||t)&&o){var i=r.getMetersPerVerticalUnitForSR(o);a(e,o,i),a(t,o,i)}}}.apply(null,o))||(e.exports=i)},350:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151),r(235)],void 0===(i=function(e,t,r,o,i,n){return function(e){function t(t){var r=e.call(this,t)||this;return r.value=0,r.unit="milliseconds",r}var o;return r.__extends(t,e),o=t,t.prototype.toMilliseconds=function(){return this.value*n.millisecondsPerTimeUnit[this.unit]},t.prototype.clone=function(){return new o({value:this.value,unit:this.unit})},r.__decorate([i.property({type:Number,json:{write:!0},nonNullable:!0})],t.prototype,"value",void 0),r.__decorate([i.property({type:n.timeUnitKebabDictionary.apiValues,json:{type:n.timeUnitKebabDictionary.jsonValues,read:n.timeUnitKebabDictionary.read,write:n.timeUnitKebabDictionary.write},nonNullable:!0})],t.prototype,"unit",void 0),o=r.__decorate([i.subclass("esri.TimeInterval")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},387:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(226),r(153),r(264)],void 0===(i=function(e,t,r,o,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyleRenderer=function(e,t,a){return r.__awaiter(this,void 0,void 0,(function(){var s,p,l;return r.__generator(this,(function(r){switch(r.label){case 0:return(s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin))&&"unique-value"===s.type&&s.styleOrigin?[4,o.result(s.populateFromStyle())]:[3,2];case 1:p=r.sent(),i.throwIfAborted(a),!1===p.ok&&(l=p.error,t&&t.messages&&t.messages.push(new n("renderer:style-reference","Failed to create unique value renderer from style reference: "+l.message,{error:l,context:t})),e.clear("renderer",t.origin)),r.label=2;case 2:return[2]}}))}))}}.apply(null,o))||(e.exports=i)},410:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(282),r(350),r(151),r(484),r(191),r(235)],void 0===(i=function(e,t,r,o,i,n,a,s,p){Object.defineProperty(t,"__esModule",{value:!0}),t.TemporalLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeExtent=null,t.timeOffset=null,t.useViewTime=!0,t}return r.__extends(t,e),t.prototype.readOffset=function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var o=r.timeOffset,n=p.timeUnitKebabDictionary.fromJSON(r.timeOffsetUnits);return o&&n?new i({value:o,unit:n}):null},Object.defineProperty(t.prototype,"timeInfo",{set:function(e){s.fixTimeInfoFields(e,this.fields),this._set("timeInfo",e)},enumerable:!0,configurable:!0}),r.__decorate([n.property({type:o,json:{write:!1}})],t.prototype,"timeExtent",void 0),r.__decorate([n.property({type:i})],t.prototype,"timeOffset",void 0),r.__decorate([n.reader("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),r.__decorate([n.property({value:null,type:a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),r.__decorate([n.property({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),r.__decorate([n.subclass("esri.layers.mixins.TemporalLayer")],t)}(e)}}.apply(null,o))||(e.exports=i)},484:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(282),r(350),r(155),r(118),r(151),r(525),r(235)],void 0===(i=function(e,t,r,o,i,n,a,s,p,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.cumulative=!1,r.endField=null,r.fullTimeExtent=null,r.hasLiveData=!1,r.interval=null,r.startField=null,r.timeReference=null,r.trackIdField=null,r.useTime=!0,r}var n;return r.__extends(t,e),n=t,t.prototype.readFullTimeExtent=function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=t.timeExtent[0],i=t.timeExtent[1];return new o({start:r,end:i})},t.prototype.writeFullTimeExtent=function(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null},t.prototype.readInterval=function(e,t){return t.timeInterval&&t.timeIntervalUnits?new i({value:t.timeInterval,unit:l.timeUnitKebabDictionary.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new i({value:t.defaultTimeInterval,unit:l.timeUnitKebabDictionary.fromJSON(t.defaultTimeIntervalUnits)}):null},t.prototype.writeInterval=function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null},t.prototype.clone=function(){var e=this,t=e.cumulative,r=e.endField,o=e.hasLiveData,i=e.interval,s=e.startField,p=e.timeReference,l=e.fullTimeExtent,u=e.trackIdField,d=e.useTime;return new n({cumulative:t,endField:r,hasLiveData:o,interval:i,startField:s,timeReference:a.clone(p),fullTimeExtent:a.clone(l),trackIdField:u,useTime:d})},r.__decorate([s.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],t.prototype,"cumulative",void 0),r.__decorate([s.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],t.prototype,"endField",void 0),r.__decorate([s.property({type:o,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"fullTimeExtent",void 0),r.__decorate([s.reader("fullTimeExtent",["timeExtent"])],t.prototype,"readFullTimeExtent",null),r.__decorate([s.writer("fullTimeExtent")],t.prototype,"writeFullTimeExtent",null),r.__decorate([s.property({type:Boolean,json:{write:!0}})],t.prototype,"hasLiveData",void 0),r.__decorate([s.property({type:i,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"interval",void 0),r.__decorate([s.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],t.prototype,"readInterval",null),r.__decorate([s.writer("interval")],t.prototype,"writeInterval",null),r.__decorate([s.property({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],t.prototype,"startField",void 0),r.__decorate([s.property({type:p,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"timeReference",void 0),r.__decorate([s.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"trackIdField",void 0),r.__decorate([s.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],t.prototype,"useTime",void 0),n=r.__decorate([s.subclass("esri.layers.support.TimeInfo")],t)}(n.JSONSupport)}.apply(null,o))||(e.exports=i)},525:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.respectsDaylightSaving=!1,r.timezone=null,r}var o;return r.__extends(t,e),o=t,t.prototype.readRespectsDaylightSaving=function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving},t.prototype.clone=function(){var e=this.respectsDaylightSaving,t=this.timezone;return new o({respectsDaylightSaving:e,timezone:t})},r.__decorate([i.property({type:Boolean,json:{write:!0}})],t.prototype,"respectsDaylightSaving",void 0),r.__decorate([i.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],t.prototype,"readRespectsDaylightSaving",null),r.__decorate([i.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],t.prototype,"timezone",void 0),o=r.__decorate([i.subclass("esri.layers.support.TimeReference")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},526:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return r.__extends(t,e),r.__decorate([i.property({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),r.__decorate([i.subclass("esri.layers.support.FeatureReduction")],t)}(o.JSONSupport);t.FeatureReduction=n,t.default=n}.apply(null,o))||(e.exports=i)},527:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(118),r(151),r(179)],void 0===(i=function(e,t,r,o,i,n,a){var s=function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.attachmentsWhere=null,r.keywords=null,r.globalIds=null,r.name=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}var o;return r.__extends(t,e),o=t,t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new o(i.clone({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))},r.__decorate([n.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),r.__decorate([n.property({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],t.prototype,"attachmentsWhere",void 0),r.__decorate([n.property({type:[String],json:{write:!0}})],t.prototype,"keywords",void 0),r.__decorate([n.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),r.__decorate([n.property({json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([n.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),r.__decorate([n.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnMetadata",void 0),r.__decorate([n.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),r.__decorate([n.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),r.__decorate([n.writer("start"),n.writer("num")],t.prototype,"writeStart",null),r.__decorate([n.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),o=r.__decorate([n.subclass("esri.tasks.support.AttachmentQuery")],t)}(o.JSONSupport);return s.from=a.default(s),s}.apply(null,o))||(e.exports=i)},580:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}return r.__extends(t,e),r.__decorate([i.property()],t.prototype,"type",void 0),r.__decorate([i.subclass("esri.form.elements.inputs.Input")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},583:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(296),r(156),r(194),r(191)],void 0===(i=function(e,t,r,o,i,n){Object.defineProperty(t,"__esModule",{value:!0});var a=o.getLogger("esri.layers.support.fieldProperties");t.defineFieldProperties=function(){return{fields:{type:[i],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(r.includes(e,"*"))return["*"];if(!this.fields)return e;for(var t=0,o=e;t<o.length;t++){var i=o[t];n.hasField(this.fields,i)||a.error("field-attributes-layer:invalid-field","Invalid field "+i+" found in outFields",{layer:this,outFields:e})}return n.fixFields(this.fields,e)}}}}}.apply(null,o))||(e.exports=i)},584:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(159),r(155),r(118),r(151),r(179)],void 0===(i=function(e,t,r,o,i,n,a,s){var p=function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.source=null,r.where=null,r}var i;return r.__extends(t,e),i=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new i(n.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))},r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),r.__decorate([a.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),r.__decorate([a.property({type:Date})],t.prototype,"historicMoment",void 0),r.__decorate([a.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),r.__decorate([a.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),r.__decorate([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r.__decorate([a.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),r.__decorate([a.property({type:o.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),r.__decorate([a.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),r.__decorate([a.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),r.__decorate([a.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnM",void 0),r.__decorate([a.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnZ",void 0),r.__decorate([a.property({json:{write:!0}})],t.prototype,"source",void 0),r.__decorate([a.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),i=r.__decorate([a.subclass("esri.tasks.support.RelationshipQuery")],t)}(i.JSONSupport);return p.from=s.default(p),p}.apply(null,o))||(e.exports=i)},634:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(515),r(1092)],void 0===(i=function(e,t,r,o,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.visibilityExpression=null,t}return r.__extends(t,e),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"visibilityExpression",void 0),r.__decorate([n.subclass("esri.form.elements.ElementMixin")],t)}(e)};var a=function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}return r.__extends(t,e),r.__decorate([i.property()],t.prototype,"type",void 0),r.__decorate([n.subclass("esri.form.elements.Element")],t)}(t.ElementMixin(o.JSONSupport));t.Element=a}.apply(null,o))||(e.exports=i)},635:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(151),r(526)],void 0===(i=function(e,t,r,o,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="selection",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([o.property({type:["selection"]})],t.prototype,"type",void 0),i=r.__decorate([o.subclass("esri.layers.support.FeatureReductionSelection")],t)}(i.default)}.apply(null,o))||(e.exports=i)},787:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(297),r(155),r(118),r(171),r(151),r(897),r(233),r(437)],void 0===(i=function(e,t,r,o,i,n,a,s,p,l,u){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="cluster",r.clusterRadius=a.toPt("80px"),r.clusterMinSize=a.toPt("12px"),r.clusterMaxSize=a.toPt("50px"),r.popupEnabled=!0,r.popupTemplate=null,r.labelingInfo=null,r.labelsVisible=!0,r.fields=null,r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:n.clone(this.labelingInfo),labelsVisible:this.labelsVisible,fields:n.clone(this.fields),popupEnabled:this.popupEnabled,popupTemplate:n.clone(this.popupTemplate)})},r.__decorate([s.property({type:["cluster"],readOnly:!0,json:{write:!0}})],t.prototype,"type",void 0),r.__decorate([s.property({type:Number,cast:function(e){return"auto"===e?e:a.toPt(e)},json:{write:!0}})],t.prototype,"clusterRadius",void 0),r.__decorate([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"clusterMinSize",void 0),r.__decorate([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"clusterMaxSize",void 0),r.__decorate([s.property(l.popupEnabled)],t.prototype,"popupEnabled",void 0),r.__decorate([s.property({type:o,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),r.__decorate([s.property({type:[u],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),r.__decorate([s.property(l.labelsVisible)],t.prototype,"labelsVisible",void 0),r.__decorate([s.property({type:[p],json:{write:!0}})],t.prototype,"fields",void 0),i=r.__decorate([s.subclass("esri.layers.support.FeatureReductionCluster")],t)}(i.JSONSupport)}.apply(null,o))||(e.exports=i)},789:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(437)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=/\[([^\[\]]+)\]/gi;t.reader=function(e,t,i){var n=this;return e?e.map((function(e){var a=new r;if(a.read(e,i),a.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||n.fields;a.labelExpression=a.labelExpression.replace(o,(function(e,t){return"["+function(e,t){if(!t)return e;for(var r=e.toLowerCase(),o=0;o<t.length;o++){var i=t[o].name;if(i.toLowerCase()===r)return i}return e}(t,s)+"]"}))}return a})):null}}.apply(null,o))||(e.exports=i)},897:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151),r(898)],void 0===(i=function(e,t,r,o,i,n){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=null,t}var o;return r.__extends(t,e),o=t,t.prototype.clone=function(){return new o({name:this.name,outStatistic:this.outStatistic.clone()})},r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([i.property({type:n,json:{write:!0}})],t.prototype,"outStatistic",void 0),o=r.__decorate([i.subclass("esri.layers.support.AggregateField")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},898:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(117),r(155),r(151)],void 0===(i=function(e,t,r,o,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.statisticType=null,t.onStatisticField=null,t.onStatisticValueExpression=null,t}var o;return r.__extends(t,e),o=t,t.prototype.clone=function(){return new o({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})},r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"statisticType",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"onStatisticField",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"onStatisticValueExpression",void 0),o=r.__decorate([i.subclass("esri.layers.support.OutStatistic")],t)}(o.JSONSupport)}.apply(null,o))||(e.exports=i)},900:function(e,t,r){var o,i;o=[r.dj.c(e.i),t,r(154),r(119),r(526),r(787),r(635)],void 0===(i=function(e,t,r,o,i,n,a){function s(e,t,o){return e?"selection"!==e.type?(o.messages&&o.messages.push(new r("featureReduction:unsupported","FeatureReduction of type '"+e.declaredClass+"' are not supported in scenes.",{featureReduction:e,context:o})),null):e.write(t,o):null}Object.defineProperty(t,"__esModule",{value:!0}),t.webSceneFeatureReductionTypes={key:"type",base:i.default,typeMap:{selection:a}},t.read=function(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return a.fromJSON(r);case"cluster":return n.fromJSON(r)}return null},t.writeTarget=function(e,t,r,i){var n=s(e,{},i);n&&o.setDeepValue(r,n,t)},t.write=s}.apply(null,o))||(e.exports=i)}}]);
//# sourceMappingURL=1.js.map