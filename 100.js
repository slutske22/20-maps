(function(){var e={"esri/widgets/LayerList/support/layerListUtils":294,"esri/widgets/LayerList/ListItem":347,"esri/widgets/LayerList":455,"esri/widgets/LayerList/LayerListViewModel":457,"esri/support/actions/ActionSlider":458,"esri/widgets/LayerList/ListItemPanel":459},t=this||window,i=t.webpackJsonp=t.webpackJsonp||[];i.registerAbsMids?i.registerAbsMids(e):(i.absMidsWaiting=i.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{294:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function i(e){if(e)return null!=e.listMode?e.listMode:void 0}function r(e){if(e)return null!=e.minScale?e.minScale:void 0}function n(e){if(e)return null!=e.maxScale?e.maxScale:void 0}function o(e){if(e&&"hide-children"!==e.listMode&&"wmts"!==e.type)return"group"===e.type?"layers":"sublayers"}function s(e,t){e&&e.sort((function(e,i){var r=t.indexOf(e.uid),n=t.indexOf(i.uid);return r>n?-1:r<n?1:0}))}t.findLayerListMode=i,t.findLayerMinScale=r,t.findLayerMaxScale=n,t.findLayerVisibilityMode=function(e){if(!e)return"inherited";var t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";var i=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof i?i?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"},t.getNormalizedChildLayerProperty=o,t.canSortSublayers=function(e){var t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;var i=t.get("capabilities.exportMap.supportsSublayersChanges");return"boolean"!=typeof i||i},t.canDisplayLayer=function(e){return"hide"!==i(e)},t.isLayerOutsideScaleRange=function(e,t){if(!e||isNaN(t))return!1;var i=r(e),o=n(e),s=!isNaN(i)&&i>0&&t>=i,a=!isNaN(o)&&o>0&&t<=o;return s||a},t.sortLayersToIds=s,t.sortChildLayersToIds=function(e,t){var i=null==e?void 0:e.layer;if(i){var r=o(i);r&&s(i.get(r),t)}},t.getItemLayers=function(e){var t=null==e?void 0:e.layer;return t&&"group"===t.type?t.layers:null},t.findSelectedItem=function(e,t){var i,r=null===(i=e.layer)||void 0===i?void 0:i.uid;return r&&t.find((function(e){var t;return(null===(t=e.layer)||void 0===t?void 0:t.uid)===r}))}}.apply(null,r))||(e.exports=n)},347:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(158),i(169),i(236),i(292),i(157),i(151),i(438),i(337),i(480),i(458),i(520),i(459),i(294)],void 0===(n=function(e,t,i,r,n,o,s,a,l,d,c,p,u,y,h,_){var v=n.ofType({key:"type",defaultKeyValue:"button",base:c,typeMap:{button:p,toggle:y,slider:u}}),g=n.ofType(v);return function(e){function t(t){var i=e.call(this,t)||this;return i.actionsSections=new g,i.actionsOpen=!1,i.children=new(n.ofType(r)),i.childrenSortable=!0,i.error=null,i.layer=null,i.layerView=null,i.open=!1,i.panel=null,i.parent=null,i.sortable=!0,i.view=null,i.visible=null,i}var r;return i.__extends(t,e),r=t,t.prototype.initialize=function(){var e=this;this.handles.add([a.init(this,"layer",(function(t){return e._watchLayerProperties(t)})),a.init(this,"view",(function(t){return e._updateChildren(t)})),a.init(this,"panel",(function(t){return e._setListItemOnPanel(t)})),a.init(this,["layer","view"],(function(){return e._getLayerView()}))])},t.prototype.destroy=function(){this.view=null},t.prototype.castPanel=function(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new h(e):null},Object.defineProperty(t.prototype,"title",{get:function(){var e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){var e=this.layerView;return e?e.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleAtCurrentScale",{get:function(){return!_.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibilityMode",{get:function(){return _.findLayerVisibilityMode(this.layer)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new r({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})},t.prototype._setListItemOnPanel=function(e){e&&(e.listItem=this)},t.prototype._updateChildren=function(e){var t=this.children;t&&t.forEach((function(t){return t.view=e}))},t.prototype._addChildren=function(e){var t=this;if(this.handles.remove("child-list-mode"),this.children.removeAll(),e){e.forEach((function(i){t.handles.add(a.watch(i,"listMode",(function(){return t._addChildren(e)})),"child-list-mode")}));var i=[];e.filter((function(e){return"hide"!==_.findLayerListMode(e)})).forEach((function(e){if(_.canDisplayLayer(e)){var n=new r({layer:e,parent:t,view:t.view});i.unshift(n)}})),this.children.addMany(i)}},t.prototype._watchSublayerChanges=function(e){var t=this;e&&this.handles.add(e.on("change",(function(){t._addChildren(e)})),"layer")},t.prototype._initializeChildLayers=function(e){this._addChildren(e),this._watchSublayerChanges(e)},t.prototype._watchLayerProperties=function(e){var t=this;if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),e))if(this.handles.add(a.watch(e,"listMode",(function(){return t._watchLayerProperties(e)})),"layer"),"hide-children"!==_.findLayerListMode(e)){var i=_.getNormalizedChildLayerProperty(e);i&&this.handles.add(a.init(e,i,(function(){e.hasOwnProperty(i)&&t._initializeChildLayers(e[i])})),"layer")}else this.children.removeAll()},t.prototype._getLayerView=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,t,r,n;return i.__generator(this,(function(i){switch(i.label){case 0:if(t=(e=this).layer,r=e.view,!t||!r)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.whenLayerView(t)];case 2:return(n=i.sent()).layer!==this.layer?[2]:(this._set("layerView",n),[3,4]);case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},t.prototype._isLayerUpdating=function(e){return!(e instanceof d)&&e&&"loading"===e.loadStatus},i.__decorate([l.property({type:g})],t.prototype,"actionsSections",void 0),i.__decorate([l.property()],t.prototype,"actionsOpen",void 0),i.__decorate([l.property({type:n})],t.prototype,"children",void 0),i.__decorate([l.property()],t.prototype,"childrenSortable",void 0),i.__decorate([l.aliasOf("layer.loadError?")],t.prototype,"error",void 0),i.__decorate([l.property()],t.prototype,"layer",void 0),i.__decorate([l.property({readOnly:!0})],t.prototype,"layerView",void 0),i.__decorate([l.property()],t.prototype,"open",void 0),i.__decorate([l.property({type:h})],t.prototype,"panel",void 0),i.__decorate([l.cast("panel")],t.prototype,"castPanel",null),i.__decorate([l.property()],t.prototype,"parent",void 0),i.__decorate([l.property()],t.prototype,"sortable",void 0),i.__decorate([l.property({dependsOn:["layer.layer?.loaded","layer.title"]})],t.prototype,"title",null),i.__decorate([l.property({dependsOn:["layer.loadStatus?","layerView.updating"],readOnly:!0})],t.prototype,"updating",null),i.__decorate([l.property({value:null})],t.prototype,"view",void 0),i.__decorate([l.aliasOf("layer.visible")],t.prototype,"visible",void 0),i.__decorate([l.property({dependsOn:["layer.minScale?","layer.maxScale?","view.scale"],readOnly:!0})],t.prototype,"visibleAtCurrentScale",null),i.__decorate([l.property({dependsOn:["layer.visibilityMode?","layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],readOnly:!0})],t.prototype,"visibilityMode",null),r=i.__decorate([l.subclass("esri.widgets.LayerList.ListItem")],t)}(s.IdentifiableMixin(o.HandleOwnerMixin(r)))}.apply(null,r))||(e.exports=n)},455:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(169),i(335),i(270),i(167),i(164),i(156),i(157),i(151),i(456),i(188),i(457),i(347),i(294),i(183)],void 0===(n=function(e,t,i,r,n,o,s,a,l,d,c,p,u,y,h,_,v){function g(e,t,i){e.splice(i,0,e.splice(t,1)[0])}var f=r.ofType(h),m="esri-layer-list__list",b="esri-layer-list__list--independent",w="esri-layer-list__item",I="esri-layer-list__item-actions-menu-item",L="esri-layer-list__item-actions-menu-item--active",x="esri-layer-list__item-action-image",C="esri-layer-list__item-label",A="esri-layer-list__item-toggle",S="esri-icon-default-action",O="exclusive",M="inherited",k=l.getLogger("esri.widgets.LayerList"),E={statusIndicators:!0};return function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._handles=new s,n._sortableNodes=new Map,n._sortableMap=new Map,n._focusSortUid=null,n._newUI=a("esri-layerlist-new-ui"),n.visibleItems=null,n.iconClass="esri-icon-layers",n.label=void 0,n.listItemCreatedFunction=null,n.messages=null,n.messagesCommon=null,n.multipleSelectionEnabled=!1,n.operationalItems=null,n.selectionEnabled=!1,n.selectedItems=new f,n.view=null,n.viewModel=new y,n.visibleElements=i.__assign({},E),n._onSortableSort=function(e){var t=e.to,i=e.from,r=e.item,o=e.newIndex;i&&t&&(i===t?n._sortLayers(n._sortableMap.get(i.dataset.group)):n._moveLayerFromChildList({to:t,from:i,item:r,newIndex:o}))},n._sortableCanPut=function(e,t,i){var r,n,o=e.el.dataset.group,s=t.el.dataset.group,a=e.el["data-item"],l=i["data-item"],d=null===(r=null==l?void 0:l.layer)||void 0===r?void 0:r.type,c=null===(n=null==a?void 0:a.layer)||void 0===n?void 0:n.type;return o&&s&&d&&!("group"===c&&"group"===d)},n._sortableCanPull=function(e,t,i){var r,n=e.el.dataset.group,o=t.el.dataset.group,s=i["data-item"],a=null===(r=null==s?void 0:s.layer)||void 0===r?void 0:r.type;return n&&o&&!!a},n._onSortableEnd=function(e){var t=e.oldIndex,i=e.from,r=e.to,n=e.item;i!==r&&i.insertBefore(n,i.children[t])},n}return i.__extends(t,e),t.prototype.initialize=function(){var e=this,t=this.operationalItems;this._setVisibleItems(t),this.own(d.on(this,"operationalItems","change",(function(){return e._itemsChanged(t)})),d.init(this,"selectionEnabled",(function(){return e._toggleAllSorting()})))},t.prototype.destroy=function(){this._destroySortables(),this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"statusIndicatorsVisible",{set:function(e){n.deprecatedProperty(k,"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"}),this.visibleElements=i.__assign(i.__assign({},this.visibleElements),{statusIndicators:e})},enumerable:!0,configurable:!0}),t.prototype.castVisibleElements=function(e){return i.__assign(i.__assign({},E),e)},t.prototype.triggerAction=function(e,t){this.viewModel.triggerAction(e,t)},t.prototype.render=function(){var e,t,i=this.visibleItems,r=this._newUI,n=null===(t=this.viewModel)||void 0===t?void 0:t.state,o=((e={})["esri-layer-list--new-ui"]=r,e["esri-hidden"]="loading"===n,e["esri-disabled"]="disabled"===n,e);return v.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",o)},(null==i?void 0:i.length)?this.renderItems():this.renderNoItems())},t.prototype.renderNoItems=function(){return v.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)},t.prototype.renderItems=function(){var e=this,t=this.visibleItems,i=this.selectionEnabled,r=this.messages;return v.tsx("ul",{"aria-label":r.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes(m,"esri-layer-list__list--root",b)},null==t?void 0:t.map((function(t){return e.renderItem(t,null)})).toArray())},t.prototype.renderActionsMenuIcon=function(e,t){var i,r=this.messagesCommon,n=((i={})[L]=e.actionsOpen,i),o=e.actionsOpen?r.close:r.open;return v.tsx("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(I,n),tabindex:"0",role:"button","aria-controls":t,"aria-label":o,title:o},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))},t.prototype.renderActionsMenu=function(e,t,i,r){var n=e.panel,o=n&&n.visible?this.renderPanelButton(n):null,s=1===i&&this._getSingleActionButton(t),a=s?this.renderAction({item:e,action:s,singleAction:!0}):null,l=!s&&i?this.renderActionsMenuIcon(e,r):null;return l||o||s?v.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},o,a,l):null},t.prototype.renderChildList=function(e,t){var i,r,n=this,o=this.selectionEnabled,s=e.visibilityMode,a=e.children,l=!!e.error,d=!!a.length&&!l,c=!d&&o&&"group"===(null===(r=e.layer)||void 0===r?void 0:r.type),p=O,u=M,y=((i={})["esri-layer-list__list--exclusive"]=s===p,i["esri-layer-list__list--inherited"]=s===u,i[b]=s!==u&&s!==p,i);return d||c?v.tsx("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(m,y),"aria-expanded":e.open?"true":"false",role:o?"listbox":s===p?"radiogroup":"group",hidden:!e.open&&!c||null},null==a?void 0:a.map((function(t){return n.renderItem(t,e)})).toArray()):null},t.prototype.renderChildrenToggle=function(e,t){var i,r=this.messagesCommon,n=e.children,o=!!e.error,s=!!n.length&&!o,a=((i={})["esri-layer-list__child-toggle--open"]=e.open,i),l=e.open?r.collapse:r.expand;return s?v.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",a),tabindex:"0",role:"button","aria-controls":t,"aria-label":l,title:l},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null},t.prototype.renderError=function(e){return e.error?v.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},v.tsx("span",null,this.messages.layerError)):null},t.prototype.renderItemContent=function(e,t,i){var r=this.id+"_"+e.uid,n=r+"_actions",o=r+"__list",s=e.panel,a=this._filterActions(e.actionsSections),l=this._countActions(a);return[v.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(e,o),this.renderLabel(e,t,i),this.renderActionsMenu(e,a,l,n)),this.renderError(e),l?this.renderActionsSections(e,a,n):null,s&&s.open?s.render():null,this.renderChildList(e,o)]},t.prototype.renderItem=function(e,t){var r,n,o,s=this,a=s._newUI,l=s.id,d=s.selectionEnabled,c=s.selectedItems,p=s.visibleElements,u=e.children,y=l+"_"+e.uid+"__title",h=!!e.error,g=!!u.length&&!h,f=((r={})["esri-layer-list__item--has-children"]=g,r["esri-layer-list__item--error"]=!!h,r["esri-layer-list__item--updating"]=e.updating&&!t&&p.statusIndicators,r["esri-layer-list__item--invisible"]=a&&!e.visible,r["esri-layer-list__item--invisible-at-scale"]=!e.visibleAtCurrentScale,r["esri-layer-list__item--selectable"]=d,r);if(d){var m=((n={})["data-layer-uid"]=null===(o=e.layer)||void 0===o?void 0:o.uid,n["data-sort-filter"]=(!e.sortable).toString(),n);return v.tsx("li",i.__assign({key:"item-with-selection-"+e.uid,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(w,f),"aria-labelledby":y,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:"root",tabIndex:0,"aria-selected":_.findSelectedItem(e,c)?"true":"false",role:"option"},m),this.renderItemContent(e,t,y))}return v.tsx("li",{key:"item-no-selection-"+e.uid,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(w,f),"aria-labelledby":y},this.renderItemContent(e,t,y))},t.prototype.renderItemTitle=function(e,t){var i=this.messages,r=e.title||i.untitledLayer,n=e.visibleAtCurrentScale?r:r+" ("+i.layerInvisibleAtScale+")";return v.tsx("span",{key:"layer-title-container",id:t,title:n,"aria-label":n,class:"esri-layer-list__item-title"},r)},t.prototype.renderItemToggleIcon=function(e,t){var i,r=this._newUI,n=O,o=t&&t.visibilityMode,s=((i={})["esri-layer-list__item-toggle-icon"]=r,i["esri-layer-list__item-toggle-icon"]=r&&o!==n,i["esri-layer-list__item-radio-icon"]=r&&o===n,i["esri-icon-radio-checked"]=o===n&&e.visible,i["esri-icon-radio-unchecked"]=o===n&&!e.visible,i["esri-icon-visible"]=o!==n&&e.visible,i["esri-icon-non-visible"]=o!==n&&!e.visible,i);return v.tsx("span",{key:"item-toggle-icon",class:this.classes(s),"aria-hidden":"true"})},t.prototype.renderItemToggle=function(e,t,i){var r=this.selectionEnabled,n=t&&t.visibilityMode,o="exclusive"===n?"radio":"switch";return r?v.tsx("span",{key:"item-toggle-selection-enabled",class:A,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":n,tabIndex:0,"aria-checked":e.visible?"true":"false",role:o,"aria-labelledby":i},this.renderItemToggleIcon(e,t)):v.tsx("span",{key:"item-toggle",class:A},this.renderItemToggleIcon(e,t))},t.prototype.renderItemError=function(e){return e.error?v.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null},t.prototype.renderLabel=function(e,t,i){var r=this.selectionEnabled,n=this._newUI,o=null==t?void 0:t.visibilityMode,s="exclusive"===o?"radio":"switch",a=[this.renderItemToggle(e,t,i),this.renderItemTitle(e,i)];n&&a.reverse();var l=r?v.tsx("div",{key:"item-label-no-selection-"+e.uid,class:C},a):v.tsx("div",{key:"item-label-with-selection-"+e.uid,class:C,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":o,tabIndex:0,"aria-checked":e.visible?"true":"false",role:s,"aria-labelledby":i},a);return"inherited"===o||e.error?v.tsx("div",{key:"item-label-container-"+e.uid,class:C},this.renderItemError(e),this.renderItemTitle(e,i)):l},t.prototype.renderPanelButton=function(e){var t,i,r=e.className,n=e.open,o=e.title,s=e.image||r?r:S,a=this._getIconImageStyles(e),l=((t={})[L]=n,t),d=((i={})[x]=!!a["background-image"],i);return s&&(d[s]=!!s),v.tsx("div",{key:e,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(I,l),role:"button",tabindex:"0",title:o,"aria-label":o},v.tsx("span",{class:this.classes(d),styles:a}))},t.prototype.renderActionsSections=function(e,t,i){var r=this,n=t.toArray().map((function(t){return v.tsx("ul",{key:t,class:"esri-layer-list__item-actions-list"},r.renderActionSection(e,t))}));return v.tsx("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:i,class:"esri-layer-list__item-actions",hidden:!e.actionsOpen||null},n)},t.prototype.renderActionSection=function(e,t){var i=this;return(t&&t.toArray()).map((function(t){return i.renderAction({item:e,action:t})}))},t.prototype.renderActionIcon=function(e){var t,i=e.active,r=e.className,n=this._getIconImageStyles(e),o="button"!==e.type||e.image||r?r:S,s=((t={})[x]=!i&&!!n["background-image"],t["esri-icon-loading-indicator"]=i,t["esri-rotating"]=i,t);return o&&!i&&(s[o]=!0),v.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",s),styles:n})},t.prototype.renderActionTitle=function(e,t){return t?null:v.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},e)},t.prototype.renderAction=function(e){var t,i=e.item,r=e.action,n=e.singleAction,o=r.active,s=r.disabled,a=r.title,l=((t={})[I]=n&&"button"===r.type,t["esri-layer-list__item-action"]=o||!n&&"toggle"!==r.type,t["esri-layer-list__action-toggle"]=!o&&"toggle"===r.type,t["esri-layer-list__action-toggle--on"]=!o&&"toggle"===r.type&&r.value,t["esri-disabled-element"]=s,t),d=[this.renderActionIcon(r),this.renderActionTitle(a,n)];return n?v.tsx("div",{bind:this,"data-item":i,"data-action":r,role:"button",key:r,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",title:a,"aria-label":a},d):v.tsx("li",{bind:this,"data-item":i,"data-action":r,key:r,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:l,tabindex:"0",role:"button",title:a,"aria-label":a},d)},t.prototype._sortNodeRemoved=function(e){var t=this._sortableMap,i=e.dataset.group,r=t.get(i);r&&r.destroy(),t.delete(i)},t.prototype._destroySortables=function(){var e=this._sortableMap,t=this._sortableNodes;e.forEach((function(e){return e&&e.destroy()})),e.clear(),t.clear()},t.prototype._moveLayerFromChildList=function(e){var t=e.to,i=e.from,r=e.item,n=e.newIndex,o=r["data-item"],s=t["data-item"],a=i["data-item"];this.viewModel.moveListItem(o,a,s,n)},t.prototype._sortLayers=function(e){var t,i;if(e){var r=e.el["data-item"],n=e.toArray();r?_.sortChildLayersToIds(r,n):_.sortLayersToIds(null===(i=null===(t=this.view)||void 0===t?void 0:t.map)||void 0===i?void 0:i.layers,n)}},t.prototype._toggleSorting=function(e,t){var i=this._sortableMap,r=this.selectionEnabled,n=i.get(t),o=e["data-item"],s=("root"===t||o.childrenSortable&&_.canSortSublayers(o))&&r;if(n)n.option("disabled",!s);else if(s){var a=p.create(e,{dataIdAttr:"data-layer-uid",group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter="true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!s,chosenClass:"esri-layer-list--chosen"});i.set(t,a)}},t.prototype._toggleAllSorting=function(){var e=this;this._sortableNodes.forEach((function(t,i){return e._toggleSorting(t,i)}))},t.prototype._sortNodeCreated=function(e){var t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))},t.prototype._setVisibleItems=function(e){var t=this;this.visibleItems=null==e?void 0:e.filter((function(e){return t.errorsVisible||!e.error}))},t.prototype._getSingleActionButton=function(e){return e.reduce((function(e){return e})).filter((function(e){return e&&"button"===e.type})).getItemAt(0)},t.prototype._focusListItem=function(e){var t,i=this._focusSortUid;e&&i&&(null===(t=e["data-item"].layer)||void 0===t?void 0:t.uid)===i&&(e.focus(),this._focusSortUid=null)},t.prototype._watchActionSectionChanges=function(e,t){var i=this,r="action-section"+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),r),e.forEach((function(e){return i._renderOnActionChanges(e,t)}))},t.prototype._renderOnActionChanges=function(e,t){var i=this,r="actions"+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add([d.init(e,["className","image","id","title","visible"],(function(){return i.scheduleRender()}))],r):this._handles.add([d.init(e,["className","id","title","visible","value","displayValueEnabled","max","min","step"],(function(){return i.scheduleRender()}))],r):this._handles.add([d.init(e,["className","image","id","title","visible","value"],(function(){return i.scheduleRender()}))],r)},t.prototype._renderOnItemChanges=function(e){var t=this,i=e.uid,r="items"+i;this._handles.add([d.init(e,["actionsOpen","visible","open","updating","title","visibleAtCurrentScale","error","visibilityMode","panel","panel.title","panel.content","panel.className","sortable","childrenSortable"],(function(){return t.scheduleRender()})),e.actionsSections.on("change",(function(){return t.scheduleRender()})),e.children.on("change",(function(){return t.scheduleRender()}))],r),e.children.forEach((function(e){return t._renderOnItemChanges(e)})),e.actionsSections.forEach((function(e){return t._watchActionSectionChanges(e,i)}))},t.prototype._itemsChanged=function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnItemChanges(e)})),this._setVisibleItems(e),this.scheduleRender()},t.prototype._filterActions=function(e){return e.map((function(e){return e.filter((function(e){return e.visible}))}))},t.prototype._countActions=function(e){return e.reduce((function(e,t){return e+t.length}),0)},t.prototype._getIconImageStyles=function(e){var t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?'url("'+t+'")':null}},t.prototype._selectionKeydown=function(e){var t,i,r,n,s=o.eventKey(e);if(-1!==["ArrowDown","ArrowUp"].indexOf(s)){e.stopPropagation();var a=e.currentTarget,l=a["data-item"],d=this._sortableMap,c=this.selectedItems,p=a.dataset.group,u=d.get(p);if(u){var y=_.findSelectedItem(l,c),h=u.toArray(),v=e.target,f=h.indexOf(v.dataset.layerUid);if(-1!==f){if("ArrowDown"===s){if((m=f+1)>=h.length)return;y?(g(h,f,m),u.sort(h),this._sortLayers(u),this._focusSortUid=null===(t=l.layer)||void 0===t?void 0:t.uid):(this._focusSortUid=null===(i=l.layer)||void 0===i?void 0:i.uid,this.scheduleRender())}if("ArrowUp"===s){var m;if((m=f-1)<=-1)return;y?(g(h,f,m),u.sort(h),this._sortLayers(u),this._focusSortUid=null===(r=l.layer)||void 0===r?void 0:r.uid):(this._focusSortUid=null===(n=l.layer)||void 0===n?void 0:n.uid,this.scheduleRender())}}}}else this._toggleSelection(e)},t.prototype._toggleActionsOpen=function(e){var t=e.currentTarget["data-item"],i=!t.actionsOpen;i&&this.operationalItems.forEach((function(e){return function e(t){var i=t.actionsOpen,r=t.children;i&&(t.actionsOpen=!1),r.forEach((function(t){return e(t)}))}(e)})),t.actionsOpen=i,e.stopPropagation()},t.prototype._triggerPanel=function(e){var t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()},t.prototype._triggerAction=function(e){var t=e.currentTarget,i=t["data-action"],r=t["data-item"];"toggle"===i.type&&(i.value=!i.value),this.triggerAction(i,r),e.stopPropagation()},t.prototype._toggleVisibility=function(e){var t=e.currentTarget,i=t.getAttribute("data-parent-visibility"),r=t["data-item"];i===O&&r.visible||(r.visible=!r.visible),e.stopPropagation()},t.prototype._toggleChildrenClick=function(e){var t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()},t.prototype._toggleSelection=function(e){e.stopPropagation();var t=this.multipleSelectionEnabled,i=this.selectedItems,r=t&&(e.metaKey||e.ctrlKey),n=e.currentTarget["data-item"],o=_.findSelectedItem(n,i),s=i.length;if(!r)return!s||o&&1===s?void(o?i.remove(o):i.add(n)):(i.removeAll(),void i.add(n));o?i.remove(o):i.add(n)},i.__decorate([c.property()],t.prototype,"visibleItems",void 0),i.__decorate([c.property()],t.prototype,"iconClass",void 0),i.__decorate([c.property(),v.renderable()],t.prototype,"errorsVisible",void 0),i.__decorate([c.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),i.__decorate([c.aliasOf("viewModel.listItemCreatedFunction"),v.renderable()],t.prototype,"listItemCreatedFunction",void 0),i.__decorate([c.property(),v.renderable(),v.messageBundle("esri/widgets/LayerList/t9n/LayerList")],t.prototype,"messages",void 0),i.__decorate([c.property(),v.renderable(),v.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0),i.__decorate([c.property()],t.prototype,"multipleSelectionEnabled",void 0),i.__decorate([c.aliasOf("viewModel.operationalItems"),v.renderable()],t.prototype,"operationalItems",void 0),i.__decorate([c.property(),v.renderable()],t.prototype,"selectionEnabled",void 0),i.__decorate([c.property(),v.renderable()],t.prototype,"selectedItems",void 0),i.__decorate([c.property(),v.renderable()],t.prototype,"statusIndicatorsVisible",null),i.__decorate([c.aliasOf("viewModel.view"),v.renderable()],t.prototype,"view",void 0),i.__decorate([v.vmEvent("trigger-action"),c.property({type:y}),v.renderable("viewModel.state")],t.prototype,"viewModel",void 0),i.__decorate([c.property(),v.renderable()],t.prototype,"visibleElements",void 0),i.__decorate([c.cast("visibleElements")],t.prototype,"castVisibleElements",null),i.__decorate([c.aliasOf("viewModel.triggerAction")],t.prototype,"triggerAction",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleActionsOpen",null),i.__decorate([v.accessibleHandler()],t.prototype,"_triggerPanel",null),i.__decorate([v.accessibleHandler()],t.prototype,"_triggerAction",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleVisibility",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleChildrenClick",null),i.__decorate([v.accessibleHandler()],t.prototype,"_toggleSelection",null),i.__decorate([c.subclass("esri.widgets.LayerList")],t)}(u)}.apply(null,r))||(e.exports=n)},457:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(169),i(190),i(167),i(157),i(151),i(347),i(294)],void 0===(n=function(e,t,i,r,n,o,s,a,l,d){var c="view-layers",p="map-layers",u="layer-views",y="layer-list-mode",h=r.ofType(l);return function(e){function t(t){var i=e.call(this,t)||this;return i._handles=new o,i.listItemCreatedFunction=null,i.operationalItems=new h,i.view=null,i}return i.__extends(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(s.init(this,["view","view.ready"],(function(){return e._viewHandles()})),"view")},t.prototype.destroy=function(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()},Object.defineProperty(t.prototype,"state",{get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"},enumerable:!0,configurable:!0}),t.prototype.triggerAction=function(e,t){e&&this.emit("trigger-action",{action:e,item:t})},t.prototype.moveListItem=function(e,t,i,r){var n,o,s=null==e?void 0:e.layer;if(s){var a=null===(o=null===(n=this.view)||void 0===n?void 0:n.map)||void 0===o?void 0:o.layers,l=t?d.getItemLayers(t):a,c=i?d.getItemLayers(i):a;if(l&&c){var p=this.operationalItems,u=(null==t?void 0:t.children)||p,y=(null==i?void 0:i.children)||p,h=c.length-r;e.parent=i||null,u.includes(e)&&u.remove(e),l.includes(s)&&l.remove(s),y.includes(e)||y.add(e,h),c.includes(s)||c.add(s,h)}}},t.prototype._createLayerViewHandles=function(e){var t=this,i=this._handles;i.remove(u),this._compileList(),e&&i.add(e.on("change",(function(){return t._compileList()})),u)},t.prototype._createMapLayerHandles=function(e){var t=this,i=this._handles;i.remove(p),this._compileList(),e&&i.add(e.on("change",(function(){return t._compileList()})),p)},t.prototype._watchItemProperties=function(e){var t=this;this._handles.add([e.children.on("change",(function(){t._modifyListItemChildren(e.children)}))],"children-change-"+e.uid)},t.prototype._modifyListItemChildren=function(e){var t=this;e.forEach((function(e){return t._modifyListItem(e)}))},t.prototype._modifyListItem=function(e){if("function"==typeof this.listItemCreatedFunction){var t={item:e};this.listItemCreatedFunction.call(null,t)}this._modifyListItemChildren(e.children)},t.prototype._createListItem=function(e){var t=this.view,i=new l({layer:e,view:t});return this._watchItemProperties(i),i},t.prototype._removeAllItems=function(){var e=this._handles,t=this.operationalItems;t.forEach((function(t){e.remove("children-change-"+t.uid)})),t.removeAll()},t.prototype._getViewableLayers=function(e){if(e)return e.filter((function(e){return"hide"!==d.findLayerListMode(e)}))},t.prototype._watchLayersListMode=function(e){var t=this,i=this._handles;i.remove(y),e&&e.forEach((function(e){i.add(s.watch(e,"listMode",(function(){return t._compileList()})),y)}))},t.prototype._compileList=function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);var t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._modifyOrRemoveItems(t),this._sortItems(t)):this._removeAllItems()},t.prototype._createNewItems=function(e){var t=this,i=this.operationalItems;e.forEach((function(e){i.find((function(t){return t.layer===e}))||i.add(t._createListItem(e))}))},t.prototype._modifyOrRemoveItems=function(e){var t=this,i=this._handles,r=this.operationalItems;r.forEach((function(n){n&&(e&&e.find((function(e){return n.layer===e}))?t._modifyListItem(n):(i.remove("children-change-"+n.uid),r.remove(n)))}))},t.prototype._sortItems=function(e){this.operationalItems.sort((function(t,i){var r=e.indexOf(t.layer),n=e.indexOf(i.layer);return r>n?-1:r<n?1:0}))},t.prototype._viewHandles=function(){var e=this,t=this._handles,i=this.view;t.remove([p,u,c]),this._compileList(),i&&i.ready&&t.add([s.init(this,"view.map.layers",(function(t){return e._createMapLayerHandles(t)})),s.init(this,"view.layerViews",(function(t){return e._createLayerViewHandles(t)})),s.init(this,"listItemCreatedFunction",(function(){return e._compileList()}))],c)},i.__decorate([a.property()],t.prototype,"listItemCreatedFunction",void 0),i.__decorate([a.property({type:h})],t.prototype,"operationalItems",void 0),i.__decorate([a.property({dependsOn:["view.ready"],readOnly:!0})],t.prototype,"state",null),i.__decorate([a.property()],t.prototype,"view",void 0),i.__decorate([a.subclass("esri.widgets.LayerList.LayerListViewModel")],t)}(n.EventedAccessor)}.apply(null,r))||(e.exports=n)},458:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(151),i(337)],void 0===(n=function(e,t,i,r,n){return function(e){function t(t){var i=e.call(this,t)||this;return i.displayValueEnabled=!1,i.max=1,i.min=0,i.step=.1,i.type="slider",i.value=null,i}var n;return i.__extends(t,e),n=t,t.prototype.clone=function(){return new n({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})},i.__decorate([r.property()],t.prototype,"displayValueEnabled",void 0),i.__decorate([r.property()],t.prototype,"max",void 0),i.__decorate([r.property()],t.prototype,"min",void 0),i.__decorate([r.property()],t.prototype,"step",void 0),i.__decorate([r.property()],t.prototype,"value",void 0),n=i.__decorate([r.subclass("esri.support.Action.ActionSlider")],t)}(n)}.apply(null,r))||(e.exports=n)},459:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(117),i(167),i(292),i(157),i(151),i(188),i(183),i(161)],void 0===(n=function(e,t,r,n,o,s,a,l,d){var c="esri-layer-list-panel__content";return function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._legend=null,r._handles=new n,r.content=null,r.image=null,r.listItem=null,r.open=!1,r.visible=!0,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this.own([s.init(this,"content",(function(t){return e._createLegend(t)}))])},t.prototype.destroy=function(){var e=this._legend;e&&e.destroy(),this._legend=null},Object.defineProperty(t.prototype,"className",{get:function(){var e=this.image,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""},set:function(e){void 0!==e?this._override("className",e):this._clearOverride("className")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){var e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")},enumerable:!0,configurable:!0}),t.prototype.render=function(){return d.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())},t.prototype._renderContent=function(e){var t=this._legend,i=this.listItem;return e?"legend"===e?i&&i.view&&i.layer&&t?d.tsx("div",{class:this.classes(c,"esri-layer-list-panel__content--legend"),key:t},t.render()):null:"string"==typeof e?d.tsx("div",{class:this.classes(c,"esri-layer-list-panel__content--string"),key:e,innerHTML:e}):d.isWidget(e)?d.tsx("div",{class:this.classes(c,"esri-layer-list-panel__content--widget"),key:e},e.render()):e instanceof HTMLElement?d.tsx("div",{class:this.classes(c,"esri-layer-list-panel__content--html-element"),key:e,bind:e,afterCreate:this._attachToNode}):null:null},t.prototype._renderContents=function(){var e=this,t=this.content;return Array.isArray(t)?t.map((function(t){return e._renderContent(t)})):this._renderContent(t)},t.prototype._getLegendOptions=function(e){if(e){var t=e.layer,i=e.view;if(t&&i)return{view:i,layerInfos:[{layer:t,title:""}]}}},t.prototype._createLegend=function(e){var t=this;this._hasLegend(e)&&!this._legend&&new Promise((function(e,t){i.e(6).then(function(){var t=[i(300)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})).then((function(e){var i=t,r=i._handles,n=i.listItem,o=new e(t._getLegendOptions(n));t._legend=o,t.notifyChange("className"),t.notifyChange("title");var a=s.init(t,["listItem.view","listItem.layer"],(function(){return t._updateLegend(o)}));r.add(a,"legends"),t.scheduleRender()}))},t.prototype._hasLegend=function(e){return"legend"===e||!!Array.isArray(e)&&e.some((function(e){return"legend"===e}))},t.prototype._attachToNode=function(e){e.appendChild(this)},t.prototype._updateLegend=function(e){var t=this.listItem;if(t){var i=t.layer,r=t.view;e.view=r,e.layerInfos=[{layer:i,title:null}],this.scheduleRender()}},t.prototype._getWidget=function(e){return"legend"===e?this._legend:d.isWidget(e)?e:null},t.prototype._getFirstWidget=function(){var e=this,t=this.content;if(Array.isArray(t)){var i=null;return t.some((function(t){var r=e._getWidget(t);return r&&(i=r),!!r})),i}return this._getWidget(t)},r.__decorate([a.property({dependsOn:["content","image"]})],t.prototype,"className",null),r.__decorate([a.property(),d.renderable()],t.prototype,"content",void 0),r.__decorate([a.property()],t.prototype,"image",void 0),r.__decorate([a.property()],t.prototype,"listItem",void 0),r.__decorate([a.property({dependsOn:["content"]})],t.prototype,"title",null),r.__decorate([a.property(),d.renderable()],t.prototype,"open",void 0),r.__decorate([a.property()],t.prototype,"visible",void 0),r.__decorate([a.subclass("esri.widgets.LayerList.ListItemPanel")],t)}(o.IdentifiableMixin(l))}.apply(null,r))||(e.exports=n)}}]);
//# sourceMappingURL=100.js.map